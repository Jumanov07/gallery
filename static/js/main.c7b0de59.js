/*! For license information please see main.c7b0de59.js.LICENSE.txt */
!function(){"use strict";var e={340:function(e,t,n){n.r(t),n.d(t,{CountUp:function(){return i}});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=function(){function e(e,t,n){var i=this;this.endVal=t,this.options=n,this.version="2.3.2",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(e){i.startTime||(i.startTime=e);var t=e-i.startTime;i.remaining=i.duration-t,i.useEasing?i.countDown?i.frameVal=i.startVal-i.easingFn(t,0,i.startVal-i.endVal,i.duration):i.frameVal=i.easingFn(t,i.startVal,i.endVal-i.startVal,i.duration):i.frameVal=i.startVal+(i.endVal-i.startVal)*(t/i.duration);var n=i.countDown?i.frameVal<i.endVal:i.frameVal>i.endVal;i.frameVal=n?i.endVal:i.frameVal,i.frameVal=Number(i.frameVal.toFixed(i.options.decimalPlaces)),i.printValue(i.frameVal),t<i.duration?i.rAF=requestAnimationFrame(i.count):null!==i.finalEndVal?i.update(i.finalEndVal):i.callback&&i.callback()},this.formatNumber=function(e){var t,n,r,a,o=e<0?"-":"";t=Math.abs(e).toFixed(i.options.decimalPlaces);var u=(t+="").split(".");if(n=u[0],r=u.length>1?i.options.decimal+u[1]:"",i.options.useGrouping){a="";for(var s=0,c=n.length;s<c;++s)0!==s&&s%3==0&&(a=i.options.separator+a),a=n[c-s-1]+a;n=a}return i.options.numerals&&i.options.numerals.length&&(n=n.replace(/[0-9]/g,(function(e){return i.options.numerals[+e]})),r=r.replace(/[0-9]/g,(function(e){return i.options.numerals[+e]}))),o+i.options.prefix+n+r+i.options.suffix},this.easeOutExpo=function(e,t,n,r){return n*(1-Math.pow(2,-10*e/r))*1024/1023+t},this.options=r(r({},this.defaults),n),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(t),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof e?document.getElementById(e):e,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined","undefined"!=typeof window&&this.options.enableScrollSpy&&(this.error?console.error(this.error,e):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push((function(){return i.handleScroll(i)})),window.onscroll=function(){window.onScrollFns.forEach((function(e){return e()}))},this.handleScroll(this)))}return e.prototype.handleScroll=function(e){if(e&&window&&!e.once){var t=window.innerHeight+window.scrollY,n=e.el.getBoundingClientRect(),r=n.top+n.height+window.pageYOffset;r<t&&r>window.scrollY&&e.paused?(e.paused=!1,setTimeout((function(){return e.start()}),e.options.scrollSpyDelay),e.options.scrollSpyOnce&&(e.once=!0)):window.scrollY>r&&!e.paused&&e.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var e=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>e;var t=e-this.startVal;if(Math.abs(t)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=e;var n=this.countDown?1:-1;this.endVal=e+n*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=e,this.finalEndVal=null;null!==this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(e){this.error||(this.callback=e,this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(e){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(e),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(e){var t=this.formattingFn(e);"INPUT"===this.el.tagName?this.el.value=t:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=t:this.el.innerHTML=t},e.prototype.ensureNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.prototype.validateValue=function(e){var t=Number(e);return this.ensureNumber(t)?t:(this.error="[CountUp] invalid start or end value: ".concat(e),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e}()},835:function(e,t,n){var r=n(791),i=n(340);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;function f(e){var t=r.useRef(e);return l((function(){t.current=e})),r.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}var h=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],d={decimal:".",delay:null,prefix:"",suffix:"",duration:2,start:0,startOnMount:!0,enableReinitialize:!0},v=function(e){var t=r.useMemo((function(){return o(o({},d),e)}),[e]),n=t.ref,a=t.startOnMount,u=t.enableReinitialize,s=t.delay,l=t.onEnd,v=t.onStart,p=t.onPauseResume,m=t.onReset,y=t.onUpdate,g=c(t,h),k=r.useRef(),b=r.useRef(),w=r.useRef(!1),x=f((function(){return function(e,t){var n=t.decimal,r=t.decimals,a=t.duration,o=t.easingFn,u=t.end,s=t.formattingFn,c=t.numerals,l=t.prefix,f=t.separator,h=t.start,d=t.suffix,v=t.useEasing,p=t.enableScrollSpy,m=t.scrollSpyDelay,y=t.scrollSpyOnce;return new i.CountUp(e,u,{startVal:h,duration:a,decimal:n,decimalPlaces:r,easingFn:o,formattingFn:s,numerals:c,separator:f,prefix:l,suffix:d,useEasing:v,useGrouping:!!f,enableScrollSpy:p,scrollSpyDelay:m,scrollSpyOnce:y})}("string"===typeof n?n:n.current,g)})),_=f((function(e){var t=k.current;if(t&&!e)return t;var n=x();return k.current=n,n})),E=f((function(){var e=function(){return _(!0).start((function(){null===l||void 0===l||l({pauseResume:S,reset:T,start:C,update:I})}))};s&&s>0?b.current=setTimeout(e,1e3*s):e(),null===v||void 0===v||v({pauseResume:S,reset:T,update:I})})),S=f((function(){_().pauseResume(),null===p||void 0===p||p({reset:T,start:C,update:I})})),T=f((function(){_().el&&(b.current&&clearTimeout(b.current),_().reset(),null===m||void 0===m||m({pauseResume:S,start:C,update:I}))})),I=f((function(e){_().update(e),null===y||void 0===y||y({pauseResume:S,reset:T,start:C})})),C=f((function(){T(),E()})),A=f((function(e){a&&(e&&T(),E())}));return r.useEffect((function(){w.current?u&&A(!0):(w.current=!0,A())}),[u,w,A,s,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),r.useEffect((function(){return function(){T()}}),[T]),{start:C,pauseResume:S,reset:T,update:I,getCountUp:_}},p=["className","redraw","containerProps","children","style"];t.ZP=function(e){var t=e.className,n=e.redraw,i=e.containerProps,a=e.children,u=e.style,l=c(e,p),h=r.useRef(null),d=r.useRef(!1),m=v(o(o({},l),{},{ref:h,startOnMount:"function"!==typeof a||0===e.delay,enableReinitialize:!1})),y=m.start,g=m.reset,k=m.update,b=m.pauseResume,w=m.getCountUp,x=f((function(){y()})),_=f((function(t){e.preserveValue||g(),k(t)})),E=f((function(){"function"!==typeof e.children||h.current instanceof Element?w():console.error('Couldn\'t find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.')}));r.useEffect((function(){E()}),[E]),r.useEffect((function(){d.current&&_(e.end)}),[e.end,_]);var S=n&&e;return r.useEffect((function(){n&&d.current&&x()}),[x,n,S]),r.useEffect((function(){!n&&d.current&&x()}),[x,n,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),r.useEffect((function(){d.current=!0}),[]),"function"===typeof a?a({countUpRef:h,start:y,reset:g,update:k,pauseResume:b,getCountUp:w}):r.createElement("span",s({className:t,ref:h,style:u},i),"undefined"!==typeof e.start?w().formattingFn(e.start):"")}},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function j(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Te(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ie(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var De=!1;function Ne(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==_e||null!==Ee)&&(Ae(),Ie())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,Be={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,Et,St,Tt=!1,It=[],Ct=null,At=null,Dt=null,Nt=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==At&&Vt(At)&&(At=null),null!==Dt&&Vt(Dt)&&(Dt=null),Nt.forEach(Ut),Pt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return jt(t,e)}if(0<It.length){jt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==At&&jt(At,e),null!==Dt&&jt(Dt,e),Nt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Gt){var i=Xt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Mt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return En}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Dn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Nn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Vr(e,0)}function Xn(e){if(W(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Kn(t,Wn,e,we(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Tr=Sr("animationend"),Ir=Sr("animationiteration"),Cr=Sr("animationstart"),Ar=Sr("transitionend"),Dr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Nr.length;Rr++){var Or=Nr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Tr:case Ir:case Cr:s=yn;break;case Ar:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Pe(v,h))&&l.push(Kr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Wr(d))v++;for(d=0,p=h;p;p=Wr(p))d++;for(;0<v-d;)l=Wr(l),v--;for(;0<d-v;)h=Wr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Gn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ei(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ti(e,t){_i++,xi[_i]=e.current,e.current=t}var Ii={},Ci=Ei(Ii),Ai=Ei(!1),Di=Ii;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ai),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Di=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Si(Ai),Si(Ci),Ti(Ci,e)):Si(Ai),Ti(Ai,n)}var Vi=null,Ui=!1,Bi=!1;function ji(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!Bi&&null!==Vi){Bi=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),We(Ze,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Gi=0,Ki=null,Hi=0,Wi=[],Qi=0,Xi=null,Yi=1,$i="";function Ji(e,t){qi[Gi++]=Hi,qi[Gi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=$i,Wi[Qi++]=Xi,Xi=e;var r=Yi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Yi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Hi=qi[--Gi],qi[Gi]=null;for(;e===Xi;)Xi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Si(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Di:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Di:Ci.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,m=null;null!==f&&p<u.length;p++){f.index>p?(m=f,f=null):m=f.sibling;var y=d(i,f,u[p],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y,f=m}if(p===u.length)return n(i,f),ia&&Ji(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(m=v(f,i,p,u[p],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?p:m.key),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,m=u=0,y=null,g=s.next();null!==p&&!g.done;m++,g=s.next()){p.index>m?(y=p,p=null):y=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=y);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,p=y}if(g.done)return n(i,p),ia&&Ji(i,m),l;if(null===p){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(p=r(i,p);!g.done;m++,g=s.next())null!==(g=v(p,i,m,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=Xa(!0),$a=Xa(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ti(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,vo=0,po=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,vo=0,yo=mo=po=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?po.memoizedState=yo=e:yo=yo.next=e,yo}function Io(){if(null===mo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?po.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?po.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Po(e,t){var n=po,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&vo)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&nc(t,e,1,-1)}function Vo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Io().memoizedState}function jo(e,t,n,r){var i=To();po.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}po.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return jo(8390656,8,e,t)}function Go(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Xo(){}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Vo,useDebugValue:Xo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&vo)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=As.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:$o,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Co)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(Io(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:$o,useReducer:Do,useRef:Bo,useState:function(){return Do(Co)},useDebugValue:Xo,useDeferredValue:function(e){var t=Io();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ks=r),hu(0,t)},n}function pu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ya(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Rs,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Rs,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Rs,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Rs,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Pi(n)?Di:Ci.current;return a=Ni(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ni(t,c=Pi(n)?Di:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Da?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Da||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ni(t,s=Pi(n)?Di:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Ai.current||Da?("function"===typeof d&&(Ba(t,n,d,r),v=t.memoizedState),(c=Da||za(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Nu(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ru,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nc(r,e,i,-1))}return pc(),Uu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=$i,Wi[Qi++]=Xi,Yi=e.id,$i=e.overflow,Xi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&va(r),Ya(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function ju(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ju(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ju(t,!0,n,null,a);break;case"together":ju(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ai),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=X(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):pc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*$e()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ai),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,Yu=!1,$u="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Yu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,hs(e,t,n),Yu=r):hs(e,t,n);break;default:hs(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ps(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ps(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ec(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ps(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(ps(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ps(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ps(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ps(t,e),ys(e);break;case 13:ps(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(js=$e())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,ps(t,e),Yu=l):ps(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(v=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==v?(v.return=d,Ju=v):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ps(t,e),ys(e),4&r&&vs(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=Xu;var c=Yu;if(Xu=o,(Yu=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Ju=s):xs(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,Xu=u,Yu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&is(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function xs(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var _s,Es=Math.ceil,Ss=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,Cs=0,As=null,Ds=null,Ns=0,Ps=0,Rs=Ei(0),Os=0,Ls=null,Ms=0,Fs=0,Vs=0,Us=null,Bs=null,js=0,zs=1/0,qs=null,Gs=!1,Ks=null,Hs=null,Ws=!1,Qs=null,Xs=0,Ys=0,$s=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?$e():-1!==Js?Js:Js=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ns?Ns&-Ns:null!==pa.transition?(0===Zs&&(Zs=pt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Ys)throw Ys=0,$s=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===As||(e===As&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Ns)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=$e()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Ns:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(sc.bind(null,e)):ji(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Ns:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=vc();for(As===e&&Ns===t||(qs=null,zs=$e()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Ss.current=o,Cs=i,null!==Ds?t=0:(As=null,Ns=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,$e()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=vt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Bs,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=js+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Bs,qs),t);break}wc(e,Bs,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Bs,qs),r);break}wc(e,Bs,qs);break;default:throw Error(a(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bs,Bs=n,null!==t&&oc(t)),e}function oc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function uc(e,t){for(t&=~Vs,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bs,qs),rc(e,$e()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=$e()+500,Ui&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Ps=Rs.current,Si(Rs)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Ai),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(As=e,Ds=e=Rc(e.current,null),Ns=Ps=t,Os=0,Ls=null,Vs=Fs=Ms=0,Bs=Us=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function dc(e,t){for(;;){var n=Ds;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,yo=mo=po=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Os=1,Ls=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ns,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=yu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&mu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){mu(o,l,t),pc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function pc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===As||0===(268435455&Ms)&&0===(268435455&Fs)||uc(As,Ns)}function mc(e,t){var n=Cs;Cs|=2;var r=vc();for(As===e&&Ns===t||(qs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==Ds)throw Error(a(261));return As=null,Ns=0,Os}function yc(){for(;null!==Ds;)kc(Ds)}function gc(){for(;null!==Ds&&!Xe();)kc(Ds)}function kc(e){var t=_s(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bc(e):Ds=t,Ts.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ps)))return void(Ds=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Os=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Os&&(Os=5)}function wc(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ds=As=null,Ns=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ts.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,y=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}p=ts,ts=!1}(e,n),ms(n,e),vr(ti),Gt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Ye(),Cs=s,kt=u,Is.transition=o}else e.current=n;if(Ws&&(Ws=!1,Qs=e,Xs=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ks,Ks=null,e;0!==(1&Xs)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===$s?Ys++:(Ys=0,$s=e):Ys=0,zi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt(Xs),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Xs=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,v=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=v,Ju=d;break}Ju=v}}}var p=o.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ec(s,s.return,x)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function _c(e,t,n){e=Oa(e,t=vu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=pu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ns&n)===n&&(4===Os||3===Os&&(130023424&Ns)===Ns&&500>$e()-js?hc(e,0):Vs|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Aa(e,t))&&(yt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return We(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Nc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case A:return(e=Nc(13,n,t,i)).elementType=A,e.lanes=o,e;case D:return(e=Nc(19,n,t,i)).elementType=D,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case N:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Nc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Nc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Gc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Nu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Nu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ka(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Gc(null,e,null,null)})),t[vi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,$e()),0===(6&Cs)&&(zs=$e()+500,zi()))}break;case 13:lc((function(){var t=Aa(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Aa(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,p(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!p)if(null!==r(c))p=!0,R(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){p=!1,m&&(m=!1,g(T),T=-1),v=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,S=null,T=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function D(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(E=!1,S=null)}}else E=!1}if("function"===typeof k)_=function(){k(D)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=D,_=function(){P.postMessage(null)}}else _=function(){y(D,0)};function R(e){S=e,E||(E=!0,_())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,R(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/gallery/",function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return B},SDK_VERSION:function(){return Qe},_DEFAULT_ENTRY_NAME:function(){return Le},_addComponent:function(){return Ue},_addOrOverwriteComponent:function(){return Be},_apps:function(){return Fe},_clearComponents:function(){return Ge},_components:function(){return Ve},_getProvider:function(){return ze},_registerComponent:function(){return je},_removeServiceInstance:function(){return qe},deleteApp:function(){return Je},getApp:function(){return Ye},getApps:function(){return $e},initializeApp:function(){return Xe},onLog:function(){return tt},registerVersion:function(){return et},setLogLevel:function(){return nt}});var t=n(791),r=n(250);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}function c(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function v(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function x(e){var t=b();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function _(e,t,n){return _=b()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},_.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},E(e)}var S=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(S(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new I;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},I=function(e){g(n,e);var t=x(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return v(n)}(E(Error)),C=function(e){return function(e){var t=S(e);return T.encodeByteArray(t,!0)}(e).replace(/\./g,"")},A=function(e){try{return T.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function D(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&N(n)&&(e[n]=D(e[n],t[n]));return e}function N(e){return"__proto__"!==e}var P=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},R=function(){try{return P()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/gallery",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&A(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},O=function(){var e;return null===(e=R())||void 0===e?void 0:e.config},L=function(){function e(){var t=this;h(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return v(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function M(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[C(JSON.stringify({alg:"none",type:"JWT"})),C(JSON.stringify(a)),""].join(".")}function F(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function V(){var e,t=null===(e=R())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function U(){try{return"object"===typeof indexedDB}catch(e){return!1}}var B=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(m(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(m(a),j.prototype.create),a}return v(n)}(E(Error)),j=function(){function e(t,n,r){h(this,e),this.service=t,this.serviceName=n,this.errors=r}return v(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?z(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new B(n,a,t);return o}}]),e}();function z(e,t){return e.replace(q,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var q=/\{\$([^}]+)}/g;function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function K(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(H(u)&&H(s)){if(!K(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function H(e){return null!==e&&"object"===typeof e}function W(e,t){var n=new Q(e,t);return n.subscribe.bind(n)}var Q=function(){function e(t,n){var r=this;h(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return v(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=p(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=X),void 0===r.error&&(r.error=X),void 0===r.complete&&(r.complete=X);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function X(){}function Y(e){return e&&e._delegate?e._delegate:e}function $(){$=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var h={};function d(){}function v(){}function p(){}var m={};c(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(I([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=p.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var c=f(e[r],e,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==u(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=p,r(k,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:v,configurable:!0}),v.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),c(k,s,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function J(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Z(a,r,i,o,u,"next",e)}function u(e){Z(a,r,i,o,u,"throw",e)}o(void 0)}))}}var te=function(){function e(t,n,r){h(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ne="[DEFAULT]",re=function(){function e(t,n){h(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new L;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(c){}var t,n=p(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),i=r[0],a=r[1],u=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:u});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ee($().mark((function e(){var t;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(J(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),J(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),u=p(this.instancesDeferred.entries());try{for(u.s();!(i=u.n()).done;){var s=o(i.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){u.e(h)}finally{u.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(ng){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ne?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(ng){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.component?this.component.multipleInstances?e:ne:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ie,ae,oe=function(){function e(t){h(this,e),this.name=t,this.providers=new Map}return v(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new re(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ue=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ae||(ae={}));var se={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},ce=ae.INFO,le=(c(ie={},ae.DEBUG,"log"),c(ie,ae.VERBOSE,"log"),c(ie,ae.INFO,"info"),c(ie,ae.WARN,"warn"),c(ie,ae.ERROR,"error"),ie),fe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=le[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},he=function(){function e(t){h(this,e),this.name=t,this._logLevel=ce,this._logHandler=fe,this._userLogHandler=null,ue.push(this)}return v(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ae))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?se[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.DEBUG].concat(t)),this._logHandler.apply(this,[this,ae.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ae.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.INFO].concat(t)),this._logHandler.apply(this,[this,ae.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.WARN].concat(t)),this._logHandler.apply(this,[this,ae.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.ERROR].concat(t)),this._logHandler.apply(this,[this,ae.ERROR].concat(t))}}]),e}();var de,ve;var pe=new WeakMap,me=new WeakMap,ye=new WeakMap,ge=new WeakMap,ke=new WeakMap;var be={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return me.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ye.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _e(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function we(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ee(this),n),_e(pe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(e.apply(Ee(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ee(this),t].concat(r));return ye.set(a,t.sort?t.sort():[t]),_e(a)}}function xe(e){return"function"===typeof e?we(e):(e instanceof IDBTransaction&&function(e){if(!me.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));me.set(e,t)}}(e),t=e,(de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,be):e);var t}function _e(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(_e(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&pe.set(t,e)})).catch((function(){})),ke.set(t,e),t}(e);if(ge.has(e))return ge.get(e);var t=xe(e);return t!==e&&(ge.set(e,t),ke.set(t,e)),t}var Ee=function(e){return ke.get(e)};var Se,Te,Ie=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ae=new Map;function De(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ae.get(t))return Ae.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ce.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ie.includes(n))){var a=function(){var e=ee($().mark((function e(t){var a,o,u,s,c,l,f=arguments;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ae.set(t,a),a}}}be=function(e){return f(f({},e),{},{get:function(t,n,r){return De(t,n)||e.get(t,n,r)},has:function(t,n){return!!De(t,n)||e.has(t,n)}})}(be);var Ne=function(){function e(t){h(this,e),this.container=t}return v(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Pe="@firebase/app",Re="0.9.13",Oe=new he("@firebase/app"),Le="[DEFAULT]",Me=(c(Se={},Pe,"fire-core"),c(Se,"@firebase/app-compat","fire-core-compat"),c(Se,"@firebase/analytics","fire-analytics"),c(Se,"@firebase/analytics-compat","fire-analytics-compat"),c(Se,"@firebase/app-check","fire-app-check"),c(Se,"@firebase/app-check-compat","fire-app-check-compat"),c(Se,"@firebase/auth","fire-auth"),c(Se,"@firebase/auth-compat","fire-auth-compat"),c(Se,"@firebase/database","fire-rtdb"),c(Se,"@firebase/database-compat","fire-rtdb-compat"),c(Se,"@firebase/functions","fire-fn"),c(Se,"@firebase/functions-compat","fire-fn-compat"),c(Se,"@firebase/installations","fire-iid"),c(Se,"@firebase/installations-compat","fire-iid-compat"),c(Se,"@firebase/messaging","fire-fcm"),c(Se,"@firebase/messaging-compat","fire-fcm-compat"),c(Se,"@firebase/performance","fire-perf"),c(Se,"@firebase/performance-compat","fire-perf-compat"),c(Se,"@firebase/remote-config","fire-rc"),c(Se,"@firebase/remote-config-compat","fire-rc-compat"),c(Se,"@firebase/storage","fire-gcs"),c(Se,"@firebase/storage-compat","fire-gcs-compat"),c(Se,"@firebase/firestore","fire-fst"),c(Se,"@firebase/firestore-compat","fire-fst-compat"),c(Se,"fire-js","fire-js"),c(Se,"firebase","fire-js-all"),Se),Fe=new Map,Ve=new Map;function Ue(e,t){try{e.container.addComponent(t)}catch(n){Oe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Be(e,t){e.container.addOrOverwriteComponent(t)}function je(e){var t=e.name;if(Ve.has(t))return Oe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ve.set(t,e);var n,r=p(Fe.values());try{for(r.s();!(n=r.n()).done;){Ue(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ze(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function qe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le;ze(e,t).clearInstance(n)}function Ge(){Ve.clear()}var Ke=(c(Te={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),c(Te,"bad-app-name","Illegal App name: '{$appName}"),c(Te,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),c(Te,"app-deleted","Firebase App named '{$appName}' already deleted"),c(Te,"no-options","Need to provide options, when not being deployed to hosting via source."),c(Te,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),c(Te,"invalid-log-argument","First argument to `onLog` must be null or a function."),c(Te,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),c(Te,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),c(Te,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),c(Te,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Te),He=new j("app","Firebase",Ke),We=function(){function e(t,n,r){var i=this;h(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new te("app",(function(){return i}),"PUBLIC"))}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw He.create("app-deleted",{appName:this._name})}}]),e}(),Qe="9.23.0";function Xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Le,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw He.create("bad-app-name",{appName:String(a)});if(n||(n=O()),!n)throw He.create("no-options");var o=Fe.get(a);if(o){if(K(n,o.options)&&K(i,o.config))return o;throw He.create("duplicate-app",{appName:a})}var u,s=new oe(a),c=p(Ve.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new We(n,i,s);return Fe.set(a,f),f}function Ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=Fe.get(e);if(!t&&e===Le&&O())return Xe();if(!t)throw He.create("no-app",{appName:e});return t}function $e(){return Array.from(Fe.values())}function Je(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=ee($().mark((function e(t){var n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Fe.has(n)){e.next=6;break}return Fe.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,n){var r,i=null!==(r=Me[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Oe.warn(u.join(" "))}je(new te("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function tt(e,t){if(null!==e&&"function"!==typeof e)throw He.create("invalid-log-argument");!function(e,t){var n,r=p(ue);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=se[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ae[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function nt(e){var t;t=e,ue.forEach((function(e){e.setLogLevel(t)}))}var rt="firebase-heartbeat-store",it=null;function at(){return it||(it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=_e(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(_e(u.result),e.oldVersion,e.newVersion,_e(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(rt)}}).catch((function(e){throw He.create("idb-open",{originalErrorMessage:e.message})}))),it}function ot(e){return ut.apply(this,arguments)}function ut(){return ut=ee($().mark((function e(t){var n,r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at();case 3:return n=e.sent,e.next=6,n.transaction(rt).objectStore(rt).get(lt(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof B?Oe.warn(e.t0.message):(i=He.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Oe.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),ut.apply(this,arguments)}function st(e,t){return ct.apply(this,arguments)}function ct(){return ct=ee($().mark((function e(t,n){var r,i,a,o;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at();case 3:return r=e.sent,i=r.transaction(rt,"readwrite"),a=i.objectStore(rt),e.next=8,a.put(n,lt(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof B?Oe.warn(e.t0.message):(o=He.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Oe.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),ct.apply(this,arguments)}function lt(e){return"".concat(e.name,"!").concat(e.options.appId)}var ft=function(){function e(t){var n=this;h(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new mt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return v(e,[{key:"triggerHeartbeat",value:function(){var e=ee($().mark((function e(){var t,n,r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ht(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ee($().mark((function e(){var t,n,r,i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ht(),n=dt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=C(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ht(){return(new Date).toISOString().substring(0,10)}function dt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=p(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),yt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),yt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var vt,pt,mt=function(){function e(t){h(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return v(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ee($().mark((function e(){var t;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ot(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ee($().mark((function e(t){var n,r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",st(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ee($().mark((function e(t){var n,r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",st(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(J(r.heartbeats),J(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function yt(e){return C(JSON.stringify({version:2,heartbeats:e})).length}vt="",je(new te("platform-logger",(function(e){return new Ne(e)}),"PRIVATE")),je(new te("heartbeat",(function(e){return new ft(e)}),"PRIVATE")),et(Pe,Re,vt),et(Pe,Re,"esm2017"),et("fire-js","");var gt=function(){function e(t,n){var r=this;h(this,e),this._delegate=t,this.firebase=n,Ue(t,new te("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Je(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ue(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Be(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),kt=(c(pt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),c(pt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),pt),bt=new j("app-compat","Firebase",kt);var wt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Xe(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(G(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:et,setLogLevel:nt,onLog:tt,apps:null,SDK_VERSION:Qe,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(je(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw bt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&D(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!G(n,e=e||Le))throw bt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(gt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){D(n,e)},createSubscribe:W,ErrorFactory:j,deepExtend:D}),n}(),xt=new he("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){xt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var _t=self.firebase.SDK_VERSION;_t&&_t.indexOf("LITE")>=0&&xt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Et=wt;!function(e){et("@firebase/app-compat","0.2.13",e)}();Et.registerVersion("firebase","9.23.0","app-compat");var St,Tt="firebasestorage.googleapis.com",It="storageBucket",Ct=function(e){g(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return h(this,n),(i=t.call(this,At(e),"Firebase Storage: ".concat(r," (").concat(At(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(m(i),n.prototype),i}return v(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return At(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(B);function At(e){return"storage/"+e}function Dt(){return new Ct(St.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Nt(){return new Ct(St.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Pt(){return new Ct(St.CANCELED,"User canceled the upload/download.")}function Rt(){return new Ct(St.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ot(e){return new Ct(St.INVALID_ARGUMENT,e)}function Lt(){return new Ct(St.APP_DELETED,"The Firebase app was deleted.")}function Mt(e){return new Ct(St.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ft(e,t){return new Ct(St.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Vt(e){throw new Ct(St.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(St||(St={}));var Ut,Bt=function(){function e(t,n){h(this,e),this.bucket=t,this.path_=n}return v(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new Ct(St.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Tt?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Ct(St.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),jt=function(){function e(t){h(this,e),this.promise_=Promise.reject(t)}return v(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function zt(e){return"string"===typeof e||e instanceof String}function qt(e){return Gt()&&e instanceof Blob}function Gt(){return"undefined"!==typeof Blob&&!V()}function Kt(e,t,n,r){if(r<t)throw Ot("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Ot("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Ht(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Wt(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function Qt(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ut||(Ut={}));var Xt=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var d=this,v=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];h(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return v(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=Dt();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?Lt():Pt());else i(Nt())}};this.canceled_?t(0,new Yt(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var v=!1;function p(e){v||(v=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new Yt(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Ut.NO_ERROR,a=r.getStatus();if(!n||Qt(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Ut.ABORT;t(!1,new Yt(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new Yt(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),Yt=v((function e(t,n,r){h(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function $t(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function Jt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function Zt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function en(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function tn(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Wt(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return Zt(c,t),$t(c,n),Jt(c,a),en(c,r),new Xt(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function nn(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function rn(){for(var e=nn(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Gt())return new Blob(n);throw new Ct(St.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function an(e){if("undefined"===typeof atob)throw t="base-64",new Ct(St.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var on={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},un=v((function e(t,n){h(this,e),this.data=t,this.contentType=n||null}));function sn(e,t){switch(e){case on.RAW:return new un(cn(t));case on.BASE64:case on.BASE64URL:return new un(ln(e,t));case on.DATA_URL:return new un(function(e){var t=new fn(e);return t.base64?ln(on.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Ft(on.DATA_URL,"Malformed data URL.")}return cn(t)}(t.rest)}(t),new fn(t).contentType)}throw Dt()}function cn(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function ln(e,t){switch(e){case on.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Ft(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case on.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Ft(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=an(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Ft(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var fn=v((function e(t){h(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Ft(on.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var hn=function(){function e(t,n){h(this,e);var r=0,i="";qt(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return v(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(qt(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Gt()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(rn.apply(null,i))}var a=n.map((function(e){return zt(e)?sn(on.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function dn(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function vn(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function pn(e,t){return t}var mn=v((function e(t,n,r,i){h(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||pn})),yn=null;function gn(){if(yn)return yn;var e=[];e.push(new mn("bucket")),e.push(new mn("generation")),e.push(new mn("metageneration")),e.push(new mn("name","fullPath",!0));var t=new mn("name");t.xform=function(e,t){return function(e){return!zt(e)||e.length<2?e:vn(e)}(t)},e.push(t);var n=new mn("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new mn("timeCreated")),e.push(new mn("updated")),e.push(new mn("md5Hash",null,!0)),e.push(new mn("cacheControl",null,!0)),e.push(new mn("contentDisposition",null,!0)),e.push(new mn("contentEncoding",null,!0)),e.push(new mn("contentLanguage",null,!0)),e.push(new mn("contentType",null,!0)),e.push(new mn("metadata","customMetadata",!0)),yn=e}function kn(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Bt(n,r);return t._makeStorageReference(i)}})}(r,e),r}function bn(e,t,n){var r=dn(t);return null===r?null:kn(e,r,n)}function wn(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var xn="prefixes",_n="items";function En(e,t,n){var r=dn(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[xn]){var i,a=p(n[xn]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new Bt(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[_n]){var s,c=p(n[_n]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new Bt(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var Sn=v((function e(t,n,r,i){h(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Tn(e){if(!e)throw Dt()}function In(e,t){return function(n,r){var i=bn(e,r,t);return Tn(null!==i),i}}function Cn(e,t){return function(n,r){var i=bn(e,r,t);return Tn(null!==i),function(e,t,n,r){var i=dn(t);if(null===i)return null;if(!zt(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Ht("/b/"+o(i)+"/o/"+o(a),n,r)+Wt({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function An(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Ct(St.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Ct(St.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Ct(St.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Ct(St.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Dn(e){var t=An(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Ct(St.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Nn(e,t,n){var r=Ht(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Sn(r,"GET",In(e,n),i);return a.errorHandler=Dn(t),a}function Pn(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Ht(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new Sn(o,"GET",function(e,t){return function(n,r){var i=En(e,t,r);return Tn(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=An(t),s}function Rn(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function On(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=Rn(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wn(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=hn.getBlob(c,r,l);if(null===f)throw Rt();var h={name:s.fullPath},d=Ht(a,e.host,e._protocol),v=e.maxUploadRetryTime,p=new Sn(d,"POST",In(e,n),v);return p.urlParams=h,p.headers=o,p.body=f.uploadData(),p.errorHandler=An(t),p}var Ln=v((function e(t,n,r,i){h(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function Mn(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Tn(!1)}return Tn(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Fn=262144;function Vn(e,t,n,r,i,a,o,u){var s=new Ln(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new Ct(St.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},v=r.slice(f,h);if(null===v)throw Rt();var p=t.maxUploadRetryTime,m=new Sn(n,"POST",(function(e,n){var i,o=Mn(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?In(t,a)(e,n):null,new Ln(u,c,"final"===o,i)}),p);return m.headers=d,m.body=v.uploadData(),m.progressCallback=u||null,m.errorHandler=An(e),m}var Un={STATE_CHANGED:"state_changed"},Bn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function jn(e){switch(e){case"running":case"pausing":case"canceling":return Bn.RUNNING;case"paused":return Bn.PAUSED;case"success":return Bn.SUCCESS;case"canceled":return Bn.CANCELED;default:return Bn.ERROR}}var zn=v((function e(t,n,r){h(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function qn(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Gn=function(){function e(){var t=this;h(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ut.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Ut.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Ut.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return v(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Vt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Vt("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Vt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Vt("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Vt("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Kn=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Gn);function Hn(){return new Kn}var Wn=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=gn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(St.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(Qt(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=Nt()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(St.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return v(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=o(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Rn(t,r,i),u={name:o.fullPath},s=Ht(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=wn(o,n),f=e.maxUploadRetryTime,h=new Sn(s,"POST",(function(e){var t;Mn(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Tn(!1)}return Tn(zt(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=An(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Hn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Sn(n,"POST",(function(e){var t=Mn(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Tn(!1)}n||Tn(!1);var i=Number(n);return Tn(!isNaN(i)),new Ln(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=An(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Hn,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Fn*this._chunkMultiplier,n=new Ln(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Vn(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Hn,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(Fn*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Nn(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Hn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=On(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Hn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Pt(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=jn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new zn(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(jn(this._state)){case Bn.SUCCESS:qn(this._resolve.bind(null,this.snapshot))();break;case Bn.CANCELED:case Bn.ERROR:qn(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(jn(this._state)){case Bn.RUNNING:case Bn.PAUSED:e.next&&qn(e.next.bind(e,this.snapshot))();break;case Bn.SUCCESS:e.complete&&qn(e.complete.bind(e))();break;default:e.error&&qn(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Qn=function(){function e(t,n){h(this,e),this._service=t,this._location=n instanceof Bt?n:Bt.makeFromUrl(n,t.host)}return v(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Bt(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return vn(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Bt(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Mt(e)}}]),e}();function Xn(e,t,n){return Yn.apply(this,arguments)}function Yn(){return(Yn=ee($().mark((function e(t,n,r){var i,a,o,u;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,$n(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,J(u.prefixes)),(a=n.items).push.apply(a,J(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,Xn(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e,t){null!=t&&"number"===typeof t.maxResults&&Kt("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Pn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Hn)}function Jn(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Ht(t.fullServerUrl(),e.host,e._protocol),a=wn(n,r),o=e.maxOperationRetryTime,u=new Sn(i,"PATCH",In(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=Dn(t),u}(e.storage,e._location,t,gn());return e.storage.makeRequestWithTokens(n,Hn)}function Zn(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Ht(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Sn(r,"GET",Cn(e,n),i);return a.errorHandler=Dn(t),a}(e.storage,e._location,gn());return e.storage.makeRequestWithTokens(t,Hn).then((function(e){if(null===e)throw new Ct(St.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function er(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Ht(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Sn(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Dn(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Hn)}function tr(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Bt(e._location.bucket,n);return new Qn(e.storage,r)}function nr(e,t){if(e instanceof or){var n=e;if(null==n._bucket)throw new Ct(St.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+It+"' property when initializing the app?");var r=new Qn(n,n._bucket);return null!=t?nr(r,t):r}return void 0!==t?tr(e,t):e}function rr(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof or)return new Qn(e,t);throw Ot("To use ref(service, url), the first argument must be a Storage instance.")}return nr(e,t)}function ir(e,t){var n=null===t||void 0===t?void 0:t[It];return null==n?null:Bt.makeFromBucketSpec(n,e)}function ar(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:M(i,e.app.options.projectId))}var or=function(){function e(t,n,r,i,a){h(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Tt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bt.makeFromBucketSpec(i,this._host):ir(this._host,this.app.options)}return v(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Bt.makeFromBucketSpec(this._url,e):this._bucket=ir(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Kt("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Kt("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ee($().mark((function e(){var t,n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ee($().mark((function e(){var t,n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Qn(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new jt(Lt());var o=tn(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=ee($().mark((function e(t,n){var r,i,a,u;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=o(r,2),a=i[0],u=i[1],e.abrupt("return",this._makeRequest(t,n,a,u).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ur="@firebase/storage",sr="0.11.2",cr="storage";function lr(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Wn(e,new hn(t),n)}(e=Y(e),t,n)}function fr(e){return function(e){e._throwIfRoot("getMetadata");var t=Nn(e.storage,e._location,gn());return e.storage.makeRequestWithTokens(t,Hn)}(e=Y(e))}function hr(e){return function(e){var t={prefixes:[],items:[]};return Xn(e,t).then((function(){return t}))}(e=Y(e))}function dr(e,t){return rr(e=Y(e),t)}function vr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};ar(e,t,n,r)}function pr(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new or(r,i,a,n,Qe)}je(new te(cr,pr,"PUBLIC").setMultipleInstances(!0)),et(ur,sr,""),et(ur,sr,"esm2017");var mr=function(){function e(t,n,r){h(this,e),this._delegate=t,this.task=n,this.ref=r}return v(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),yr=function(){function e(t,n){h(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return v(e,[{key:"snapshot",get:function(){return new mr(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new mr(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new mr(e,i,i._ref))}:{next:t.next?function(e){return t.next(new mr(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),gr=function(){function e(t,n){h(this,e),this._delegate=t,this._service=n}return v(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new kr(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new kr(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),kr=function(){function e(t,n){h(this,e),this._delegate=t,this.storage=n}return v(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return tr(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new yr(lr(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=sn(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new yr(new Wn(this._delegate,new hn(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return hr(this._delegate).then((function(t){return new gr(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return $n(e=Y(e),t)}(this._delegate,e||void 0).then((function(e){return new gr(e,t.storage)}))}},{key:"getMetadata",value:function(){return fr(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Jn(e=Y(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return Zn(Y(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),er(Y(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Mt(e)}}]),e}(),br=function(){function e(t,n){h(this,e),this.app=t,this._delegate=n}return v(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(wr(e))throw Ot("ref() expected a child path but got a URL, use refFromURL instead.");return new kr(dr(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!wr(e))throw Ot("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bt.makeFromUrl(e,this._delegate.host)}catch(t){throw Ot("refFromUrl() expected a valid full URL but got an invalid one.")}return new kr(dr(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vr(this._delegate,e,t,n)}}]),e}();function wr(e){return/^[A-Za-z]+:\/\//.test(e)}function xr(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new br(r,i)}function _r(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function Er(){return Er="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_r(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Er.apply(this,arguments)}!function(e){var t={TaskState:Bn,TaskEvent:Un,StringFormat:on,Storage:br,Reference:kr};e.INTERNAL.registerComponent(new te("storage-compat",xr,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(Et);var Sr,Tr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ir={},Cr=Cr||{},Ar=Tr||self;function Dr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Nr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Pr="closure_uid_"+(1e9*Math.random()>>>0),Rr=0;function Or(e,t,n){return e.call.apply(e.bind,arguments)}function Lr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Mr(e,t,n){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Or:Lr).apply(null,arguments)}function Fr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Vr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ur(){this.s=this.s,this.o=this.o}Ur.prototype.s=!1,Ur.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Pr)&&e[Pr]||(e[Pr]=++Rr))},Ur.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Br=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function jr(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function zr(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Dr(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function qr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}qr.prototype.h=function(){this.defaultPrevented=!0};var Gr=function(){if(!Ar.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ar.addEventListener("test",(function(){}),t),Ar.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Kr(e){return/^[\s\xa0]*$/.test(e)}function Hr(){var e=Ar.navigator;return e&&(e=e.userAgent)?e:""}function Wr(e){return-1!=Hr().indexOf(e)}function Qr(e){return Qr[" "](e),e}Qr[" "]=function(){};var Xr,Yr,$r=Wr("Opera"),Jr=Wr("Trident")||Wr("MSIE"),Zr=Wr("Edge"),ei=Zr||Jr,ti=Wr("Gecko")&&!(-1!=Hr().toLowerCase().indexOf("webkit")&&!Wr("Edge"))&&!(Wr("Trident")||Wr("MSIE"))&&!Wr("Edge"),ni=-1!=Hr().toLowerCase().indexOf("webkit")&&!Wr("Edge");function ri(){var e=Ar.document;return e?e.documentMode:void 0}e:{var ii="",ai=function(){var e=Hr();return ti?/rv:([^\);]+)(\)|;)/.exec(e):Zr?/Edge\/([\d\.]+)/.exec(e):Jr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ni?/WebKit\/(\S+)/.exec(e):$r?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ai&&(ii=ai?ai[1]:""),Jr){var oi=ri();if(null!=oi&&oi>parseFloat(ii)){Xr=String(oi);break e}}Xr=ii}if(Ar.document&&Jr){var ui=ri();Yr=ui||(parseInt(Xr,10)||void 0)}else Yr=void 0;var si=Yr;function ci(e,t){if(qr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ti){e:{try{Qr(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:li[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ci.$.h.call(this)}}Vr(ci,qr);var li={2:"touch",3:"pen",4:"mouse"};ci.prototype.h=function(){ci.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var fi="closure_listenable_"+(1e6*Math.random()|0),hi=0;function di(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++hi,this.fa=this.ia=!1}function vi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function pi(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function mi(e){var t={};for(var n in e)t[n]=e[n];return t}var yi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gi(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<yi.length;a++)n=yi[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ki(e){this.src=e,this.g={},this.h=0}function bi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Br(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(vi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function wi(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}ki.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=wi(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new di(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var xi="closure_lm_"+(1e6*Math.random()|0),_i={};function Ei(e,t,n,r,i){if(r&&r.once)return Ti(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ei(e,t[a],n,r,i);return null}return n=Ri(n),e&&e[fi]?e.O(t,n,Nr(r)?!!r.capture:!!r,i):Si(e,t,n,!1,r,i)}function Si(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Nr(i)?!!i.capture:!!i,u=Ni(e);if(u||(e[xi]=u=new ki(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Di;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Gr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ai(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ti(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ti(e,t[a],n,r,i);return null}return n=Ri(n),e&&e[fi]?e.P(t,n,Nr(r)?!!r.capture:!!r,i):Si(e,t,n,!0,r,i)}function Ii(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ii(e,t[a],n,r,i);else r=Nr(r)?!!r.capture:!!r,n=Ri(n),e&&e[fi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=wi(a=e.g[t],n,r,i))&&(vi(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ni(e))&&(t=e.g[t.toString()],e=-1,t&&(e=wi(t,n,r,i)),(n=-1<e?t[e]:null)&&Ci(n))}function Ci(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[fi])bi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ai(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ni(t))?(bi(n,e),0==n.h&&(n.src=null,t[xi]=null)):vi(e)}}}function Ai(e){return e in _i?_i[e]:_i[e]="on"+e}function Di(e,t){if(e.fa)e=!0;else{t=new ci(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ci(e),e=n.call(r,t)}return e}function Ni(e){return(e=e[xi])instanceof ki?e:null}var Pi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ri(e){return"function"===typeof e?e:(e[Pi]||(e[Pi]=function(t){return e.handleEvent(t)}),e[Pi])}function Oi(){Ur.call(this),this.i=new ki(this),this.S=this,this.J=null}function Li(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new qr(t,e);else if(t instanceof qr)t.target=t.target||e;else{var i=t;gi(t=new qr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Mi(o,r,!0,t)&&i}if(i=Mi(o=t.g=e,r,!0,t)&&i,i=Mi(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Mi(o=t.g=n[a],r,!1,t)&&i}function Mi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&bi(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Vr(Oi,Ur),Oi.prototype[fi]=!0,Oi.prototype.removeEventListener=function(e,t,n,r){Ii(this,e,t,n,r)},Oi.prototype.N=function(){if(Oi.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)vi(n[r]);delete t.g[e],t.h--}}this.J=null},Oi.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Oi.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Fi=Ar.JSON.stringify,Vi=function(){function e(t,n){h(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return v(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Ui(){var e=Wi,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Bi=function(){function e(){h(this,e),this.h=this.g=null}return v(e,[{key:"add",value:function(e,t){var n=ji.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ji=new Vi((function(){return new zi}),(function(e){return e.reset()})),zi=function(){function e(){h(this,e),this.next=this.g=this.h=null}return v(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function qi(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Gi(e){Ar.setTimeout((function(){throw e}),0)}var Ki,Hi=!1,Wi=new Bi,Qi=function(){var e=Ar.Promise.resolve(void 0);Ki=function(){e.then(Xi)}},Xi=function(){for(var e;e=Ui();){try{e.h.call(e.g)}catch(n){Gi(n)}var t=ji;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hi=!1};function Yi(e,t){Oi.call(this),this.h=e||1,this.g=t||Ar,this.j=Mr(this.qb,this),this.l=Date.now()}function $i(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ji(e,t,n){if("function"===typeof e)n&&(e=Mr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Mr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ar.setTimeout(e,t||0)}function Zi(e){e.g=Ji((function(){e.g=null,e.i&&(e.i=!1,Zi(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Vr(Yi,Oi),(Sr=Yi.prototype).ga=!1,Sr.T=null,Sr.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Li(this,"tick"),this.ga&&($i(this),this.start()))}},Sr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Sr.N=function(){Yi.$.N.call(this),$i(this),delete this.g};var ea=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return v(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Zi(this)}},{key:"N",value:function(){Er(k(n.prototype),"N",this).call(this),this.g&&(Ar.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ur);function ta(e){Ur.call(this),this.h=e,this.g={}}Vr(ta,Ur);var na=[];function ra(e,t,n,r){Array.isArray(n)||(n&&(na[0]=n.toString()),n=na);for(var i=0;i<n.length;i++){var a=Ei(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ia(e){pi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ci(e)}),e),e.g={}}function aa(){this.g=!0}function oa(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Fi(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ta.prototype.N=function(){ta.$.N.call(this),ia(this)},ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},aa.prototype.Ea=function(){this.g=!1},aa.prototype.info=function(){};var ua={},sa=null;function ca(){return sa=sa||new Oi}function la(e){qr.call(this,ua.Ta,e)}function fa(e){var t=ca();Li(t,new la(t))}function ha(e,t){qr.call(this,ua.STAT_EVENT,e),this.stat=t}function da(e){var t=ca();Li(t,new ha(t,e))}function va(e,t){qr.call(this,ua.Ua,e),this.size=t}function pa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ar.setTimeout((function(){e()}),t)}ua.Ta="serverreachability",Vr(la,qr),ua.STAT_EVENT="statevent",Vr(ha,qr),ua.Ua="timingevent",Vr(va,qr);var ma={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ya={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ga(){}function ka(e){return e.h||(e.h=e.i())}function ba(){}ga.prototype.h=null;var wa,xa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _a(){qr.call(this,"d")}function Ea(){qr.call(this,"c")}function Sa(){}function Ta(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ta(this),this.P=Ca,e=ei?125:void 0,this.V=new Yi(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ia}function Ia(){this.i=null,this.g="",this.h=!1}Vr(_a,qr),Vr(Ea,qr),Vr(Sa,ga),Sa.prototype.g=function(){return new XMLHttpRequest},Sa.prototype.i=function(){return{}},wa=new Sa;var Ca=45e3,Aa={},Da={};function Na(e,t,n){e.L=1,e.v=Ya(Ka(t)),e.s=n,e.S=!0,Pa(e,null)}function Pa(e,t){e.G=Date.now(),Ma(e),e.A=Ka(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),co(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Ia,e.g=fu(e.l,n?t:null,!e.s),0<e.O&&(e.M=new ea(Mr(e.Pa,e,e.g),e.O)),ra(e.U,e.g,"readystatechange",e.nb),t=e.I?mi(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),fa(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ra(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Oa(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=La(e,n))==Da){4==t&&(e.o=4,da(14),i=!1),oa(e.j,e.m,null,"[Incomplete Response]");break}if(r==Aa){e.o=4,da(15),oa(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}oa(e.j,e.m,r,null),ja(e,r)}Ra(e)&&r!=Da&&r!=Aa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,da(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ru(t),t.M=!0,da(11))):(oa(e.j,e.m,n,"[Invalid Chunked Response]"),Ba(e),Ua(e))}function La(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Da:(n=Number(t.substring(n,r)),isNaN(n)?Aa:(r+=1)+n>t.length?Da:(t=t.slice(r,r+n),e.C=r+n,t))}function Ma(e){e.Y=Date.now()+e.P,Fa(e,e.P)}function Fa(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=pa(Mr(e.lb,e),t)}function Va(e){e.B&&(Ar.clearTimeout(e.B),e.B=null)}function Ua(e){0==e.l.H||e.J||ou(e.l,e)}function Ba(e){Va(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,$i(e.V),ia(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ja(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||yo(n.i,e)))if(!e.K&&yo(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;au(n),Xo(n)}nu(n),da(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=pa(Mr(n.ib,n),6e3));if(1>=mo(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else su(n,11)}else if((e.K||n.g==e)&&au(n),!Kr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(go(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Xa(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=lu(r,r.J?r.pa:null,r.Y),d.K){ko(r.i,d);var v=d,p=r.L;p&&v.setTimeout(p),v.B&&(Va(v),Ma(v)),r.g=d}else tu(r);0<n.j.length&&$o(n)}else"stop"!=a[0]&&"close"!=a[0]||su(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?su(n,7):Qo(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}fa()}catch(a){}}function za(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Dr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Dr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Dr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Sr=Ta.prototype).setTimeout=function(e){this.P=e},Sr.nb=function(e){e=e.target;var t=this.M;t&&3==zo(e)?t.l():this.Pa(e)},Sr.Pa=function(e){try{if(e==this.g)e:{var t=zo(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||ei||this.g&&(this.h.h||this.g.ja()||qo(this.g)))){this.J||4!=t||7==n||fa(),Va(this);var r=this.g.da();this.ca=r;t:if(Ra(this)){var i=qo(this.g);e="";var a=i.length,o=4==zo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ba(this),Ua(this);var u="";break t}this.h.i=new Ar.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kr(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,da(12),Ba(this),Ua(this);break e}oa(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ja(this,r)}this.S?(Oa(this,t,u),ei&&this.i&&3==t&&(ra(this.U,this.V,"tick",this.mb),this.V.start())):(oa(this.j,this.m,u,null),ja(this,u)),4==t&&Ba(this),this.i&&!this.J&&(4==t?ou(this.l,this):(this.i=!1,Ma(this)))}else(function(e){var t={};e=(e.g&&2<=zo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Kr(e[n])){var r=qi(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,da(12)):(this.o=0,da(13)),Ba(this),Ua(this)}}}catch(t){}},Sr.mb=function(){if(this.g){var e=zo(this.g),t=this.g.ja();this.C<t.length&&(Va(this),Oa(this,e,t),this.i&&4!=e&&Ma(this))}},Sr.cancel=function(){this.J=!0,Ba(this)},Sr.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(fa(),da(17)),Ba(this),this.o=2,Ua(this)):Fa(this,this.Y-e)};var qa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ga(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ga){this.h=e.h,Ha(this,e.j),this.s=e.s,this.g=e.g,Wa(this,e.m),this.l=e.l;var t=e.i,n=new ao;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Qa(this,n),this.o=e.o}else e&&(t=String(e).match(qa))?(this.h=!1,Ha(this,t[1]||"",!0),this.s=$a(t[2]||""),this.g=$a(t[3]||"",!0),Wa(this,t[4]),this.l=$a(t[5]||"",!0),Qa(this,t[6]||"",!0),this.o=$a(t[7]||"")):(this.h=!1,this.i=new ao(null,this.h))}function Ka(e){return new Ga(e)}function Ha(e,t,n){e.j=n?$a(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Wa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Qa(e,t,n){t instanceof ao?(e.i=t,function(e,t){t&&!e.j&&(oo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(uo(this,t),co(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ja(t,ro)),e.i=new ao(t,e.h))}function Xa(e,t,n){e.i.set(t,n)}function Ya(e){return Xa(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function $a(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ja(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Za),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Za(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ga.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ja(t,eo,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ja(t,eo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ja(n,"/"==n.charAt(0)?no:to,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ja(n,io)),e.join("")};var eo=/[#\/\?@]/g,to=/[#\?:]/g,no=/[#\?]/g,ro=/[#\?@]/g,io=/#/g;function ao(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function oo(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function uo(e,t){oo(e),t=lo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function so(e,t){return oo(e),t=lo(e,t),e.g.has(t)}function co(e,t,n){uo(e,t),0<n.length&&(e.i=null,e.g.set(lo(e,t),jr(n)),e.h+=n.length)}function lo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Sr=ao.prototype).add=function(e,t){oo(this),this.i=null,e=lo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Sr.forEach=function(e,t){oo(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Sr.ta=function(){oo(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Sr.Z=function(e){oo(this);var t=[];if("string"===typeof e)so(this,e)&&(t=t.concat(this.g.get(lo(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Sr.set=function(e,t){return oo(this),this.i=null,so(this,e=lo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Sr.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Sr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var fo=v((function e(t,n){h(this,e),this.g=t,this.map=n}));function ho(e){this.l=e||vo,Ar.PerformanceNavigationTiming?e=0<(e=Ar.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ar.g&&Ar.g.Ka&&Ar.g.Ka()&&Ar.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vo=10;function po(e){return!!e.h||!!e.g&&e.g.size>=e.j}function mo(e){return e.h?1:e.g?e.g.size:0}function yo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function go(e,t){e.g?e.g.add(t):e.h=t}function ko(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function bo(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=p(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return jr(e.i)}ho.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=p(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var wo,xo=function(){function e(){h(this,e)}return v(e,[{key:"stringify",value:function(e){return Ar.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Ar.JSON.parse(e,void 0)}}]),e}();function _o(){this.g=new xo}function Eo(e,t,n){var r=n||"";try{za(e,(function(e,n){var i=e;Nr(e)&&(i=Fi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function So(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function To(e){this.l=e.fc||null,this.j=e.ob||!1}function Io(e,t){Oi.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Co,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vr(To,ga),To.prototype.g=function(){return new Io(this.l,this.j)},To.prototype.i=(wo={},function(){return wo}),Vr(Io,Oi);var Co=0;function Ao(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Do(e){e.readyState=4,e.l=null,e.j=null,e.A=null,No(e)}function No(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Sr=Io.prototype).open=function(e,t){if(this.readyState!=Co)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,No(this)},Sr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ar).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Sr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Do(this)),this.readyState=Co},Sr.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,No(this)),this.g&&(this.readyState=3,No(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Ar.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ao(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Sr.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Do(this):No(this),3==this.readyState&&Ao(this)}},Sr.Za=function(e){this.g&&(this.response=this.responseText=e,Do(this))},Sr.Ya=function(e){this.g&&(this.response=e,Do(this))},Sr.ka=function(){this.g&&Do(this)},Sr.setRequestHeader=function(e,t){this.v.append(e,t)},Sr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Sr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Io.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Po=Ar.JSON.parse;function Ro(e){Oi.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Oo,this.L=this.M=!1}Vr(Ro,Oi);var Oo="",Lo=/^https?$/i,Mo=["POST","PUT"];function Fo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Vo(e),Bo(e)}function Vo(e){e.F||(e.F=!0,Li(e,"complete"),Li(e,"error"))}function Uo(e){if(e.h&&"undefined"!=typeof Cr&&(!e.C[1]||4!=zo(e)||2!=e.da()))if(e.v&&4==zo(e))Ji(e.La,0,e);else if(Li(e,"readystatechange"),4==zo(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(qa)[1]||null;!a&&Ar.self&&Ar.self.location&&(a=Ar.self.location.protocol.slice(0,-1)),i=!Lo.test(a?a.toLowerCase():"")}t=i}if(t)Li(e,"complete"),Li(e,"success");else{e.m=6;try{var o=2<zo(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Vo(e)}}finally{Bo(e)}}}function Bo(e,t){if(e.g){jo(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Li(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function jo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ar.clearTimeout(e.A),e.A=null)}function zo(e){return e.g?e.g.readyState:0}function qo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Oo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Qu){return null}}function Go(e){var t="";return pi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ko(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Go(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Xa(e,t,n))}function Ho(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wo(e){this.Ga=0,this.j=[],this.l=new aa,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ho("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ho("baseRetryDelayMs",5e3,e),this.hb=Ho("retryDelaySeedMs",1e4,e),this.eb=Ho("forwardChannelMaxRetries",2,e),this.xa=Ho("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ho(e&&e.concurrentRequestLimit),this.Ja=new _o,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Qo(e){if(Yo(e),3==e.H){var t=e.W++,n=Ka(e.I);if(Xa(n,"SID",e.K),Xa(n,"RID",t),Xa(n,"TYPE","terminate"),Zo(e,n),(t=new Ta(e,e.l,t)).L=2,t.v=Ya(Ka(n)),n=!1,Ar.navigator&&Ar.navigator.sendBeacon)try{n=Ar.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Ar.Image&&((new Image).src=t.v,n=!0),n||(t.g=fu(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Ma(t)}cu(e)}function Xo(e){e.g&&(ru(e),e.g.cancel(),e.g=null)}function Yo(e){Xo(e),e.u&&(Ar.clearTimeout(e.u),e.u=null),au(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ar.clearTimeout(e.m),e.m=null)}function $o(e){if(!po(e.i)&&!e.m){e.m=!0;var t=e.Na;Ki||Qi(),Hi||(Ki(),Hi=!0),Wi.add(t,e),e.C=0}}function Jo(e,t){var n;n=t?t.m:e.W++;var r=Ka(e.I);Xa(r,"SID",e.K),Xa(r,"RID",n),Xa(r,"AID",e.V),Zo(e,r),e.o&&e.s&&Ko(r,e.o,e.s),n=new Ta(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=eu(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),go(e.i,n),Na(n,r,t)}function Zo(e,t){e.na&&pi(e.na,(function(e,n){Xa(t,n,e)})),e.h&&za({},(function(e,n){Xa(t,n,e)}))}function eu(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Mr(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Eo(l,o,"req"+c+"_")}catch(as){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function tu(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ki||Qi(),Hi||(Ki(),Hi=!0),Wi.add(t,e),e.A=0}}function nu(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=pa(Mr(e.Ma,e),uu(e,e.A)),e.A++,!0)}function ru(e){null!=e.B&&(Ar.clearTimeout(e.B),e.B=null)}function iu(e){e.g=new Ta(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ka(e.wa);Xa(t,"RID","rpc"),Xa(t,"SID",e.K),Xa(t,"AID",e.V),Xa(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Xa(t,"TO",e.qa),Xa(t,"TYPE","xmlhttp"),Zo(e,t),e.o&&e.s&&Ko(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Ya(Ka(t)),n.s=null,n.S=!0,Pa(n,e)}function au(e){null!=e.v&&(Ar.clearTimeout(e.v),e.v=null)}function ou(e,t){var n=null;if(e.g==t){au(e),ru(e),e.g=null;var r=2}else{if(!yo(e.i,t))return;n=t.F,ko(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Li(r=ca(),new va(r,n)),$o(e)}else tu(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(mo(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=pa(Mr(e.Na,e,t),uu(e,e.C)),e.C++,!0))}(e,t)||2==r&&nu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:su(e,5);break;case 4:su(e,10);break;case 3:su(e,6);break;default:su(e,2)}}function uu(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function su(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Mr(e.pb,e);n||(n=new Ga("//www.google.com/images/cleardot.gif"),Ar.location&&"http"==Ar.location.protocol||Ha(n,"https"),Ya(n)),function(e,t){var n=new aa;if(Ar.Image){var r=new Image;r.onload=Fr(So,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Fr(So,n,r,"TestLoadImage: error",!1,t),r.onabort=Fr(So,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Fr(So,n,r,"TestLoadImage: timeout",!1,t),Ar.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else da(2);e.H=0,e.h&&e.h.za(t),cu(e),Yo(e)}function cu(e){if(e.H=0,e.ma=[],e.h){var t=bo(e.i);0==t.length&&0==e.j.length||(zr(e.ma,t),zr(e.ma,e.j),e.i.i.length=0,jr(e.j),e.j.length=0),e.h.ya()}}function lu(e,t,n){var r=n instanceof Ga?Ka(n):new Ga(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Wa(r,r.m);else{var i=Ar.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Ga(null);r&&Ha(a,r),t&&(a.g=t),i&&Wa(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Xa(r,n,t),Xa(r,"VER",e.ra),Zo(e,r),r}function fu(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Ro(new To({ob:!0})):new Ro(e.va)).Oa(e.J),t}function hu(){}function du(){if(Jr&&!(10<=Number(si)))throw Error("Environmental error: no available transport.")}function vu(e,t){Oi.call(this),this.g=new Wo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Kr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yu(this)}function pu(e){_a.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mu(){Ea.call(this),this.status=1}function yu(e){this.g=e}function gu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ku(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function bu(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Sr=Ro.prototype).Oa=function(e){this.M=e},Sr.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wa.g(),this.C=this.u?ka(this.u):ka(wa),this.g.onreadystatechange=Mr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Fo(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,u=p(r.keys());try{for(u.s();!(a=u.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(v){u.e(v)}finally{u.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Ar.FormData&&e instanceof Ar.FormData,!(0<=Br(Mo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=p(n);try{for(l.s();!(c=l.n()).done;){var f=o(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(v){l.e(v)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jo(this),0<this.B&&((this.L=function(e){return Jr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.ua,this)):this.A=Ji(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Fo(this,s)}},Sr.ua=function(){"undefined"!=typeof Cr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Li(this,"timeout"),this.abort(8))},Sr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Li(this,"complete"),Li(this,"abort"),Bo(this))},Sr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bo(this,!0)),Ro.$.N.call(this)},Sr.La=function(){this.s||(this.G||this.v||this.l?Uo(this):this.kb())},Sr.kb=function(){Uo(this)},Sr.isActive=function(){return!!this.g},Sr.da=function(){try{return 2<zo(this)?this.g.status:-1}catch(wo){return-1}},Sr.ja=function(){try{return this.g?this.g.responseText:""}catch(wo){return""}},Sr.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Po(t)}},Sr.Ia=function(){return this.m},Sr.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Sr=Wo.prototype).ra=8,Sr.H=1,Sr.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Ta(this,this.l,e),n=this.s;if(this.U&&(n?gi(n=mi(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=eu(this,t,r),Xa(i=Ka(this.I),"RID",e),Xa(i,"CVER",22),this.F&&Xa(i,"X-HTTP-Session-Id",this.F),Zo(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Go(n)))+"&"+r:this.o&&Ko(i,this.o,n)),go(this.i,t),this.bb&&Xa(i,"TYPE","init"),this.P?(Xa(i,"$req",r),Xa(i,"SID","null"),t.aa=!0,Na(t,i,null)):Na(t,i,r),this.H=2}}else 3==this.H&&(e?Jo(this,e):0==this.j.length||po(this.i)||Jo(this))},Sr.Ma=function(){if(this.u=null,iu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=pa(Mr(this.jb,this),e)}},Sr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,da(10),Xo(this),iu(this))},Sr.ib=function(){null!=this.v&&(this.v=null,Xo(this),nu(this),da(19))},Sr.pb=function(e){e?(this.l.info("Successfully pinged google.com"),da(2)):(this.l.info("Failed to ping google.com"),da(1))},Sr.isActive=function(){return!!this.h&&this.h.isActive(this)},(Sr=hu.prototype).Ba=function(){},Sr.Aa=function(){},Sr.za=function(){},Sr.ya=function(){},Sr.isActive=function(){return!0},Sr.Va=function(){},du.prototype.g=function(e,t){return new vu(e,t)},Vr(vu,Oi),vu.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;da(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=lu(e,null,e.Y),$o(e)},vu.prototype.close=function(){Qo(this.g)},vu.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Fi(e),e=n);t.j.push(new fo(t.fb++,e)),3==t.H&&$o(t)},vu.prototype.N=function(){this.g.h=null,delete this.j,Qo(this.g),delete this.g,vu.$.N.call(this)},Vr(pu,_a),Vr(mu,Ea),Vr(yu,hu),yu.prototype.Ba=function(){Li(this.g,"a")},yu.prototype.Aa=function(e){Li(this.g,new pu(e))},yu.prototype.za=function(e){Li(this.g,new mu)},yu.prototype.ya=function(){Li(this.g,"b")},Vr(gu,(function(){this.blockSize=-1})),gu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},gu.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)ku(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){ku(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){ku(this,r),i=0;break}}this.h=i,this.i+=t},gu.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var wu={};function xu(e){return-128<=e&&128>e?function(e,t){var n=wu;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new bu([0|e],0>e?-1:0)})):new bu([0|e],0>e?-1:0)}function _u(e){if(isNaN(e)||!isFinite(e))return Su;if(0>e)return Du(_u(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Eu;return new bu(t,0)}var Eu=4294967296,Su=xu(0),Tu=xu(1),Iu=xu(16777216);function Cu(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Au(e){return-1==e.h}function Du(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new bu(n,~e.h).add(Tu)}function Nu(e,t){return e.add(Du(t))}function Pu(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ru(e,t){this.g=e,this.h=t}function Ou(e,t){if(Cu(t))throw Error("division by zero");if(Cu(e))return new Ru(Su,Su);if(Au(e))return t=Ou(Du(e),t),new Ru(Du(t.g),Du(t.h));if(Au(t))return t=Ou(e,Du(t)),new Ru(Du(t.g),t.h);if(30<e.g.length){if(Au(e)||Au(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Tu,r=t;0>=r.X(e);)n=Lu(n),r=Lu(r);var i=Mu(n,1),a=Mu(r,1);for(r=Mu(r,2),n=Mu(n,2);!Cu(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Mu(r,1),n=Mu(n,1)}return t=Nu(e,i.R(t)),new Ru(i,t)}for(i=Su;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=_u(n)).R(t);Au(o)||0<o.X(e);)o=(a=_u(n-=r)).R(t);Cu(a)&&(a=Tu),i=i.add(a),e=Nu(e,o)}return new Ru(i,e)}function Lu(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new bu(n,e.h)}function Mu(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new bu(i,e.h)}(Sr=bu.prototype).ea=function(){if(Au(this))return-Du(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Eu+r)*t,t*=Eu}return e},Sr.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Cu(this))return"0";if(Au(this))return"-"+Du(this).toString(e);for(var t=_u(Math.pow(e,6)),n=this,r="";;){var i=Ou(n,t).g,a=((0<(n=Nu(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Cu(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Sr.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Sr.X=function(e){return Au(e=Nu(this,e))?-1:Cu(e)?0:1},Sr.abs=function(){return Au(this)?Du(this):this},Sr.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new bu(n,-2147483648&n[n.length-1]?-1:0)},Sr.R=function(e){if(Cu(this)||Cu(e))return Su;if(Au(this))return Au(e)?Du(this).R(Du(e)):Du(Du(this).R(e));if(Au(e))return Du(this.R(Du(e)));if(0>this.X(Iu)&&0>e.X(Iu))return _u(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Pu(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Pu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Pu(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Pu(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new bu(n,0)},Sr.gb=function(e){return Ou(this,e).h},Sr.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new bu(n,this.h&e.h)},Sr.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new bu(n,this.h|e.h)},Sr.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new bu(n,this.h^e.h)},du.prototype.createWebChannel=du.prototype.g,vu.prototype.send=vu.prototype.u,vu.prototype.open=vu.prototype.m,vu.prototype.close=vu.prototype.close,ma.NO_ERROR=0,ma.TIMEOUT=8,ma.HTTP_ERROR=6,ya.COMPLETE="complete",ba.EventType=xa,xa.OPEN="a",xa.CLOSE="b",xa.ERROR="c",xa.MESSAGE="d",Oi.prototype.listen=Oi.prototype.O,Ro.prototype.listenOnce=Ro.prototype.P,Ro.prototype.getLastError=Ro.prototype.Sa,Ro.prototype.getLastErrorCode=Ro.prototype.Ia,Ro.prototype.getStatus=Ro.prototype.da,Ro.prototype.getResponseJson=Ro.prototype.Wa,Ro.prototype.getResponseText=Ro.prototype.ja,Ro.prototype.send=Ro.prototype.ha,Ro.prototype.setWithCredentials=Ro.prototype.Oa,gu.prototype.digest=gu.prototype.l,gu.prototype.reset=gu.prototype.reset,gu.prototype.update=gu.prototype.j,bu.prototype.add=bu.prototype.add,bu.prototype.multiply=bu.prototype.R,bu.prototype.modulo=bu.prototype.gb,bu.prototype.compare=bu.prototype.X,bu.prototype.toNumber=bu.prototype.ea,bu.prototype.toString=bu.prototype.toString,bu.prototype.getBits=bu.prototype.D,bu.fromNumber=_u,bu.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Du(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=_u(Math.pow(n,8)),i=Su,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=_u(Math.pow(n,o)),i=i.R(o).add(_u(u))):i=(i=i.R(r)).add(_u(u))}return i};var Fu=Ir.createWebChannelTransport=function(){return new du},Vu=Ir.getStatEventTarget=function(){return ca()},Uu=Ir.ErrorCode=ma,Bu=Ir.EventType=ya,ju=Ir.Event=ua,zu=Ir.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},qu=Ir.FetchXmlHttpFactory=To,Gu=Ir.WebChannel=ba,Ku=Ir.XhrIo=Ro,Hu=Ir.Md5=gu,Wu=Ir.Integer=bu,Qu="@firebase/firestore",Xu=function(){function e(t){h(this,e),this.uid=t}return v(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Xu.UNAUTHENTICATED=new Xu(null),Xu.GOOGLE_CREDENTIALS=new Xu("google-credentials-uid"),Xu.FIRST_PARTY=new Xu("first-party-uid"),Xu.MOCK_USER=new Xu("mock-user");var Yu="9.23.0",$u=new he("@firebase/firestore");function Ju(){return $u.logLevel}function Zu(e){if($u.logLevel<=ae.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ns);$u.debug.apply($u,["Firestore (".concat(Yu,"): ").concat(e)].concat(J(i)))}}function es(e){if($u.logLevel<=ae.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ns);$u.error.apply($u,["Firestore (".concat(Yu,"): ").concat(e)].concat(J(i)))}}function ts(e){if($u.logLevel<=ae.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ns);$u.warn.apply($u,["Firestore (".concat(Yu,"): ").concat(e)].concat(J(i)))}}function ns(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Yu,") INTERNAL ASSERTION FAILED: ")+e;throw es(t),new Error(t)}function is(e,t){e||rs()}function as(e,t){return e}var os={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},us=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return v(n)}(B),ss=v((function e(){var t=this;h(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),cs=v((function e(t,n){h(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ls=function(){function e(){h(this,e)}return v(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),fs=function(){function e(t){h(this,e),this.token=t,this.changeListener=null}return v(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),hs=function(){function e(t){h(this,e),this.t=t,this.currentUser=Xu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ss;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ss,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Zu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Zu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ss)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Zu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(is("string"==typeof n.accessToken),new cs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return is(null===e||"string"==typeof e),new Xu(e)}}]),e}(),ds=function(){function e(t,n,r){h(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Xu.FIRST_PARTY,this.g=new Map}return v(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),vs=function(){function e(t,n,r){h(this,e),this.h=t,this.l=n,this.m=r}return v(e,[{key:"getToken",value:function(){return Promise.resolve(new ds(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ps=v((function e(t){h(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ms=function(){function e(t){h(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Zu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Zu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Zu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Zu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(is("string"==typeof t.token),e.T=t.token,new ps(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ys(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var gs=function(){function e(){h(this,e)}return v(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ys(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function ks(e,t){return e<t?-1:e>t?1:0}function bs(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ws(e){return e+"\0"}var xs=function(){function e(t,n){if(h(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new us(os.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new us(os.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new us(os.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new us(os.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return v(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ks(this.nanoseconds,e.nanoseconds):ks(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),_s=function(){function e(t){h(this,e),this.timestamp=t}return v(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new xs(0,0))}},{key:"max",value:function(){return new e(new xs(253402300799,999999999))}}]),e}(),Es=function(){function e(t,n,r){h(this,e),void 0===n?n=0:n>t.length&&rs(),void 0===r?r=t.length-n:r>t.length-n&&rs(),this.segments=t,this.offset=n,this.len=r}return v(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ss=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new us(os.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,J(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Es),Ts=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Is=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ts.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new us(os.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new us(os.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new us(os.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new us(os.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Es),Cs=function(){function e(t){h(this,e),this.path=t}return v(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ss.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ss.fromString(t))}},{key:"fromName",value:function(t){return new e(Ss.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ss.emptyPath())}},{key:"comparator",value:function(e,t){return Ss.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ss(t.slice()))}}]),e}(),As=v((function e(t,n,r,i){h(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ds(e){return e.fields.find((function(e){return 2===e.kind}))}function Ns(e){return e.fields.filter((function(e){return 2!==e.kind}))}As.UNKNOWN_ID=-1;var Ps=v((function e(t,n){h(this,e),this.fieldPath=t,this.kind=n}));var Rs=function(){function e(t,n){h(this,e),this.sequenceNumber=t,this.offset=n}return v(e,null,[{key:"empty",value:function(){return new e(0,Ms.min())}}]),e}();function Os(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=_s.fromTimestamp(1e9===r?new xs(n+1,0):new xs(n,r));return new Ms(i,Cs.empty(),t)}function Ls(e){return new Ms(e.readTime,e.key,-1)}var Ms=function(){function e(t,n,r){h(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return v(e,null,[{key:"min",value:function(){return new e(_s.min(),Cs.empty(),-1)}},{key:"max",value:function(){return new e(_s.max(),Cs.empty(),-1)}}]),e}();function Fs(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Cs.comparator(e.documentKey,t.documentKey))?n:ks(e.largestBatchId,t.largestBatchId)}var Vs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Us=function(){function e(){h(this,e),this.onCommittedListeners=[]}return v(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Bs(e){return js.apply(this,arguments)}function js(){return(js=ee($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===os.FAILED_PRECONDITION&&t.message===Vs){e.next=2;break}throw t;case 2:Zu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zs=function(){function e(t){var n=this;h(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return v(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&rs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=p(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),qs=function(){function e(t,n){var r=this;h(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new ss,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new Hs(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=$s(e.target.error);r.v.reject(new Hs(t,n))}}return v(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Zu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Qs(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Hs(n,t)}}}]),e}(),Gs=function(){function e(t,n,r){h(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(F())&&es("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return v(e,[{key:"$",value:function(){var e=ee($().mark((function e(t){var n=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Zu("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Hs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new us(os.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new us(os.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Hs(t,n))},i.onupgradeneeded=function(e){Zu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){Zu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ee($().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield($().mark((function e(){var n,o;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.$(t);case 2:return l.db=e.sent,n=qs.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),zs.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.R;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Zu("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Zu("SimpleDb","Removing database:",e),Xs(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!U())return!1;if(e.C())return!0;var t=F(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/gallery",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ks=function(){function e(t){h(this,e),this.L=t,this.q=!1,this.U=null}return v(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Xs(this.L.delete())}}]),e}(),Hs=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,os.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return v(n)}(us);function Ws(e){return"IndexedDbTransactionError"===e.name}var Qs=function(){function e(t){h(this,e),this.store=t}return v(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Zu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Zu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Xs(n)}},{key:"add",value:function(e){return Zu("SimpleDb","ADD",this.store.name,e,e),Xs(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Xs(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Zu("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Zu("SimpleDb","DELETE",this.store.name,e),Xs(this.store.delete(e))}},{key:"count",value:function(){return Zu("SimpleDb","COUNT",this.store.name),Xs(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new zs((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new zs((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Zu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new zs((function(n,r){t.onerror=function(e){var t=$s(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new zs((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ks(i),o=t(i.primaryKey,i.value,a);if(o instanceof zs){var u=o.catch((function(e){return a.done(),zs.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return zs.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Xs(e){return new zs((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=$s(e.target.error);n(t)}}))}var Ys=!1;function $s(e){var t=Gs.S(F());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new us("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ys||(Ys=!0,setTimeout((function(){throw r}),0)),r}}return e}var Js=function(){function e(t,n){h(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return v(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Zu("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Zu,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Ws(e.t4)){e.next=17;break}Zu("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Bs(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Zs=function(){function e(t,n){h(this,e),this.localStore=t,this.persistence=n}return v(e,[{key:"nt",value:function(){var e=ee($().mark((function e(){var t,n=this,r=arguments;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return zs.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Zu("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Zu("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Ls(t);Fs(r,n)>0&&(n=r)})),new Ms(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ec=function(){function e(t,n){var r=this;h(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return v(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function tc(e){return null==e}function nc(e){return 0===e&&1/e==-1/0}function rc(e){return"number"==typeof e&&Number.isInteger(e)&&!nc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function ic(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=oc(t)),t=ac(e.get(n),t);return oc(t)}function ac(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function oc(e){return e+"\x01\x01"}function uc(e){var t=e.length;if(is(t>=2),2===t)return is("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ss.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&rs(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:rs()}a=o+2}return new Ss(r)}ec.ct=-1;var sc=["userId","batchId"];function cc(e,t){return[e,ic(t)]}function lc(e,t,n){return[e,ic(t),n]}var fc={},hc=["prefixPath","collectionGroup","readTime","documentId"],dc=["prefixPath","collectionGroup","documentId"],vc=["collectionGroup","readTime","prefixPath","documentId"],pc=["canonicalId","targetId"],mc=["targetId","path"],yc=["path","targetId"],gc=["collectionId","parent"],kc=["indexId","uid"],bc=["uid","sequenceNumber"],wc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xc=["indexId","uid","orderedDocumentKey"],_c=["userId","collectionPath","documentId"],Ec=["userId","collectionPath","largestBatchId"],Sc=["userId","collectionGroup","largestBatchId"],Tc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ic=[].concat(J(Tc),["documentOverlays"]),Cc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ac=Cc,Dc=[].concat(Ac,["indexConfiguration","indexState","indexEntries"]),Nc=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return v(n)}(Us);function Pc(e,t){var n=as(e);return Gs.M(n.ht,t)}function Rc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Oc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Lc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Mc=function(){function e(t,n){h(this,e),this.comparator=t,this.root=n||Vc.EMPTY}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Vc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Fc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Fc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Fc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Fc(this.root,e,this.comparator,!0)}}]),e}(),Fc=function(){function e(t,n,r,i){h(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return v(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Vc=function(){function e(t,n,r,i,a){h(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw rs();if(this.right.isRed())throw rs();var e=this.left.check();if(e!==this.right.check())throw rs();return e+(this.isRed()?0:1)}}]),e}();Vc.EMPTY=null,Vc.RED=!0,Vc.BLACK=!1,Vc.EMPTY=new(function(){function e(){h(this,e),this.size=0}return v(e,[{key:"key",get:function(){throw rs()}},{key:"value",get:function(){throw rs()}},{key:"color",get:function(){throw rs()}},{key:"left",get:function(){throw rs()}},{key:"right",get:function(){throw rs()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Vc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Uc=function(){function e(t){h(this,e),this.comparator=t,this.data=new Mc(this.comparator)}return v(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Bc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Bc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Bc=function(){function e(t){h(this,e),this.iter=t}return v(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function jc(e){return e.hasNext()?e.getNext():void 0}var zc=function(){function e(t){h(this,e),this.fields=t,t.sort(Is.comparator)}return v(e,[{key:"unionWith",value:function(t){var n,r=new Uc(Is.comparator),i=p(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=p(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=p(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return bs(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),qc=function(e){g(n,e);var t=x(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return v(n)}(E(Error));var Gc=function(e){function t(e){h(this,t),this.binaryString=e}return v(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ks(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new qc("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Gc.EMPTY_BYTE_STRING=new Gc("");var Kc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hc(e){if(is(!!e),"string"==typeof e){var t=0,n=Kc.exec(e);if(is(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Wc(e.seconds),nanos:Wc(e.nanos)}}function Wc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Qc(e){return"string"==typeof e?Gc.fromBase64String(e):Gc.fromUint8Array(e)}function Xc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yc(e){var t=e.mapValue.fields.__previous_value__;return Xc(t)?Yc(t):t}function $c(e){var t=Hc(e.mapValue.fields.__local_write_time__.timestampValue);return new xs(t.seconds,t.nanos)}var Jc=v((function e(t,n,r,i,a,o,u,s,c){h(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),Zc=function(){function e(t,n){h(this,e),this.projectId=t,this.database=n||"(default)"}return v(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),el={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tl={nullValue:"NULL_VALUE"};function nl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xc(e)?4:ml(e)?9007199254740991:10:rs()}function rl(e,t){if(e===t)return!0;var n=nl(e);if(n!==nl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $c(e).isEqual($c(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Hc(e.timestampValue),r=Hc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Qc(e.bytesValue).isEqual(Qc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Wc(e.geoPointValue.latitude)===Wc(t.geoPointValue.latitude)&&Wc(e.geoPointValue.longitude)===Wc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Wc(e.integerValue)===Wc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Wc(e.doubleValue),r=Wc(t.doubleValue);return n===r?nc(n)===nc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return bs(e.arrayValue.values||[],t.arrayValue.values||[],rl);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Rc(n)!==Rc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rl(n[i],r[i])))return!1;return!0}(e,t);default:return rs()}}function il(e,t){return void 0!==(e.values||[]).find((function(e){return rl(e,t)}))}function al(e,t){if(e===t)return 0;var n=nl(e),r=nl(t);if(n!==r)return ks(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ks(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Wc(e.integerValue||e.doubleValue),r=Wc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ol(e.timestampValue,t.timestampValue);case 4:return ol($c(e),$c(t));case 5:return ks(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Qc(e),r=Qc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ks(n[i],r[i]);if(0!==a)return a}return ks(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ks(Wc(e.latitude),Wc(t.latitude));return 0!==n?n:ks(Wc(e.longitude),Wc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=al(n[i],r[i]);if(a)return a}return ks(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===el.mapValue&&t===el.mapValue)return 0;if(e===el.mapValue)return 1;if(t===el.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ks(r[o],a[o]);if(0!==u)return u;var s=al(n[r[o]],i[a[o]]);if(0!==s)return s}return ks(r.length,a.length)}(e.mapValue,t.mapValue);default:throw rs()}}function ol(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ks(e,t);var n=Hc(e),r=Hc(t),i=ks(n.seconds,r.seconds);return 0!==i?i:ks(n.nanos,r.nanos)}function ul(e){return sl(e)}function sl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Hc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Qc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Cs.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=p(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=sl(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=p(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(sl(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):rs();var t,n}function cl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ll(e){return!!e&&"integerValue"in e}function fl(e){return!!e&&"arrayValue"in e}function hl(e){return!!e&&"nullValue"in e}function dl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vl(e){return!!e&&"mapValue"in e}function pl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Oc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=pl(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=pl(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ml(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function yl(e){return"nullValue"in e?tl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?cl(Zc.empty(),Cs.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:rs()}function gl(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?cl(Zc.empty(),Cs.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?el:rs()}function kl(e,t){var n=al(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function bl(e,t){var n=al(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var wl=function(){function e(t){h(this,e),this.value=t}return v(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!vl(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(t)}},{key:"setAll",value:function(e){var t=this,n=Is.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=pl(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());vl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return rl(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];vl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Oc(t,(function(t,n){return e[t]=n}));var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(pl(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function xl(e){var t=[];return Oc(e.fields,(function(e,n){var r=new Is([e]);if(vl(n)){var i=xl(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=p(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new zc(t)}var _l=function(){function e(t,n,r,i,a,o,u){h(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return v(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(_s.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=wl.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=wl.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=_s.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,_s.min(),_s.min(),_s.min(),wl.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,_s.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,_s.min(),_s.min(),wl.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,_s.min(),_s.min(),wl.empty(),2)}}]),e}(),El=v((function e(t,n){h(this,e),this.position=t,this.inclusive=n}));function Sl(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Cs.comparator(Cs.fromName(o.referenceValue),n.key):al(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Tl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!rl(e.position[n],t.position[n]))return!1;return!0}var Il=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";h(this,e),this.field=t,this.dir=n}));function Cl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Al=v((function e(){h(this,e)})),Dl=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(al(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.matchesComparison(al(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rs()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Bl(e,t,r):"array-contains"===t?new Gl(e,r):"in"===t?new Kl(e,r):"not-in"===t?new Hl(e,r):"array-contains-any"===t?new Wl(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new jl(e,n):new zl(e,n)}}]),n}(Al),Nl=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return v(n,[{key:"matches",value:function(e){return Pl(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=p(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Al);function Pl(e){return"and"===e.op}function Rl(e){return"or"===e.op}function Ol(e){return Ll(e)&&Pl(e)}function Ll(e){var t,n=p(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Nl)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Ml(e){if(e instanceof Dl)return e.field.canonicalString()+e.op.toString()+ul(e.value);if(Ol(e))return e.filters.map((function(e){return Ml(e)})).join(",");var t=e.filters.map((function(e){return Ml(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Fl(e,t){return e instanceof Dl?function(e,t){return t instanceof Dl&&e.op===t.op&&e.field.isEqual(t.field)&&rl(e.value,t.value)}(e,t):e instanceof Nl?function(e,t){return t instanceof Nl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Fl(n,t.filters[r])}),!0)}(e,t):void rs()}function Vl(e,t){var n=e.filters.concat(t);return Nl.create(n,e.op)}function Ul(e){return e instanceof Dl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ul(e.value))}(e):e instanceof Nl?function(e){return e.op.toString()+" {"+e.getFilters().map(Ul).join(" ,")+"}"}(e):"Filter"}var Bl=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,i)).key=Cs.fromName(i.referenceValue),a}return v(n,[{key:"matches",value:function(e){var t=Cs.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Dl),jl=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"in",r)).keys=ql("in",r),i}return v(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Dl),zl=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"not-in",r)).keys=ql("not-in",r),i}return v(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Dl);function ql(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Cs.fromName(e.referenceValue)}))}var Gl=function(e){g(n,e);var t=x(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return fl(t)&&il(t.arrayValue,this.value)}}]),n}(Dl),Kl=function(e){g(n,e);var t=x(n);function n(e,r){return h(this,n),t.call(this,e,"in",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&il(this.value.arrayValue,t)}}]),n}(Dl),Hl=function(e){g(n,e);var t=x(n);function n(e,r){return h(this,n),t.call(this,e,"not-in",r)}return v(n,[{key:"matches",value:function(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!il(this.value.arrayValue,t)}}]),n}(Dl),Wl=function(e){g(n,e);var t=x(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains-any",r)}return v(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!fl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return il(t.value.arrayValue,e)}))}}]),n}(Dl),Ql=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;h(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function Xl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ql(e,t,n,r,i,a,o)}function Yl(e){var t=as(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Ml(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),tc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ul(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ul(e)})).join(",")),t.dt=n}return t.dt}function $l(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Cl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Fl(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tl(e.startAt,t.startAt)&&Tl(e.endAt,t.endAt)}function Jl(e){return Cs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Zl(e,t){return e.filters.filter((function(e){return e instanceof Dl&&e.field.isEqual(t)}))}function ef(e,t,n){var r,i=tl,a=!0,o=p(Zl(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=tl,c=!0;switch(u.op){case"<":case"<=":s=yl(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=tl}kl({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];kl({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function tf(e,t,n){var r,i=el,a=!0,o=p(Zl(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=el,c=!0;switch(u.op){case">=":case">":s=gl(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=el}bl({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];bl({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var nf=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;h(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function rf(e,t,n,r,i,a,o,u){return new nf(e,t,n,r,i,a,o,u)}function af(e){return new nf(e)}function of(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function uf(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function sf(e){var t,n=p(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function cf(e){return null!==e.collectionGroup}function lf(e){var t=as(e);if(null===t.wt){t.wt=[];var n=sf(t),r=uf(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Il(n)),t.wt.push(new Il(Is.keyField(),"asc"));else{var i,a=!1,o=p(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Il(Is.keyField(),s))}}}return t.wt}function ff(e){var t=as(e);if(!t._t)if("F"===t.limitType)t._t=Xl(t.path,t.collectionGroup,lf(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=p(lf(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Il(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new El(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new El(t.startAt.position,t.startAt.inclusive):null;t._t=Xl(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function hf(e,t){t.getFirstInequalityField(),sf(e);var n=e.filters.concat([t]);return new nf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function df(e,t,n){return new nf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function vf(e,t){return $l(ff(e),ff(t))&&e.limitType===t.limitType}function pf(e){return"".concat(Yl(ff(e)),"|lt:").concat(e.limitType)}function mf(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Ul(e)})).join(", "),"]")),tc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ul(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ul(e)})).join(",")),"Target(".concat(t,")")}(ff(e)),"; limitType=").concat(e.limitType,")")}function yf(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Cs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=p(lf(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Sl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,lf(e),t))&&!(e.endAt&&!function(e,t,n){var r=Sl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,lf(e),t))}(e,t)}function gf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kf(e){return function(t,n){var r,i=!1,a=p(lf(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=bf(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function bf(e,t,n){var r=e.field.isKeyField()?Cs.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?al(r,i):rs()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return rs()}}var wf=function(){function e(t,n){h(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return v(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];if(this.equalsFn(u,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Oc(this.inner,(function(t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];e(u,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Lc(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),xf=new Mc(Cs.comparator);function _f(){return xf}var Ef=new Mc(Cs.comparator);function Sf(){for(var e=Ef,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Tf(e){var t=Ef;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function If(){return Af()}function Cf(){return Af()}function Af(){return new wf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Df=new Mc(Cs.comparator),Nf=new Uc(Cs.comparator);function Pf(){for(var e=Nf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Rf=new Uc(ks);function Of(){return Rf}function Lf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(t)?"-0":t}}function Mf(e){return{integerValue:""+e}}function Ff(e,t){return rc(t)?Mf(t):Lf(e,t)}var Vf=v((function e(){h(this,e),this._=void 0}));function Uf(e,t,n){return e instanceof zf?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xc(t)&&(t=Yc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof qf?Gf(e,t):e instanceof Kf?Hf(e,t):function(e,t){var n=jf(e,t),r=Qf(n)+Qf(e.gt);return ll(n)&&ll(e.gt)?Mf(r):Lf(e.serializer,r)}(e,t)}function Bf(e,t,n){return e instanceof qf?Gf(e,t):e instanceof Kf?Hf(e,t):n}function jf(e,t){return e instanceof Wf?ll(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var zf=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n)}(Vf),qf=function(e){g(n,e);var t=x(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return v(n)}(Vf);function Gf(e,t){var n,r=Xf(t),i=p(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return rl(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Kf=function(e){g(n,e);var t=x(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return v(n)}(Vf);function Hf(e,t){var n,r=Xf(t),i=p(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!rl(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Wf=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return v(n)}(Vf);function Qf(e){return Wc(e.integerValue||e.doubleValue)}function Xf(e){return fl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Yf=v((function e(t,n){h(this,e),this.field=t,this.transform=n}));var $f=v((function e(t,n){h(this,e),this.version=t,this.transformResults=n})),Jf=function(){function e(t,n){h(this,e),this.updateTime=t,this.exists=n}return v(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Zf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var eh=v((function e(){h(this,e)}));function th(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new dh(e.key,Jf.none()):new oh(e.key,e.data,Jf.none());var n,r=e.data,i=wl.empty(),a=new Uc(Is.comparator),o=p(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new uh(e.key,i,new zc(a.toArray()),Jf.none())}function nh(e,t,n){e instanceof oh?function(e,t,n){var r=e.value.clone(),i=ch(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof uh?function(e,t,n){if(Zf(e.precondition,t)){var r=ch(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(sh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rh(e,t,n,r){return e instanceof oh?function(e,t,n,r){if(!Zf(e.precondition,t))return n;var i=e.value.clone(),a=lh(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof uh?function(e,t,n,r){if(!Zf(e.precondition,t))return n;var i=lh(e.fieldTransforms,r,t),a=t.data;return a.setAll(sh(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Zf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ih(e,t){var n,r=null,i=p(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=jf(a.transform,o||null);null!=u&&(null===r&&(r=wl.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function ah(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&bs(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof qf&&t instanceof qf||e instanceof Kf&&t instanceof Kf?bs(e.elements,t.elements,rl):e instanceof Wf&&t instanceof Wf?rl(e.gt,t.gt):e instanceof zf&&t instanceof zf}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var oh=function(e){g(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return h(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(eh),uh=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return h(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return v(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(eh);function sh(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ch(e,t,n){var r=new Map;is(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Bf(o,u,n[i]))}return r}function lh(e,t,n){var r,i=new Map,a=p(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Uf(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var fh,hh,dh=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(eh),vh=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(eh),ph=function(){function e(t,n,r,i){h(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return v(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&nh(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=p(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=rh(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=p(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=rh(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Cf();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=th(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(_s.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Pf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(function(e,t){return ah(e,t)}))&&bs(this.baseMutations,e.baseMutations,(function(e,t){return ah(e,t)}))}}]),e}(),mh=function(){function e(t,n,r,i){h(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return v(e,null,[{key:"from",value:function(t,n,r){is(t.mutations.length===r.length);for(var i=Df,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),yh=function(){function e(t,n){h(this,e),this.largestBatchId=t,this.mutation=n}return v(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),gh=v((function e(t,n){h(this,e),this.count=t,this.unchangedNames=n}));function kh(e){switch(e){default:return rs();case os.CANCELLED:case os.UNKNOWN:case os.DEADLINE_EXCEEDED:case os.RESOURCE_EXHAUSTED:case os.INTERNAL:case os.UNAVAILABLE:case os.UNAUTHENTICATED:return!1;case os.INVALID_ARGUMENT:case os.NOT_FOUND:case os.ALREADY_EXISTS:case os.PERMISSION_DENIED:case os.FAILED_PRECONDITION:case os.ABORTED:case os.OUT_OF_RANGE:case os.UNIMPLEMENTED:case os.DATA_LOSS:return!0}}function bh(e){if(void 0===e)return es("GRPC error has no .code"),os.UNKNOWN;switch(e){case fh.OK:return os.OK;case fh.CANCELLED:return os.CANCELLED;case fh.UNKNOWN:return os.UNKNOWN;case fh.DEADLINE_EXCEEDED:return os.DEADLINE_EXCEEDED;case fh.RESOURCE_EXHAUSTED:return os.RESOURCE_EXHAUSTED;case fh.INTERNAL:return os.INTERNAL;case fh.UNAVAILABLE:return os.UNAVAILABLE;case fh.UNAUTHENTICATED:return os.UNAUTHENTICATED;case fh.INVALID_ARGUMENT:return os.INVALID_ARGUMENT;case fh.NOT_FOUND:return os.NOT_FOUND;case fh.ALREADY_EXISTS:return os.ALREADY_EXISTS;case fh.PERMISSION_DENIED:return os.PERMISSION_DENIED;case fh.FAILED_PRECONDITION:return os.FAILED_PRECONDITION;case fh.ABORTED:return os.ABORTED;case fh.OUT_OF_RANGE:return os.OUT_OF_RANGE;case fh.UNIMPLEMENTED:return os.UNIMPLEMENTED;case fh.DATA_LOSS:return os.DATA_LOSS;default:return rs()}}(hh=fh||(fh={}))[hh.OK=0]="OK",hh[hh.CANCELLED=1]="CANCELLED",hh[hh.UNKNOWN=2]="UNKNOWN",hh[hh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hh[hh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hh[hh.NOT_FOUND=5]="NOT_FOUND",hh[hh.ALREADY_EXISTS=6]="ALREADY_EXISTS",hh[hh.PERMISSION_DENIED=7]="PERMISSION_DENIED",hh[hh.UNAUTHENTICATED=16]="UNAUTHENTICATED",hh[hh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hh[hh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hh[hh.ABORTED=10]="ABORTED",hh[hh.OUT_OF_RANGE=11]="OUT_OF_RANGE",hh[hh.UNIMPLEMENTED=12]="UNIMPLEMENTED",hh[hh.INTERNAL=13]="INTERNAL",hh[hh.UNAVAILABLE=14]="UNAVAILABLE",hh[hh.DATA_LOSS=15]="DATA_LOSS";var wh=function(){function e(){h(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return v(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return xh}},{key:"getOrCreateInstance",value:function(){return null===xh&&(xh=new e),xh}}]),e}(),xh=null;function _h(){return new TextEncoder}var Eh=new Wu([4294967295,4294967295],0);function Sh(e){var t=_h().encode(e),n=new Hu;return n.update(t),new Uint8Array(n.digest())}function Th(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Wu([n,r],0),new Wu([i,a],0)]}var Ih=function(){function e(t,n,r){if(h(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ch("Invalid padding: ".concat(n));if(r<0)throw new Ch("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Ch("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Ch("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Wu.fromNumber(this.It)}return v(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Wu.fromNumber(n)));return 1===r.compare(Eh)&&(r=new Wu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=o(Th(Sh(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=o(Th(Sh(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Ch=function(e){g(n,e);var t=x(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return v(n)}(E(Error)),Ah=function(){function e(t,n,r,i,a){h(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return v(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Dh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(_s.min(),i,new Mc(ks),_f(),Pf())}}]),e}(),Dh=function(){function e(t,n,r,i,a){h(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return v(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Pf(),Pf(),Pf())}}]),e}(),Nh=v((function e(t,n,r,i){h(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),Ph=v((function e(t,n){h(this,e),this.targetId=t,this.Vt=n})),Rh=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gc.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Oh=function(){function e(){h(this,e),this.St=0,this.Dt=Fh(),this.Ct=Gc.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return v(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=Pf(),t=Pf(),n=Pf();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:rs()}})),new Dh(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=Fh()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),Lh=function(){function e(t){h(this,e),this.Gt=t,this.Qt=new Map,this.jt=_f(),this.zt=Mh(),this.Wt=new Mc(ks)}return v(e,[{key:"Ht",value:function(e){var t,n=p(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=p(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:rs()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Jl(a))if(0===r){var o=new Cs(a.path);this.Yt(n,o,_l.newNoDocument(o,_s.min()))}else is(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=wh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Qc(c).toUint8Array()}catch(e){if(e instanceof qc)return ts("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new Ih(a,f,d)}catch(e){return ts(e instanceof Ch?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Jl(a.target)){var o=new Cs(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,_l.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=Pf();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ah(e,n,this.Wt,this.jt,r);return this.jt=_f(),this.zt=Mh(),this.Wt=new Mc(ks),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new Oh,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new Uc(ks),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Zu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new Oh),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Mh(){return new Mc(Cs.comparator)}function Fh(){return new Mc(Cs.comparator)}var Vh={asc:"ASCENDING",desc:"DESCENDING"},Uh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bh={and:"AND",or:"OR"},jh=v((function e(t,n){h(this,e),this.databaseId=t,this.useProto3Json=n}));function zh(e,t){return e.useProto3Json||tc(t)?t:{value:t}}function qh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Kh(e,t){return qh(e,t.toTimestamp())}function Hh(e){return is(!!e),_s.fromTimestamp(function(e){var t=Hc(e);return new xs(t.seconds,t.nanos)}(e))}function Wh(e,t){return function(e){return new Ss(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Qh(e){var t=Ss.fromString(e);return is(yd(t)),t}function Xh(e,t){return Wh(e.databaseId,t.path)}function Yh(e,t){var n=Qh(t);if(n.get(1)!==e.databaseId.projectId)throw new us(os.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new us(os.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Cs(ed(n))}function $h(e,t){return Wh(e.databaseId,t)}function Jh(e){var t=Qh(e);return 4===t.length?Ss.emptyPath():ed(t)}function Zh(e){return new Ss(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ed(e){return is(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function td(e,t,n){return{name:Xh(e,t),fields:n.value.mapValue.fields}}function nd(e,t,n){var r=Yh(e,t.name),i=Hh(t.updateTime),a=t.createTime?Hh(t.createTime):_s.min(),o=new wl({mapValue:{fields:t.fields}}),u=_l.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function rd(e,t){return"found"in t?function(e,t){is(!!t.found),t.found.name,t.found.updateTime;var n=Yh(e,t.found.name),r=Hh(t.found.updateTime),i=t.found.createTime?Hh(t.found.createTime):_s.min(),a=new wl({mapValue:{fields:t.found.fields}});return _l.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){is(!!t.missing),is(!!t.readTime);var n=Yh(e,t.missing),r=Hh(t.readTime);return _l.newNoDocument(n,r)}(e,t):rs()}function id(e,t){var n;if(t instanceof oh)n={update:td(e,t.key,t.value)};else if(t instanceof dh)n={delete:Xh(e,t.key)};else if(t instanceof uh)n={update:td(e,t.key,t.data),updateMask:md(t.fieldMask)};else{if(!(t instanceof vh))return rs();n={verify:Xh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof zf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof qf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Kf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wf)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw rs()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Kh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:rs()}(e,t.precondition)),n}function ad(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Jf.updateTime(Hh(e.updateTime)):void 0!==e.exists?Jf.exists(e.exists):Jf.none()}(t.currentDocument):Jf.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)is("REQUEST_TIME"===t.setToServerValue),n=new zf;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new qf(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Kf(i)}else"increment"in t?n=new Wf(e,t.increment):rs();var a=Is.fromServerFormat(t.fieldPath);return new Yf(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Yh(e,t.update.name),a=new wl({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new zc(t.map((function(e){return Is.fromServerFormat(e)})))}(t.updateMask);return new uh(i,a,o,n,r)}return new oh(i,a,n,r)}if(t.delete){var u=Yh(e,t.delete);return new dh(u,n)}if(t.verify){var s=Yh(e,t.verify);return new vh(s,n)}return rs()}function od(e,t){return{documents:[$h(e,t.path)]}}function ud(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=$h(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=$h(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return pd(Nl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:dd(e.field),direction:ld(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=zh(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function sd(e){var t=Jh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){is(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=cd(e);return t instanceof Nl&&Ol(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Il(vd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return tc(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new El(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new El(n,t)}(n.endAt)),rf(t,i,u,o,s,"F",c,l)}function cd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=vd(e.unaryFilter.field);return Dl.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=vd(e.unaryFilter.field);return Dl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vd(e.unaryFilter.field);return Dl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=vd(e.unaryFilter.field);return Dl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return rs()}}(e):void 0!==e.fieldFilter?function(e){return Dl.create(vd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rs()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Nl.create(e.compositeFilter.filters.map((function(e){return cd(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return rs()}}(e.compositeFilter.op))}(e):rs()}function ld(e){return Vh[e]}function fd(e){return Uh[e]}function hd(e){return Bh[e]}function dd(e){return{fieldPath:e.canonicalString()}}function vd(e){return Is.fromServerFormat(e.fieldPath)}function pd(e){return e instanceof Dl?function(e){if("=="===e.op){if(dl(e.value))return{unaryFilter:{field:dd(e.field),op:"IS_NAN"}};if(hl(e.value))return{unaryFilter:{field:dd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dl(e.value))return{unaryFilter:{field:dd(e.field),op:"IS_NOT_NAN"}};if(hl(e.value))return{unaryFilter:{field:dd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dd(e.field),op:fd(e.op),value:e.value}}}(e):e instanceof Nl?function(e){var t=e.getFilters().map((function(e){return pd(e)}));return 1===t.length?t[0]:{compositeFilter:{op:hd(e.op),filters:t}}}(e):rs()}function md(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function yd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var gd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_s.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_s.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gc.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;h(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return v(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),kd=v((function e(t){h(this,e),this.fe=t}));function bd(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:wd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Xh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:qh(e,t.version.toTimestamp()),createTime:qh(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:xd(t.version)};else{if(!t.isUnknownDocument())return rs();r.unknownDocument={path:n.path.toArray(),version:xd(t.version)}}return r}function wd(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function xd(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _d(e){var t=new xs(e.seconds,e.nanoseconds);return _s.fromTimestamp(t)}function Ed(e,t){for(var n=(t.baseMutations||[]).map((function(t){return ad(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return ad(e.fe,t)})),u=xs.fromMillis(t.localWriteTimeMs);return new ph(t.batchId,u,n,o)}function Sd(e){var t,n,r=_d(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?_d(e.lastLimboFreeSnapshotVersion):_s.min();return void 0!==e.query.documents?(is(1===(n=e.query).documents.length),t=ff(af(Jh(n.documents[0])))):t=function(e){return ff(sd(e))}(e.query),new gd(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Gc.fromBase64String(e.resumeToken))}function Td(e,t){var n,r=xd(t.snapshotVersion),i=xd(t.lastLimboFreeSnapshotVersion);n=Jl(t.target)?od(e.fe,t.target):ud(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Yl(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Id(e){var t=sd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?df(t,t.limit,"L"):t}function Cd(e,t){return new yh(t.largestBatchId,ad(e.fe,t.overlayMutation))}function Ad(e,t){var n=t.path.lastSegment();return[e,ic(t.path.popLast()),n]}function Dd(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:xd(r.readTime),documentKey:ic(r.documentKey.path),largestBatchId:r.largestBatchId}}var Nd=function(){function e(){h(this,e)}return v(e,[{key:"getBundleMetadata",value:function(e,t){return Pd(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:_d(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Pd(e).put({bundleId:(n=t).id,createTime:xd(Hh(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Rd(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Id(t.bundledQuery),readTime:_d(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Rd(e).put(function(e){return{name:e.name,readTime:xd(Hh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Pd(e){return Pc(e,"bundles")}function Rd(e){return Pc(e,"namedQueries")}var Od=function(){function e(t,n){h(this,e),this.serializer=t,this.userId=n}return v(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ld(e).get(Ad(this.userId,t)).next((function(e){return e?Cd(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=If();return zs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new yh(t,a);i.push(r.we(e,o))})),zs.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(ic(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ld(e).J("collectionPathOverlayIndex",i))})),zs.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=If(),a=ic(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ld(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Cd(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=If(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ld(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Cd(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return Ld(e).put(function(e,t,n){var r=o(Ad(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:id(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ld(e){return Pc(e,"documentOverlays")}var Md=function(){function e(){h(this,e)}return v(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Wc(e.integerValue));else if("doubleValue"in e){var n=Wc(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),nc(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Qc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?ml(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):rs()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),Cs.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function Fd(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Vd(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Fd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Md.Ve=new Md;var Ud=function(){function e(){h(this,e),this.buffer=new Uint8Array(1024),this.position=0}return v(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=Vd(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=Vd(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Bd=function(){function e(t){h(this,e),this.je=t}return v(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),jd=function(){function e(t){h(this,e),this.je=t}return v(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),zd=function(){function e(){h(this,e),this.je=new Ud,this.ze=new Bd(this.je),this.We=new jd(this.je)}return v(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),qd=function(){function e(t,n,r,i){h(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return v(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Gd(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Kd(e.arrayValue,t.arrayValue))?n:0!==(n=Kd(e.directionalValue,t.directionalValue))?n:Cs.comparator(e.documentKey,t.documentKey)}function Kd(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Hd=function(){function e(t){h(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=p(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return v(e,[{key:"tn",value:function(e){is(e.collectionGroup===this.collectionId);var t=Ds(e);if(void 0!==t&&!this.en(t))return!1;for(var n=Ns(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],u))return!1}return!0}},{key:"en",value:function(e){var t,n=p(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Wd(e){var t,n;if(is(e instanceof Dl||e instanceof Nl),e instanceof Dl){if(e instanceof Kl){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Dl.create(e.field,"==",t)})))||[];return Nl.create(r,"or")}return e}var i=e.filters.map((function(e){return Wd(e)}));return Nl.create(i,e.op)}function Qd(e){if(0===e.getFilters().length)return[];var t=Jd(Wd(e));return is($d(t)),Xd(t)||Yd(t)?[t]:t.getFilters()}function Xd(e){return e instanceof Dl}function Yd(e){return e instanceof Nl&&Ol(e)}function $d(e){return Xd(e)||Yd(e)||function(e){if(e instanceof Nl&&Rl(e)){var t,n=p(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Xd(r)&&!Yd(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Jd(e){if(is(e instanceof Dl||e instanceof Nl),e instanceof Dl)return e;if(1===e.filters.length)return Jd(e.filters[0]);var t=e.filters.map((function(e){return Jd(e)})),n=Nl.create(t,e.op);return $d(n=tv(n))?n:(is(n instanceof Nl),is(Pl(n)),is(n.filters.length>1),n.filters.reduce((function(e,t){return Zd(e,t)})))}function Zd(e,t){var n;return is(e instanceof Dl||e instanceof Nl),is(t instanceof Dl||t instanceof Nl),n=e instanceof Dl?t instanceof Dl?function(e,t){return Nl.create([e,t],"and")}(e,t):ev(e,t):t instanceof Dl?ev(t,e):function(e,t){if(is(e.filters.length>0&&t.filters.length>0),Pl(e)&&Pl(t))return Vl(e,t.getFilters());var n=Rl(e)?e:t,r=Rl(e)?t:e,i=n.filters.map((function(e){return Zd(e,r)}));return Nl.create(i,"or")}(e,t),tv(n)}function ev(e,t){if(Pl(t))return Vl(t,e.getFilters());var n=t.filters.map((function(t){return Zd(e,t)}));return Nl.create(n,"or")}function tv(e){if(is(e instanceof Dl||e instanceof Nl),e instanceof Dl)return e;var t=e.getFilters();if(1===t.length)return tv(t[0]);if(Ll(e))return e;var n=t.map((function(e){return tv(e)})),r=[];return n.forEach((function(t){t instanceof Dl?r.push(t):t instanceof Nl&&(t.op===e.op?r.push.apply(r,J(t.filters)):r.push(t))})),1===r.length?r[0]:Nl.create(r,e.op)}var nv=function(){function e(){h(this,e),this.rn=new rv}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),zs.resolve()}},{key:"getCollectionParents",value:function(e,t){return zs.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return zs.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return zs.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return zs.resolve(null)}},{key:"getIndexType",value:function(e,t){return zs.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return zs.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return zs.resolve(null)}},{key:"getMinOffset",value:function(e,t){return zs.resolve(Ms.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return zs.resolve(Ms.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return zs.resolve()}},{key:"updateIndexEntries",value:function(e,t){return zs.resolve()}}]),e}(),rv=function(){function e(){h(this,e),this.index={}}return v(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Uc(Ss.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Uc(Ss.comparator)).toArray()}}]),e}(),iv=new Uint8Array(0),av=function(){function e(t,n){h(this,e),this.user=t,this.databaseId=n,this.on=new rv,this.un=new wf((function(e){return Yl(e)}),(function(e,t){return $l(e,t)})),this.uid=t.uid||""}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:ic(i)};return ov(e).put(a)}return zs.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ws(t),""],!1,!0);return ov(e).j(r).next((function(e){var r,i=p(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(uc(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=sv(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=cv(e);return a.next((function(e){o.put(Dd(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=sv(e),r=cv(e),i=uv(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=uv(e),i=!0,a=new Map;return zs.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Pf(),o=[];return zs.forEach(a,(function(i,a){var u;Zu("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Yl(t)));var s=function(e,t){var n=Ds(t);if(void 0===n)return null;var r,i=p(Zl(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=p(Ns(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=p(Zl(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=p(Ns(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ef(e,o.fieldPath,e.startAt):tf(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new El(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=p(Ns(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?tf(e,o.fieldPath,e.endAt):ef(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new El(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),v=n.ln(i,a,c),m=n.fn(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return zs.forEach(m,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Cs.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return zs.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Qd(Nl.create(e.filters,"and")).map((function(t){return Xl(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.dn(t[s/c]):iv,h=u.wn(e,f,n[s%c],r),d=u._n(e,f,i[s%c],a),v=o.map((function(t){return u.wn(e,f,t,!0)}));l.push.apply(l,J(u.createRange(h,d,v)))},h=0;h<s;++h)f(h);return l}},{key:"wn",value:function(e,t,n,r){var i=new qd(e,Cs.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new qd(e,Cs.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new Hd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return zs.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Uc(Is.comparator),r=!1,i=p(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=p(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=p(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new zd,i=p(Ns(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);Md.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new zd;return Md.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new zd;return Md.Ve._e(cl(this.databaseId,t),n.He(function(e){var t=Ns(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new zd);var i,a=0,o=p(Ns(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=p(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.yn(t,s.fieldPath)&&fl(c))r=this.pn(r,s,c);else{var h=f.He(s.kind);Md.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=J(e),a=[],o=p(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=p(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new zd;f.seed(l.Qe()),Md.Ve._e(s,f.He(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Dl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=sv(e),i=cv(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return zs.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Rs(t.sequenceNumber,new Ms(_d(t.readTime),new Cs(uc(t.documentKey)),t.largestBatchId)):Rs.empty(),r=e.fields.map((function(e){var t=o(e,2),n=t[0],r=t[1];return new Ps(Is.fromServerFormat(n),r)}));return new As(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ks(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=sv(e),a=cv(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return zs.forEach(t,(function(t){return a.put(Dd(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return zs.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?zs.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),zs.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?zs.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return uv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return uv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=uv(e),i=new Uc(Gd);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new qd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new Uc(Gd),r=this.mn(t,e);if(null==r)return n;var i=Ds(t);if(null!=i){var a=e.data.field(i.fieldPath);if(fl(a)){var o,u=p(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new qd(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new qd(t.indexId,e.key,iv,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;Zu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=jc(a),s=jc(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=jc(o)):l?(i(u),u=jc(a)):(u=jc(a),s=jc(o))}}(r,i,Gd,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),zs.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return cv(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Gd(e,t)})).filter((function(e,t,n){return!t||0!==Gd(e,n[t-1])}));var r=[];r.push(e);var i,a=p(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Gd(o,e),s=Gd(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,iv,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,iv,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return Gd(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(lv)}},{key:"getMinOffset",value:function(e,t){var n=this;return zs.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||rs()}))})).next(lv)}}]),e}();function ov(e){return Pc(e,"collectionParents")}function uv(e){return Pc(e,"indexEntries")}function sv(e){return Pc(e,"indexConfiguration")}function cv(e){return Pc(e,"indexState")}function lv(e){is(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Fs(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ms(t.readTime,t.documentKey,n)}var fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hv=function(){function e(t,n,r){h(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return v(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function dv(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){is(1===u)})));var c,l=[],f=p(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=lc(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return zs.waitFor(a).next((function(){return l}))}function vv(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw rs();t=e.noDocument}return JSON.stringify(t).length}hv.DEFAULT_COLLECTION_PERCENTILE=10,hv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hv.DEFAULT=new hv(41943040,hv.DEFAULT_COLLECTION_PERCENTILE,hv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hv.DISABLED=new hv(-1,0,0);var pv=function(){function e(t,n,r,i){h(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return v(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yv(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=gv(e),o=yv(e);return o.add({}).next((function(u){is("number"==typeof u);var s,c=new ph(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return id(e.fe,t)})),i=n.mutations.map((function(t){return id(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Uc((function(e,t){return ks(e.canonicalString(),t.canonicalString())})),d=p(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,m=lc(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(m,fc))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),zs.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return yv(e).get(t).next((function(e){return e?(is(e.userId===n.userId),Ed(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?zs.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return yv(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(is(t.batchId>=r),a=Ed(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return yv(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yv(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Ed(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=cc(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return gv(e).X({range:i},(function(r,i,u){var s=o(r,3),c=s[0],l=s[1],f=s[2],h=uc(l);if(c===n.userId&&t.path.isEqual(h))return yv(e).get(f).next((function(e){if(!e)throw rs();is(e.userId===n.userId),a.push(Ed(n.serializer,e))}));u.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Uc(ks),i=[];return t.forEach((function(t){var a=cc(n.userId,t.path),u=IDBKeyRange.lowerBound(a),s=gv(e).X({range:u},(function(e,i,a){var u=o(e,3),s=u[0],c=u[1],l=u[2],f=uc(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),zs.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=cc(this.userId,r),u=IDBKeyRange.lowerBound(a),s=new Uc(ks);return gv(e).X({range:u},(function(e,t,a){var u=o(e,3),c=u[0],l=u[1],f=u[2],h=uc(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.Dn(e,s)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(yv(e).get(t).next((function(e){if(null===e)throw rs();is(e.userId===n.userId),r.push(Ed(n.serializer,e))})))})),zs.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return dv(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),zs.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return zs.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return gv(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=uc(e[1]);i.push(a)}else r.done()})).next((function(){is(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return mv(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return kv(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return is(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function mv(e,t,n){var r=cc(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),u=!1;return gv(e).X({range:a,Y:!0},(function(e,n,r){var a=o(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(u=!0),r.done()})).next((function(){return u}))}function yv(e){return Pc(e,"mutations")}function gv(e){return Pc(e,"documentMutations")}function kv(e){return Pc(e,"mutationQueues")}var bv=function(){function e(t){h(this,e),this.Nn=t}return v(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),wv=function(){function e(t,n){h(this,e),this.referenceDelegate=t,this.serializer=n}return v(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new bv(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return _s.fromTimestamp(new xs(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return xv(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return is(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return xv(e).X((function(o,u){var s=Sd(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return zs.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return xv(e).X((function(e,n){var r=Sd(n);t(r)}))}},{key:"$n",value:function(e){return _v(e).get("targetGlobalKey").next((function(e){return is(null!==e),e}))}},{key:"On",value:function(e,t){return _v(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return xv(e).put(Td(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Yl(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return xv(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Sd(n);$l(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ev(e);return t.forEach((function(t){var o=ic(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),zs.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ev(e);return zs.forEach(t,(function(t){var a=ic(t.path);return zs.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ev(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ev(e),i=Pf();return r.X({range:n,Y:!0},(function(e,t,n){var r=uc(e[1]),a=new Cs(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=ic(t.path),r=IDBKeyRange.bound([n],[ws(n)],!1,!0),i=0;return Ev(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=o(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return xv(e).get(t).next((function(e){return e?Sd(e):null}))}}]),e}();function xv(e){return Pc(e,"targets")}function _v(e){return Pc(e,"targetGlobal")}function Ev(e){return Pc(e,"targetDocuments")}function Sv(e,t){var n=o(e,2),r=n[0],i=n[1],a=o(t,2),u=a[0],s=a[1],c=ks(r,u);return 0===c?ks(i,s):c}var Tv=function(){function e(t){h(this,e),this.Ln=t,this.buffer=new Uc(Sv),this.qn=0}return v(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Sv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Iv=function(){function e(t,n,r){h(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return v(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;Zu("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Ws(e.t0)){e.next=12;break}Zu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Bs(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Cv=function(){function e(t,n){h(this,e),this.jn=t,this.params=n}return v(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return zs.resolve(ec.ct);var r=new Tv(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Zu("LruGarbageCollector","Garbage collection skipped; disabled"),zs.resolve(fv)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Zu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),fv):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Zu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ju()<=ae.DEBUG&&Zu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),zs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Av(e,t){return new Cv(e,t)}var Dv=function(){function e(t,n){h(this,e),this.db=t,this.garbageCollector=Av(this,n)}return v(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Nv(e,n)}},{key:"removeReference",value:function(e,t,n){return Nv(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Nv(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return kv(e).Z((function(r){return mv(e,r,t).next((function(e){return e&&(n=!0),zs.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,_s.min()),Ev(e).delete([0,ic(o.path)])}))}));i.push(s)}})).next((function(){return zs.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Nv(e,t)}},{key:"Yn",value:function(e,t){var n,r=Ev(e),i=ec.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=o(e,2),u=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===u?(i!==ec.ct&&t(new Cs(uc(n)),i),i=c,n=s):i=ec.ct})).next((function(){i!==ec.ct&&t(new Cs(uc(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Nv(e,t){return Ev(e).put(function(e,t){return{targetId:0,path:ic(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Pv=function(){function e(){h(this,e),this.changes=new wf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return v(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,_l.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?zs.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Rv=function(){function e(t){h(this,e),this.serializer=t}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Fv(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Fv(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],wd(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=_l.newInvalidDocument(t);return Fv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Vv(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:_l.newInvalidDocument(t)};return Fv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Vv(t))},(function(e,i){r={document:n.ts(t,i),size:vv(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=_f();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=_f(),i=new Mc(Cs.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,vv(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return zs.resolve();var r=new Uc(Bv);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Vv(r.first()),Vv(r.last())),a=r.getIterator(),o=a.getNext();return Fv(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Cs.fromSegments([].concat(J(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Bv(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Vv(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),wd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fv(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=_f(),o=p(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(Cs.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(yf(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=_f(),o=Uv(t,n),u=Uv(t,Ms.max());return Fv(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(Cs.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Lv(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Mv(e).get("remoteDocumentGlobalKey").next((function(e){return is(!!e),e}))}},{key:"Zn",value:function(e,t){return Mv(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=nd(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Cs.fromSegments(t.noDocument.path),i=_d(t.noDocument.readTime);n=_l.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return rs();var a=Cs.fromSegments(t.unknownDocument.path),o=_d(t.unknownDocument.version);n=_l.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new xs(e[0],e[1]);return _s.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(_s.min()))return n}return _l.newInvalidDocument(e)}}]),e}();function Ov(e){return new Rv(e)}var Lv=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new wf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Uc((function(e,t){return ks(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=bd(t.os.serializer,o);i=i.add(a.path.popLast());var c=vv(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=bd(t.os.serializer,o.convertToNoDocument(_s.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),zs.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Pv);function Mv(e){return Pc(e,"remoteDocumentGlobal")}function Fv(e){return Pc(e,"remoteDocumentsV14")}function Vv(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Uv(e,t){var n=t.documentKey.path.toArray();return[e,wd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Bv(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ks(n[a],r[a]))return i;return(i=ks(n.length,r.length))||((i=ks(n[n.length-2],r[r.length-2]))||ks(n[n.length-1],r[r.length-1]))}var jv=v((function e(t,n){h(this,e),this.overlayedDocument=t,this.mutatedFields=n})),zv=function(){function e(t,n,r,i){h(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return v(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&rh(r.mutation,e,zc.empty(),xs.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Pf()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pf(),i=If();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Sf();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=If();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Pf())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=_f(),a=Af(),o=Af();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof uh)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),rh(o.mutation,t,o.mutation.getFieldMask(),xs.now())):a.set(t.key,zc.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new jv(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Af(),i=new Mc((function(e,t){return e-t})),a=Pf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=p(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||zc.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Pf()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Cf();c.forEach((function(e){if(!a.has(e)){var n=th(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return zs.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Cs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):zs.resolve(If()),u=-1,s=a;return o.next((function(t){return zs.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?zs.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Pf())})).next((function(e){return{batchId:u,changes:Tf(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Cs(t)).next((function(e){var t=Sf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Sf();return this.indexManager.getCollectionParents(e,i).next((function(o){return zs.forEach(o,(function(o){var u=function(e,t){return new nf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,_l.newInvalidDocument(r)))}));var n=Sf();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&rh(a.mutation,i,zc.empty(),xs.now()),yf(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),qv=function(){function e(t){h(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return v(e,[{key:"getBundleMetadata",value:function(e,t){return zs.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Hh(n.createTime)}),zs.resolve()}},{key:"getNamedQuery",value:function(e,t){return zs.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Id(e.bundledQuery),readTime:Hh(e.readTime)}}(t)),zs.resolve()}}]),e}(),Gv=function(){function e(){h(this,e),this.overlays=new Mc(Cs.comparator),this.ls=new Map}return v(e,[{key:"getOverlay",value:function(e,t){return zs.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=If();return zs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),zs.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),zs.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=If(),i=t.length+1,a=new Cs(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return zs.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Mc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=If(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=If(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return zs.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new yh(t,n));var a=this.ls.get(t);void 0===a&&(a=Pf(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),Kv=function(){function e(){h(this,e),this.fs=new Uc(Hv.ds),this.ws=new Uc(Hv._s)}return v(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Hv(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new Hv(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new Cs(new Ss([])),r=new Hv(n,e),i=new Hv(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new Cs(new Ss([])),n=new Hv(t,e),r=new Hv(t,e+1),i=Pf();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Hv(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Hv=function(){function e(t,n){h(this,e),this.key=t,this.As=n}return v(e,null,[{key:"ds",value:function(e,t){return Cs.comparator(e.key,t.key)||ks(e.As,t.As)}},{key:"_s",value:function(e,t){return ks(e.As,t.As)||Cs.comparator(e.key,t.key)}}]),e}(),Wv=function(){function e(t,n){h(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Uc(Hv.ds)}return v(e,[{key:"checkEmpty",value:function(e){return zs.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ph(i,t,n,r);this.mutationQueue.push(a);var o,u=p(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new Hv(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return zs.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return zs.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return zs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return zs.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return zs.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Hv(t,0),i=new Hv(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),zs.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Uc(ks);return t.forEach((function(e){var t=new Hv(e,0),i=new Hv(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),zs.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Cs.isDocumentKey(i)||(i=i.child(""));var a=new Hv(new Cs(i),0),o=new Uc(ks);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),zs.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;is(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return zs.forEach(t.mutations,(function(i){var a=new Hv(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Hv(t,0),r=this.Rs.firstAfterOrEqual(n);return zs.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,zs.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Qv=function(){function e(t){h(this,e),this.Ds=t,this.docs=new Mc(Cs.comparator),this.size=0}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return zs.resolve(n?n.document.mutableCopy():_l.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=_f();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():_l.newInvalidDocument(e))})),zs.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=_f(),a=t.path,o=new Cs(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Fs(Ls(l),n)<=0||(r.has(l.key)||yf(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return zs.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){rs()}},{key:"Cs",value:function(e,t){return zs.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Xv(this)}},{key:"getSize",value:function(e){return zs.resolve(this.size)}}]),e}(),Xv=function(e){g(n,e);var t=x(n);function n(e){var r;return h(this,n),(r=t.call(this)).os=e,r}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),zs.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(Pv),Yv=function(){function e(t){h(this,e),this.persistence=t,this.xs=new wf((function(e){return Yl(e)}),$l),this.lastRemoteSnapshotVersion=_s.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Kv,this.targetCount=0,this.Ms=bv.kn()}return v(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),zs.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return zs.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return zs.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),zs.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),zs.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new bv(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,zs.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),zs.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,zs.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),zs.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return zs.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return zs.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),zs.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),zs.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),zs.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return zs.resolve(n)}},{key:"containsKey",value:function(e,t){return zs.resolve(this.ks.containsKey(t))}}]),e}(),$v=function(){function e(t,n){var r=this;h(this,e),this.$s={},this.overlays={},this.Os=new ec(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new Yv(this),this.indexManager=new nv,this.remoteDocumentCache=new Qv((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new kd(n),this.qs=new qv(this.serializer)}return v(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Gv,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new Wv(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Zu("MemoryPersistence","Starting transaction:",e);var i=new Jv(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return zs.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Jv=function(e){g(n,e);var t=x(n);function n(e){var r;return h(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return v(n)}(Us),Zv=function(){function e(t){h(this,e),this.persistence=t,this.Qs=new Kv,this.js=null}return v(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw rs()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),zs.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),zs.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),zs.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zs.forEach(this.Ws,(function(r){var i=Cs.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,_s.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return zs.or([function(){return zs.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),ep=function(){function e(t){h(this,e),this.serializer=t}return v(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new qs("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sc,{unique:!0}),e.createObjectStore("documentMutations")}(e),tp(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=zs.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),tp(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_s.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sc,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return zs.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:_c});t.createIndex("collectionPathOverlayIndex",Ec,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Sc,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:hc});t.createIndex("documentKeyIndex",dc),t.createIndex("collectionGroupIndex",vc)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:kc}).createIndex("sequenceNumberIndex",bc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:wc}).createIndex("documentKeyIndex",xc,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=vv(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return zs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return zs.forEach(r,(function(r){is(r.userId===n.userId);var i=Ed(t.serializer,r);return dv(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Ss(n),o=function(e){return[0,ic(e)]}(a);r.push(t.get(o).next((function(n){return n?zs.resolve():function(n){return t.put({targetId:0,path:ic(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return zs.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:gc});var n=t.store("collectionParents"),r=new rv,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ic(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Ss(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=o(e,3),r=(n[0],n[1]),a=(n[2],uc(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Sd(r),a=Td(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Cs(Ss.fromString(i.document.name).popFirst(5)):i.noDocument?Cs.fromSegments(i.noDocument.path):i.unknownDocument?Cs.fromSegments(i.unknownDocument.path):rs()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return zs.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=Ov(this.serializer),a=new $v(Zv.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Pf();Ed(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),zs.forEach(r,(function(e,r){var o=new Xu(r),u=Od.de(n.serializer,o),s=a.getIndexManager(o),c=pv.de(o,n.serializer,s,a.referenceDelegate);return new zv(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Nc(t,ec.ct),e).next()}))}))}}]),e}();function tp(e){e.createObjectStore("targetDocuments",{keyPath:mc}).createIndex("documentTargetsIndex",yc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pc,{unique:!0}),e.createObjectStore("targetGlobal")}var np="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rp=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(h(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new us(os.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Dv(this,i),this.di=n+"main",this.serializer=new kd(s),this.wi=new Gs(this.di,this.ui,new ep(this.serializer)),this.Bs=new wv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ov(this.serializer),this.qs=new Nd,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&es("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return v(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new us(os.FAILED_PRECONDITION,np);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new ec(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=ee($().mark((function n(r){return $().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=ee($().mark((function t(n){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ap(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Ws(t))return Zu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Zu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return ip(e).get("owner").next((function(e){return zs.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return ap(e).delete(this.clientId)}},{key:"bi",value:function(){var e=ee($().mark((function e(){var t,n,r,i,a=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Pc(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return zs.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=p(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?zs.resolve(!0):ip(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new us(os.FAILED_PRECONDITION,np);return!1}}return!(!t.networkEnabled||!t.inForeground)||ap(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Zu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ee($().mark((function e(){var t=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Nc(e,ec.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ap(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return pv.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new av(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Od.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Zu("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?Dc:14===i?Ac:13===i?Cc:12===i?Ic:11===i?Tc:void rs();return this.wi.runTransaction(e,o,u,(function(i){return a=new Nc(i,r.Os?r.Os.next():ec.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw es("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new us(os.FAILED_PRECONDITION,Vs);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return ip(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new us(os.FAILED_PRECONDITION,np)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ip(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=ip(e);return n.get("owner").next((function(e){return t.Ri(e)?(Zu("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):zs.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(es("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Zu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return es("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){es("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Gs.D()}}]),e}();function ip(e){return Pc(e,"owner")}function ap(e){return Pc(e,"clientMetadata")}function op(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var up=function(){function e(t,n,r,i){h(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return v(e,null,[{key:"Li",value:function(t,n){var r,i=Pf(),a=Pf(),o=p(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),sp=function(){function e(){h(this,e),this.qi=!1}return v(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(of(t))return zs.resolve(null);var r=ff(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=df(t,null,"F"),r=ff(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Pf.apply(void 0,J(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,df(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return of(t)||r.isEqual(_s.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Ju()<=ae.DEBUG&&Zu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mf(t)),i.Wi(e,o,t,Os(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new Uc(kf(e));return t.forEach((function(t,r){yf(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Ju()<=ae.DEBUG&&Zu("QueryEngine","Using full collection scan to execute query:",mf(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ms.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),cp=function(){function e(t,n,r,i){h(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Mc(ks),this.Yi=new wf((function(e){return Yl(e)}),$l),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return v(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zv(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function lp(e,t,n,r){return new cp(e,t,n,r)}function fp(e,t){return hp.apply(this,arguments)}function hp(){return hp=ee($().mark((function e(t,n){var r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=as(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Pf(),s=p(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=p(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,v=p(n);try{for(v.s();!(d=v.n()).done;){var m=d.value;o.push(m.batchId);var y,g=p(m.mutations);try{for(g.s();!(y=g.n()).done;){var k=y.value;u=u.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){v.e(b)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}function dp(e,t){var n=as(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=zs.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);is(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Pf(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function vp(e){var t=as(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function pp(e,t){var n=as(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Gc.EMPTY_BYTE_STRING,_s.min()).withLastLimboFreeSnapshotVersion(_s.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=_f(),s=Pf();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(mp(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(_s.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return zs.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function mp(e,t,n){var r=Pf(),i=Pf();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=_f();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(_s.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Zu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function yp(e,t){var n=as(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function gp(e,t){var n=as(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,zs.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new gd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function kp(e,t,n){return bp.apply(this,arguments)}function bp(){return bp=ee($().mark((function e(t,n,r){var i,a,o;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=as(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ws(e.t1)){e.next=12;break}throw e.t1;case 12:Zu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),bp.apply(this,arguments)}function wp(e,t,n){var r=as(e),i=_s.min(),a=Pf();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=as(e),i=r.Yi.get(n);return void 0!==i?zs.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,ff(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:_s.min(),n?a:Pf())})).next((function(e){return Ep(r,gf(t),e),{documents:e,ir:a}}))}))}function xp(e,t){var n=as(e),r=as(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function _p(e,t){var n=as(e),r=n.Xi.get(t)||_s.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,Os(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Ep(n,t,e),e}))}function Ep(e,t,n){var r=e.Xi.get(t)||_s.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function Sp(e,t,n,r){return Tp.apply(this,arguments)}function Tp(){return Tp=ee($().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,v;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=as(t),o=Pf(),u=_f(),s=p(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(f,h)}catch(m){s.e(m)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,gp(a,function(e){return ff(af(Ss.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return mp(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),Tp.apply(this,arguments)}function Ip(e,t){return Cp.apply(this,arguments)}function Cp(){return Cp=ee($().mark((function e(t,n){var r,i,a,o=arguments;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Pf(),e.next=3,gp(t,ff(Id(n.bundledQuery)));case 3:return i=e.sent,a=as(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Hh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Gc.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Cp.apply(this,arguments)}function Ap(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Dp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Np(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Pp=function(){function e(t,n,r,i){h(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return v(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new us(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(es("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Rp=function(){function e(t,n,r){h(this,e),this.targetId=t,this.state=n,this.error=r}return v(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new us(i.error.code,i.error.message))),a?new e(t,i.state,r):(es("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Op=function(){function e(t,n){h(this,e),this.clientId=t,this.activeTargetIds=n}return v(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Of(),o=0;i&&o<r.activeTargetIds.length;++o)i=rc(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(es("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Lp=function(){function e(t,n){h(this,e),this.clientId=t,this.onlineState=n}return v(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(es("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Mp=function(){function e(){h(this,e),this.activeTargetIds=Of()}return v(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Fp=function(){function e(t,n,r,i,a){h(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Mc(ks),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=Ap(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new Mp),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return v(e,[{key:"start",value:function(){var e=ee($().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=p(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Ap(this.persistenceKey,i)))&&(o=Op.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=p(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Np(this.persistenceKey,e));if(n){var r=Rp.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Np(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Zu("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Zu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Zu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Zu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void es("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(ee($().mark((function e(){var r,i,a,o,u,s,c;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=ec.ct;if(null!=e)try{var n=JSON.parse(e);is("number"==typeof n),t=n}catch(e){es("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==ec.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new Pp(this.currentUser,e,t,n),i=Dp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=Dp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=Np(this.persistenceKey,e),i=new Rp(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return Op.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Pp.ar(new Xu(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return Rp.ar(r,t)}},{key:"br",value:function(e){return Lp.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=ee($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:Zu("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Of();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Vp=function(){function e(){h(this,e),this.Hr=new Mp,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return v(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new Mp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Up=function(){function e(){h(this,e)}return v(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Bp=function(){function e(){var t=this;h(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return v(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Zu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=p(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Zu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=p(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),jp=null;function zp(){return null===jp?jp=268435456+Math.round(2147483648*Math.random()):jp++,"0x"+jp.toString(16)}var qp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Gp=function(){function e(t){h(this,e),this.ro=t.ro,this.oo=t.oo}return v(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),Kp="WebChannelConnection",Hp=function(e){g(n,e);var t=x(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return v(n,[{key:"Ao",value:function(e,t,n,r){var i=zp();return new Promise((function(a,o){var u=new Ku;u.setWithCredentials(!0),u.listenOnce(Bu.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Uu.NO_ERROR:var t=u.getResponseJson();Zu(Kp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Uu.TIMEOUT:Zu(Kp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new us(os.DEADLINE_EXCEEDED,"Request time out"));break;case Uu.HTTP_ERROR:var n=u.getStatus();if(Zu(Kp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(os).indexOf(t)>=0?t:os.UNKNOWN}(s.status);o(new us(c,s.message))}else o(new us(os.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new us(os.UNAVAILABLE,"Connection failed."));break;default:rs()}}finally{Zu(Kp,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Zu(Kp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=zp(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Fu(),o=Vu(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new qu({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");Zu(Kp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new Gp({ro:function(t){h?Zu(Kp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Zu(Kp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Zu(Kp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),v=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return v(l,Gu.EventType.OPEN,(function(){h||Zu(Kp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),v(l,Gu.EventType.CLOSE,(function(){h||(h=!0,Zu(Kp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),v(l,Gu.EventType.ERROR,(function(t){h||(h=!0,ts(Kp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new us(os.UNAVAILABLE,"The operation could not be completed")))})),v(l,Gu.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];is(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Zu(Kp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=fh[e];if(void 0!==t)return bh(t)}(u),c=o.message;void 0===s&&(s=os.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new us(s,c)),l.close()}else Zu(Kp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),v(o,ju.STAT_EVENT,(function(t){t.stat===zu.PROXY?Zu(Kp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===zu.NOPROXY&&Zu(Kp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){h(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return v(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=zp(),o=this.To(e,t);Zu("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return Zu("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw ts("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=qp[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function Wp(){return"undefined"!=typeof window?window:null}function Qp(){return"undefined"!=typeof document?document:null}function Xp(e){return new jh(e,!0)}var Yp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;h(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return v(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Zu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),$p=function(){function e(t,n,r,i,a,o,u,s){h(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Yp(t,n)}return v(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=ee($().mark((function e(t,n){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===os.RESOURCE_EXHAUSTED?(es(n.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===os.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=o(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new us(os.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(ee($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Zu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Zu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Jp=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return v(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:rs()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(is(void 0===t||"string"==typeof t),Gc.fromBase64String(t||"")):(is(void 0===t||t instanceof Uint8Array),Gc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?os.UNKNOWN:bh(e.code);return new us(t,e.message||"")}(o);n=new Rh(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Yh(e,s.document.name),l=Hh(s.document.updateTime),f=s.document.createTime?Hh(s.document.createTime):_s.min(),h=new wl({mapValue:{fields:s.document.fields}}),d=_l.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new Nh(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Yh(e,m.document),g=m.readTime?Hh(m.readTime):_s.min(),k=_l.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Nh([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Yh(e,w.document),_=w.removedTargetIds||[];n=new Nh([],_,x,null)}else{if(!("filter"in t))return rs();t.filter;var E=t.filter;E.targetId;var S=E.count,T=void 0===S?0:S,I=E.unchangedNames,C=new gh(T,I),A=E.targetId;n=new Ph(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return _s.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?_s.min():t.readTime?Hh(t.readTime):_s.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=Zh(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Jl(r)?{documents:od(e,r)}:{query:ud(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Gh(e,t.resumeToken);var i=zh(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(_s.min())>0){n.readTime=qh(e,t.snapshotVersion.toTimestamp());var a=zh(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rs()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=Zh(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}($p),Zp=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return v(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Er(k(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(is(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(is(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Hh(e.updateTime):Hh(t);return n.isEqual(_s.min())&&(n=Hh(t)),new $f(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Hh(e.commitTime);return this.listener.cu(n,t)}return is(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=Zh(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return id(t.serializer,e)}))};this.Wo(n)}}]),n}($p),em=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return v(n,[{key:"fu",value:function(){if(this.lu)throw new us(os.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=o(i,2),u=a[0],s=a[1];return r.connection.Io(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===os.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new us(os.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var u=o(a,2),s=u[0],c=u[1];return i.connection.vo(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===os.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new us(os.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return v((function e(){h(this,e)}))}());var tm=function(){function e(t,n){h(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return v(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(es(t),this.mu=!1):Zu("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),nm=v((function e(t,n,r,i,a){var o=this;h(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=dm(o),!e.t0){e.next=5;break}return Zu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ee($().mark((function e(t){var n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=as(t)).vu.add(4),e.next=4,am(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,rm(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new tm(r,i)}));function rm(e){return im.apply(this,arguments)}function im(){return(im=ee($().mark((function e(t){var n,r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dm(t)){e.next=18;break}n=p(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function am(e){return om.apply(this,arguments)}function om(){return(om=ee($().mark((function e(t){var n,r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function um(e,t){var n=as(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),hm(n)?fm(n):zm(n).Ko()&&cm(n,t))}function sm(e,t){var n=as(e),r=zm(n);n.Au.delete(t),r.Ko()&&lm(n,t),0===n.Au.size&&(r.Ko()?r.jo():dm(n)&&n.bu.set("Unknown"))}function cm(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_s.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zm(e).su(t)}function lm(e,t){e.Vu.qt(t),zm(e).iu(t)}function fm(e){e.Vu=new Lh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),zm(e).start(),e.bu.gu()}function hm(e){return dm(e)&&!zm(e).Uo()&&e.Au.size>0}function dm(e){return 0===as(e).vu.size}function vm(e){e.Vu=void 0}function pm(e){return mm.apply(this,arguments)}function mm(){return(mm=ee($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){cm(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ym(e,t){return gm.apply(this,arguments)}function gm(){return(gm=ee($().mark((function e(t,n){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vm(t),hm(t)?(t.bu.Iu(n),fm(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function km(e,t,n){return bm.apply(this,arguments)}function bm(){return bm=ee($().mark((function e(t,n,r){var i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof Rh&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ee($().mark((function e(t,n){var r,i,a,o;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=p(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Zu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,wm(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Nh?t.Vu.Ht(n):n instanceof Ph?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(_s.min())){e.next=29;break}return e.prev=14,e.next=17,vp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Gc.EMPTY_BYTE_STRING,r.snapshotVersion)),lm(e,t);var i=new gd(r.target,t,n,r.sequenceNumber);cm(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Zu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,wm(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),bm.apply(this,arguments)}function wm(e,t,n){return xm.apply(this,arguments)}function xm(){return(xm=ee($().mark((function e(t,n,r){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ws(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,am(t);case 5:t.bu.set("Offline"),r||(r=function(){return vp(t.localStore)}),t.asyncQueue.enqueueRetryable(ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,rm(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _m(e,t){return t().catch((function(n){return wm(e,n,t)}))}function Em(e){return Sm.apply(this,arguments)}function Sm(){return(Sm=ee($().mark((function e(t){var n,r,i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=as(t),r=qm(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!Tm(n)){e.next=19;break}return e.prev=3,e.next=6,yp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,Im(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,wm(n,e.t0);case 17:e.next=2;break;case 19:Cm(n)&&Am(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Tm(e){return dm(e)&&e.Eu.length<10}function Im(e,t){e.Eu.push(t);var n=qm(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Cm(e){return dm(e)&&!qm(e).Uo()&&e.Eu.length>0}function Am(e){qm(e).start()}function Dm(e){return Nm.apply(this,arguments)}function Nm(){return(Nm=ee($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qm(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pm(e){return Rm.apply(this,arguments)}function Rm(){return(Rm=ee($().mark((function e(t){var n,r,i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=qm(t),r=p(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Om(e,t,n){return Lm.apply(this,arguments)}function Lm(){return(Lm=ee($().mark((function e(t,n,r){var i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=mh.from(i,n,r),e.next=3,_m(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Em(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mm(e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=ee($().mark((function e(t,n){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&qm(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=ee($().mark((function e(t,n){var r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kh(i=n.code)||i===os.ABORTED){e.next=7;break}return r=t.Eu.shift(),qm(t).Qo(),e.next=5,_m(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Em(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Cm(t)&&Am(t);case 5:case"end":return e.stop()}}),e)}))),Fm.apply(this,arguments)}function Vm(e,t){return Um.apply(this,arguments)}function Um(){return(Um=ee($().mark((function e(t,n){var r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=as(t)).asyncQueue.verifyOperationInProgress(),Zu("RemoteStore","RemoteStore received new credentials"),i=dm(r),r.vu.add(3),e.next=6,am(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,rm(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bm(e,t){return jm.apply(this,arguments)}function jm(){return(jm=ee($().mark((function e(t,n){var r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=as(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,rm(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,am(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zm(e){return e.Su||(e.Su=function(e,t,n){var r=as(e);return r.fu(),new Jp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:pm.bind(null,e),ao:ym.bind(null,e),nu:km.bind(null,e)}),e.Ru.push(function(){var t=ee($().mark((function t(n){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),hm(e)?fm(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:vm(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function qm(e){return e.Du||(e.Du=function(e,t,n){var r=as(e);return r.fu(),new Zp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Dm.bind(null,e),ao:Mm.bind(null,e),au:Pm.bind(null,e),cu:Om.bind(null,e)}),e.Ru.push(function(){var t=ee($().mark((function t(n){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,Em(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Zu("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var Gm=function(){function e(t,n,r,i,a){h(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return v(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new us(os.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Km(e,t){if(es("AsyncQueue","".concat(t,": ").concat(e)),Ws(e))return new us(os.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Hm=function(){function e(t){h(this,e),this.comparator=t?function(e,n){return t(e,n)||Cs.comparator(e.key,n.key)}:function(e,t){return Cs.comparator(e.key,t.key)},this.keyedMap=Sf(),this.sortedSet=new Mc(this.comparator)}return v(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Wm=function(){function e(){h(this,e),this.Cu=new Mc(Cs.comparator)}return v(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):rs():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Qm=function(){function e(t,n,r,i,a,o,u,s,c){h(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return v(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Hm.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Xm=v((function e(){h(this,e),this.Nu=void 0,this.listeners=[]})),Ym=v((function e(){h(this,e),this.queries=new wf((function(e){return pf(e)}),vf),this.onlineState="Unknown",this.ku=new Set}));function $m(e,t){return Jm.apply(this,arguments)}function Jm(){return Jm=ee($().mark((function e(t,n){var r,i,a,o,u;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=as(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Xm),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Km(e.t0,"Initialization of query '".concat(mf(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&ry(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Jm.apply(this,arguments)}function Zm(e,t){return ey.apply(this,arguments)}function ey(){return ey=ee($().mark((function e(t,n){var r,i,a,o,u;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=as(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ey.apply(this,arguments)}function ty(e,t){var n,r=as(e),i=!1,a=p(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=p(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&ry(r)}function ny(e,t,n){var r=as(e),i=r.queries.get(t);if(i){var a,o=p(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function ry(e){e.ku.forEach((function(e){e.next()}))}var iy=function(){function e(t,n,r){h(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return v(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=p(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Qm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=Qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),ay=function(){function e(t,n){h(this,e),this.Gu=t,this.byteLength=n}return v(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),oy=function(){function e(t){h(this,e),this.serializer=t}return v(e,[{key:"rr",value:function(e){return Yh(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?nd(this.serializer,e.document,!1):_l.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return Hh(e)}}]),e}(),uy=function(){function e(t,n,r){h(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sy(t)}return v(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=Ss.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new oy(this.serializer),i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=p(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Pf()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ee($().mark((function e(){var t,n,r,i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sp(this.localStore,new oy(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=p(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Ip(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function sy(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var cy=v((function e(t){h(this,e),this.key=t})),ly=v((function e(t){h(this,e),this.key=t})),fy=function(){function e(t,n){h(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Pf(),this.mutatedKeys=Pf(),this.tc=kf(t),this.ec=new Hm(this.tc)}return v(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new Wm,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=yf(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.rc(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rs()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new Qm(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Wm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=Pf(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new ly(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new cy(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=Pf();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return Qm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),hy=v((function e(t,n,r){h(this,e),this.query=t,this.targetId=n,this.view=r})),dy=v((function e(t){h(this,e),this.key=t,this.fc=!1})),vy=function(){function e(t,n,r,i,a,o){h(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new wf((function(e){return pf(e)}),vf),this._c=new Map,this.mc=new Set,this.gc=new Mc(Cs.comparator),this.yc=new Map,this.Ic=new Kv,this.Tc={},this.Ec=new Map,this.Ac=bv.Mn(),this.onlineState="Unknown",this.vc=void 0}return v(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function py(e,t){return my.apply(this,arguments)}function my(){return my=ee($().mark((function e(t,n){var r,i,a,o,u,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=sg(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,gp(r.localStore,ff(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,yy(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&um(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),my.apply(this,arguments)}function yy(e,t,n,r,i){return gy.apply(this,arguments)}function gy(){return gy=ee($().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=ee($().mark((function e(t,n,r,i){var a,o,u;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,wp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Vy(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,wp(t.localStore,n,!0);case 3:return o=e.sent,u=new fy(n,o.ir),s=u.sc(o.documents),c=Dh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Vy(t,r,l.cc),f=new hy(n,r,u),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),gy.apply(this,arguments)}function ky(e,t){return by.apply(this,arguments)}function by(){return(by=ee($().mark((function e(t,n){var r,i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=as(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!vf(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,kp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),sm(r.remoteStore,i.targetId),My(r,i.targetId)})).catch(Bs);case 9:e.next=14;break;case 11:return My(r,i.targetId),e.next=14,kp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wy(e,t,n){return xy.apply(this,arguments)}function xy(){return xy=ee($().mark((function e(t,n,r){var i,a,o;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cg(t),e.prev=1,e.next=4,function(e,t){var n,r,i=as(e),a=xs.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Pf());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=_f(),s=Pf();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=p(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ih(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new uh(c.key,l,xl(l.value.mapValue),Jf.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Tf(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Mc(ks)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,jy(i,a.changes);case 9:return e.next=11,Em(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Km(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),xy.apply(this,arguments)}function _y(e,t){return Ey.apply(this,arguments)}function Ey(){return(Ey=ee($().mark((function e(t,n){var r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=as(t),e.prev=1,e.next=4,pp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(is(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?is(n.fc):e.removedDocuments.size>0&&(is(n.fc),n.fc=!1))})),e.next=8,jy(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Bs(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Sy(e,t,n){var r=as(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=as(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=p(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&ry(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ty(e,t,n){return Iy.apply(this,arguments)}function Iy(){return Iy=ee($().mark((function e(t,n,r){var i,a,o,u,s,c;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=as(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Mc(Cs.comparator)).insert(o,_l.newNoDocument(o,_s.min())),s=Pf().add(o),c=new Ah(_s.min(),new Map,new Mc(ks),u,s),e.next=9,_y(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),By(i),e.next=16;break;case 14:return e.next=16,kp(i.localStore,n,!1).then((function(){return My(i,n,r)})).catch(Bs);case 16:case"end":return e.stop()}}),e)}))),Iy.apply(this,arguments)}function Cy(e,t){return Ay.apply(this,arguments)}function Ay(){return(Ay=ee($().mark((function e(t,n){var r,i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=as(t),i=n.batch.batchId,e.prev=1,e.next=4,dp(r.localStore,n);case 4:return a=e.sent,Ly(r,i,null),Oy(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,jy(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Dy(e,t,n){return Ny.apply(this,arguments)}function Ny(){return(Ny=ee($().mark((function e(t,n,r){var i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=as(t),e.prev=1,e.next=4,function(e,t){var n=as(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return is(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Ly(i,n,r),Oy(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,jy(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Py(e,t){return Ry.apply(this,arguments)}function Ry(){return(Ry=ee($().mark((function e(t,n){var r,i,a,o;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dm((r=as(t)).remoteStore)||Zu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=as(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Km(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function Oy(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function Ly(e,t,n){var r=as(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function My(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=p(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||Fy(e,t)}))}function Fy(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(sm(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),By(e))}function Vy(e,t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof cy?(e.Ic.addReference(a.key,t),Uy(e,a)):a instanceof ly?(Zu("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||Fy(e,a.key)):rs()}}catch(o){i.e(o)}finally{i.f()}}function Uy(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Zu("SyncEngine","New document in limbo: "+n),e.mc.add(r),By(e))}function By(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new Cs(Ss.fromString(t)),r=e.Ac.next();e.yc.set(r,new dy(n)),e.gc=e.gc.insert(n,r),um(e.remoteStore,new gd(ff(af(n.path)),r,"TargetPurposeLimboResolution",ec.ct))}}function jy(e,t,n){return zy.apply(this,arguments)}function zy(){return zy=ee($().mark((function e(t,n,r){var i,a,o,u;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=as(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=up.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=ee($().mark((function e(t,n){var r,i,a,o,u,s,c,l;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=as(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return zs.forEach(n,(function(t){return zs.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return zs.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ws(e.t0)){e.next=10;break}throw e.t0;case 10:Zu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=p(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),zy.apply(this,arguments)}function qy(e,t){return Gy.apply(this,arguments)}function Gy(){return(Gy=ee($().mark((function e(t,n){var r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=as(t)).currentUser.isEqual(n)){e.next=11;break}return Zu("SyncEngine","User change. New user:",n.toKey()),e.next=5,fp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new us(os.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,jy(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ky(e,t){var n=as(e),r=n.yc.get(t);if(r&&r.fc)return Pf().add(r.key);var i=Pf(),a=n._c.get(t);if(!a)return i;var o,u=p(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function Hy(e,t){return Wy.apply(this,arguments)}function Wy(){return(Wy=ee($().mark((function e(t,n){var r,i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=as(t),e.next=3,wp(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&Vy(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qy(e,t){return Xy.apply(this,arguments)}function Xy(){return(Xy=ee($().mark((function e(t,n){var r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=as(t),e.abrupt("return",_p(r.localStore,n).then((function(e){return jy(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yy(e,t,n,r){return $y.apply(this,arguments)}function $y(){return $y=ee($().mark((function e(t,n,r,i){var a,o;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=as(t),e.next=3,function(e,t){var n=as(e),r=as(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):zs.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Em(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Ly(a,n,i||null),Oy(a,n),function(e,t){as(as(e).mutationQueue).Cn(t)}(a.localStore,n)):rs();case 11:return e.next=13,jy(a,o);case 13:e.next=16;break;case 15:Zu("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),$y.apply(this,arguments)}function Jy(e,t){return Zy.apply(this,arguments)}function Zy(){return(Zy=ee($().mark((function e(t,n){var r,i,a,o,u,s,c,l;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sg(r=as(t)),cg(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,eg(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,Bm(r.remoteStore,!0);case 9:o=p(a);try{for(o.s();!(u=o.n()).done;)s=u.value,um(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return My(r,t),kp(r.localStore,t,!0)})),sm(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,eg(r,c);case 21:return function(e){var t=as(e);t.yc.forEach((function(e,n){sm(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Mc(Cs.comparator)}(r),r.vc=!1,e.next=25,Bm(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eg(e,t,n){return tg.apply(this,arguments)}function tg(){return tg=ee($().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,v,m,y,g;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=as(t),a=[],o=[],u=p(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,gp(i.localStore,ff(f[0]));case 11:l=e.sent,h=p(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,m=i.wc.get(v),e.next=20,Hy(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,xp(i.localStore,c);case 36:return g=e.sent,e.next=39,gp(i.localStore,g);case 39:return l=e.sent,e.next=42,yy(i,ng(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),tg.apply(this,arguments)}function ng(e){return rf(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function rg(e){var t=as(e);return as(as(t.localStore).persistence).$i()}function ig(e,t,n,r){return ag.apply(this,arguments)}function ag(){return ag=ee($().mark((function e(t,n,r,i){var a,o,u,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=as(t)).vc){e.next=3;break}return e.abrupt("return",void Zu("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,_p(a.localStore,gf(o[0]));case 10:return u=e.sent,s=Ah.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Gc.EMPTY_BYTE_STRING),e.next=14,jy(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,kp(a.localStore,n,!0);case 17:return My(a,n,i),e.abrupt("break",20);case 19:rs();case 20:case"end":return e.stop()}}),e)}))),ag.apply(this,arguments)}function og(e,t,n){return ug.apply(this,arguments)}function ug(){return(ug=ee($().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=sg(t)).vc){e.next=45;break}a=p(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return Zu("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,xp(i.localStore,u);case 12:return s=e.sent,e.next=15,gp(i.localStore,s);case 15:return c=e.sent,e.next=18,yy(i,ng(s),c.targetId,!1,c.resumeToken);case 18:um(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=p(r),e.prev=30,h=$().mark((function e(){var t;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,kp(i.localStore,t,!1).then((function(){sm(i.remoteStore,t),My(i,t)})).catch(Bs);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function sg(e){var t=as(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=_y.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ky.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ty.bind(null,t),t.dc.nu=ty.bind(null,t.eventManager),t.dc.Pc=ny.bind(null,t.eventManager),t}function cg(e){var t=as(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Cy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Dy.bind(null,t),t}function lg(e,t,n){var r=as(e);(function(){var e=ee($().mark((function e(t,n,r){var i,a,o,u,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=as(e),r=Hh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(sy(i)),a=new uy(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,jy(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=as(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ts("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var fg=function(){function e(){h(this,e),this.synchronizeTabs=!1}return v(e,[{key:"initialize",value:function(){var e=ee($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Xp(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return lp(this.persistence,new sp,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new $v(Zv.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Vp}},{key:"terminate",value:function(){var e=ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),hg=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return v(n,[{key:"initialize",value:function(){var e=ee($().mark((function e(t){var r=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Er(k(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,cg(this.Vc.syncEngine);case 6:return e.next=8,Em(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return lp(this.persistence,new sp,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Iv(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Zs(t,this.persistence);return new Js(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=op(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hv.withCacheSize(this.cacheSizeBytes):hv.DEFAULT;return new rp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Wp(),Qp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Vp}}]),n}(fg),dg=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return v(n,[{key:"initialize",value:function(){var e=ee($().mark((function e(t){var r,i=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Er(k(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof Fp,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:Yy.bind(null,r),zr:ig.bind(null,r),Wr:og.bind(null,r),$i:rg.bind(null,r),Qr:Qy.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=ee($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jy(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Wp();if(!Fp.D(t))throw new us(os.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=op(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(hg),vg=function(){function e(){h(this,e)}return v(e,[{key:"initialize",value:function(){var e=ee($().mark((function e(t,n){var r=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Sy(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=qy.bind(null,this.syncEngine),e.next=12,Bm(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Ym}},{key:"createDatastore",value:function(e){var t,n=Xp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Hp(t));return function(e,t,n,r){return new em(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Sy(o.syncEngine,e,0)},a=Bp.D()?new Bp:new Up,new nm(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new vy(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ee($().mark((function e(t){var n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=as(t),Zu("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,am(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function pg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ee($().mark((function r(){var i;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var mg=function(){function e(t){h(this,e),this.observer=t,this.muted=!1}return v(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),yg=function(){function e(t,n){var r=this;h(this,e),this.Cc=t,this.serializer=n,this.metadata=new ss,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return v(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=ee($().mark((function e(){var t,n,r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new ay(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=ee($().mark((function e(){var t,n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=ee($().mark((function e(t){var n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=ee($().mark((function e(){var t,n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),gg=function(){function e(t){h(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return v(e,[{key:"lookup",value:function(){var e=ee($().mark((function e(t){var n,r=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new us(os.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ee($().mark((function e(t,n){var r,i,a,o,u,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=as(t),i=Zh(r.serializer)+"/documents",a={documents:n.map((function(e){return Xh(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=rd(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());is(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new dh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ee($().mark((function e(){var t,n=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Cs.fromPath(t);n.mutations.push(new vh(r,n.precondition(r)))})),e.next=7,function(){var e=ee($().mark((function e(t,n){var r,i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=as(t),i=Zh(r.serializer)+"/documents",a={writes:n.map((function(e){return id(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rs();t=_s.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new us(os.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_s.min())?Jf.exists(!1):Jf.updateTime(t):Jf.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_s.min()))throw new us(os.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jf.updateTime(t)}return Jf.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),kg=function(){function e(t,n,r,i,a){h(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new Yp(this.asyncQueue,"transaction_retry")}return v(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(ee($().mark((function t(){var n,r;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new gg(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!tc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!kh(t)}return!1}}]),e}(),bg=function(){function e(t,n,r,i){var a=this;h(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xu.UNAUTHENTICATED,this.clientId=gs.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ee($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Zu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return v(e,[{key:"getConfiguration",value:function(){var e=ee($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new us(os.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ee($().mark((function n(){var r;return $().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Km(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function wg(e,t){return xg.apply(this,arguments)}function xg(){return xg=ee($().mark((function e(t,n){var r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Zu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ee($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,fp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),xg.apply(this,arguments)}function _g(e,t){return Eg.apply(this,arguments)}function Eg(){return(Eg=ee($().mark((function e(t,n){var r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Tg(t);case 3:return r=e.sent,Zu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Vm(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Vm(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sg(e){return"FirebaseError"===e.name?e.code===os.FAILED_PRECONDITION||e.code===os.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Tg(e){return Ig.apply(this,arguments)}function Ig(){return(Ig=ee($().mark((function e(t){var n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Zu("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,wg(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Sg(n=e.t0)){e.next=13;break}throw n;case 13:return ts("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,wg(t,new fg);case 16:e.next=21;break;case 18:return Zu("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,wg(t,new fg);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Cg(e){return Ag.apply(this,arguments)}function Ag(){return(Ag=ee($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Zu("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,_g(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Zu("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,_g(t,new vg);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dg(e){return Tg(e).then((function(e){return e.persistence}))}function Ng(e){return Tg(e).then((function(e){return e.localStore}))}function Pg(e){return Cg(e).then((function(e){return e.remoteStore}))}function Rg(e){return Cg(e).then((function(e){return e.syncEngine}))}function Og(e){return Cg(e).then((function(e){return e.datastore}))}function Lg(e){return Mg.apply(this,arguments)}function Mg(){return(Mg=ee($().mark((function e(t){var n,r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cg(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=py.bind(null,n.syncEngine),r.onUnlisten=ky.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ss;return e.asyncQueue.enqueueAndForget(ee($().mark((function i(){return $().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new mg({next:function(a){t.enqueueAndForget((function(){return Zm(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new us(os.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new us(os.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new iy(af(n.path),a,{includeMetadataChanges:!0,Ku:!0});return $m(e,o)},i.next=3,Lg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Vg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ss;return e.asyncQueue.enqueueAndForget(ee($().mark((function i(){return $().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new mg({next:function(n){t.enqueueAndForget((function(){return Zm(e,o)})),n.fromCache&&"server"===r.source?i.reject(new us(os.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new iy(n,a,{includeMetadataChanges:!0,Ku:!0});return $m(e,o)},i.next=3,Lg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Ug(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Bg=new Map;function jg(e,t,n){if(!n)throw new us(os.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zg(e,t,n,r){if(!0===t&&!0===r)throw new us(os.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function qg(e){if(!Cs.isDocumentKey(e))throw new us(os.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Gg(e){if(Cs.isDocumentKey(e))throw new us(os.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Kg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":rs()}function Hg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new us(os.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Kg(e);throw new us(os.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Wg(e,t){if(t<=0)throw new us(os.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Qg=function(){function e(t){var n,r;if(h(this,e),void 0===t.host){if(void 0!==t.ssl)throw new us(os.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new us(os.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ug(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new us(os.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new us(os.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new us(os.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return v(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),Xg=function(){function e(t,n,r,i){h(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qg({}),this._settingsFrozen=!1}return v(e,[{key:"app",get:function(){if(!this._app)throw new us(os.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new us(os.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ls;switch(e.type){case"firstParty":return new vs(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new us(os.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Bg.get(e);t&&(Zu("ComponentProvider","Removing Datastore"),Bg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Yg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Hg(e,Xg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Xu.MOCK_USER;else{u=M(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new us(os.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Xu(c)}e._authCredentials=new fs(new cs(u,s))}}var $g=function(){function e(t,n,r){h(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return v(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Zg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Jg=function(){function e(t,n,r){h(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return v(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Zg=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,af(i)))._path=i,a.type="collection",a}return v(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new $g(this.firestore,null,new Cs(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Jg);function ek(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Y(e),jg("collection","path",t),e instanceof Xg){var a=Ss.fromString.apply(Ss,[t].concat(r));return Gg(a),new Zg(e,null,a)}if(!(e instanceof $g||e instanceof Zg))throw new us(os.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ss.fromString.apply(Ss,[t].concat(r)));return Gg(o),new Zg(e.firestore,null,o)}function tk(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Y(e),1===arguments.length&&(t=gs.A()),jg("doc","path",t),e instanceof Xg){var a=Ss.fromString.apply(Ss,[t].concat(r));return qg(a),new $g(e,null,new Cs(a))}if(!(e instanceof $g||e instanceof Zg))throw new us(os.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ss.fromString.apply(Ss,[t].concat(r)));return qg(o),new $g(e.firestore,e instanceof Zg?e.converter:null,new Cs(o))}function nk(e,t){return e=Y(e),t=Y(t),(e instanceof $g||e instanceof Zg)&&(t instanceof $g||t instanceof Zg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function rk(e,t){return e=Y(e),t=Y(t),e instanceof Jg&&t instanceof Jg&&e.firestore===t.firestore&&vf(e._query,t._query)&&e.converter===t.converter}var ik=function(){function e(){var t=this;h(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Yp(this,"async_queue_retry"),this.Xc=function(){var e=Qp();e&&Zu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=Qp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return v(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=Qp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new ss;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=ee($().mark((function e(){var t=this;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ws(e.t0)){e.next=12;break}throw e.t0;case 12:Zu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw es("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=Gm.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&rs()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=ee($().mark((function e(){var t;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=p(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=p(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function ak(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=p(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var ok=function(){function e(){h(this,e),this._progressObserver={},this._taskCompletionResolver=new ss,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return v(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),uk=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new ik,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return v(n,[{key:"_terminate",value:function(){return this._firestoreClient||ck(this),this._firestoreClient.terminate()}}]),n}(Xg);function sk(e){return e._firestoreClient||ck(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ck(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Jc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ug(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new bg(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function lk(e,t,n){var r=new ss;return e.asyncQueue.enqueue(ee($().mark((function i(){var a;return $().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,wg(e,n);case 3:return i.next=5,_g(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Sg(a=i.t0)){i.next=13;break}throw a;case 13:ts("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function fk(e){return function(e){return e.asyncQueue.enqueue(ee($().mark((function t(){var n,r;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dg(e);case 2:return n=t.sent,t.next=5,Pg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=as(e);return t.vu.delete(0),rm(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(sk(e=Hg(e,uk)))}function hk(e){return function(e){return e.asyncQueue.enqueue(ee($().mark((function t(){var n,r;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dg(e);case 2:return n=t.sent,t.next=5,Pg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ee($().mark((function e(t){var n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=as(t)).vu.add(0),e.next=4,am(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(sk(e=Hg(e,uk)))}function dk(e,t){var n=sk(e=Hg(e,uk)),r=new ok;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new yg(e,t)}(function(e,t){if(e instanceof Uint8Array)return pg(e,t);if(e instanceof ArrayBuffer)return pg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?_h().encode(e):e),t)}(n,Xp(t));e.asyncQueue.enqueueAndForget(ee($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lg,t.next=3,Rg(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function vk(e,t){return function(e,t){return e.asyncQueue.enqueue(ee($().mark((function n(){return $().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=as(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,Ng(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(sk(e=Hg(e,uk)),t).then((function(t){return t?new Jg(e,null,t.query):null}))}function pk(e){if(e._initialized||e._terminated)throw new us(os.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mk=function(){function e(t){h(this,e),this._byteString=t}return v(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Gc.fromBase64String(t))}catch(t){throw new us(os.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Gc.fromUint8Array(t))}}]),e}(),yk=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new us(os.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Is(n)}return v(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var gk=v((function e(t){h(this,e),this._methodName=t})),kk=function(){function e(t,n){if(h(this,e),!isFinite(t)||t<-90||t>90)throw new us(os.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new us(os.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return v(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ks(this._lat,e._lat)||ks(this._long,e._long)}}]),e}(),bk=/^__.*__$/,wk=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new uh(e,this.data,this.fieldMask,t,this.fieldTransforms):new oh(e,this.data,t,this.fieldTransforms)}}]),e}(),xk=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return new uh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function _k(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rs()}}var Ek=function(){function e(t,n,r,i,a,o){h(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return v(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return Gk(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(_k(this.ca)&&bk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),Sk=function(){function e(t,n,r){h(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Xp(t)}return v(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ek({ca:e,methodName:t,ga:n,path:Is.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Tk(e){var t=e._freezeSettings(),n=Xp(e._databaseId);return new Sk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ik(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);Bk("Data must be an object, but it was:",o,r);var u,s,c=Vk(r,o);if(a.merge)u=new zc(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=p(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,v=jk(t,d,n);if(!o.contains(v))throw new us(os.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));Kk(f,v)||f.push(v)}}catch(m){h.e(m)}finally{h.f()}u=new zc(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new wk(new wl(c),u,s)}var Ck=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gk);function Ak(e,t,n){return new Ek({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Dk=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){return new Yf(e.path,new zf)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gk),Nk=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).pa=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=Ak(this,e,!0),n=this.pa.map((function(e){return Fk(e,t)})),r=new qf(n);return new Yf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gk),Pk=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).pa=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=Ak(this,e,!0),n=this.pa.map((function(e){return Fk(e,t)})),r=new Kf(n);return new Yf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gk),Rk=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).Ia=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=new Wf(e.serializer,Ff(e.serializer,this.Ia));return new Yf(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gk);function Ok(e,t,n,r){var i=e.ya(1,t,n);Bk("Data must be an object, but it was:",i,r);var a=[],o=wl.empty();Oc(r,(function(e,r){var u=qk(t,e,n);r=Y(r);var s=i.da(u);if(r instanceof Ck)a.push(u);else{var c=Fk(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new zc(a);return new xk(o,u,i.fieldTransforms)}function Lk(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[jk(t,r,n)],s=[i];if(a.length%2!=0)throw new us(os.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(jk(t,a[c])),s.push(a[c+1]);for(var l=[],f=wl.empty(),h=u.length-1;h>=0;--h)if(!Kk(l,u[h])){var d=u[h],v=s[h];v=Y(v);var p=o.da(d);if(v instanceof Ck)l.push(d);else{var m=Fk(v,p);null!=m&&(l.push(d),f.set(d,m))}}var y=new zc(l);return new xk(f,y,o.fieldTransforms)}function Mk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Fk(n,e.ya(r?4:3,t))}function Fk(e,t){if(Uk(e=Y(e)))return Bk("Unsupported field value:",t,e),Vk(e,t);if(e instanceof gk)return function(e,t){if(!_k(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=p(e);try{for(a.s();!(n=a.n()).done;){var o=Fk(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Y(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ff(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=xs.fromDate(e);return{timestampValue:qh(t.serializer,n)}}if(e instanceof xs){var r=new xs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qh(t.serializer,r)}}if(e instanceof kk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mk)return{bytesValue:Gh(t.serializer,e._byteString)};if(e instanceof $g){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Wh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Kg(e)))}(e,t)}function Vk(e,t){var n={};return Lc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Oc(e,(function(e,r){var i=Fk(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Uk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof xs||e instanceof kk||e instanceof mk||e instanceof $g||e instanceof gk)}function Bk(e,t,n){if(!Uk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Kg(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function jk(e,t,n){if((t=Y(t))instanceof yk)return t._internalPath;if("string"==typeof t)return qk(e,t);throw Gk("Field path arguments must be of type string or ",e,!1,void 0,n)}var zk=new RegExp("[~\\*/\\[\\]]");function qk(e,t,n){if(t.search(zk)>=0)throw Gk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return _(yk,J(t.split(".")))._internalPath}catch(r){throw Gk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Gk(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new us(os.INVALID_ARGUMENT,u+e+s)}function Kk(e,t){return e.some((function(e){return e.isEqual(t)}))}var Hk=function(){function e(t,n,r,i,a){h(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return v(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new $g(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Wk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Qk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Wk=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){return Er(k(n.prototype),"data",this).call(this)}}]),n}(Hk);function Qk(e,t){return"string"==typeof t?qk(e,t):t instanceof yk?t._internalPath:t._delegate._internalPath}function Xk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new us(os.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yk=v((function e(){h(this,e)})),$k=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n)}(Yk);function Jk(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Yk&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof eb})).length,n=e.filter((function(e){return e instanceof Zk})).length;if(t>1||t>0&&n>0)throw new us(os.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=p(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;e=s._apply(e)}}catch(c){u.e(c)}finally{u.f()}return e}var Zk=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return v(n,[{key:"_apply",value:function(e){var t=this._parse(e);return hb(e._query,t),new Jg(e.firestore,e.converter,hf(e._query,t))}},{key:"_parse",value:function(e){var t=Tk(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new us(os.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){fb(o,a);var s,c=[],l=p(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(lb(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=lb(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||fb(o,a),u=Mk(n,"where",o,"in"===a||"not-in"===a);return Dl.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}($k);var eb=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return v(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Nl.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=p(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;hb(r,a),r=hf(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Jg(e.firestore,e.converter,hf(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Yk);var tb=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return v(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new us(os.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new us(os.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Il(t,n);return function(e,t){if(null===uf(e)){var n=sf(e);null!==n&&db(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Jg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new nf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}($k);var nb=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return v(n,[{key:"_apply",value:function(e){return new Jg(e.firestore,e.converter,df(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}($k);var rb=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return v(n,[{key:"_apply",value:function(e){var t=cb(e,this.type,this._docOrFields,this._inclusive);return new Jg(e.firestore,e.converter,function(e,t){return new nf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}($k);function ib(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rb._create("startAt",t,!0)}function ab(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rb._create("startAfter",t,!1)}var ob=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return v(n,[{key:"_apply",value:function(e){var t=cb(e,this.type,this._docOrFields,this._inclusive);return new Jg(e.firestore,e.converter,function(e,t){return new nf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}($k);function ub(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ob._create("endBefore",t,!1)}function sb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ob._create("endAt",t,!0)}function cb(e,t,n,r){if(n[0]=Y(n[0]),n[0]instanceof Hk)return function(e,t,n,r,i){if(!r)throw new us(os.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=p(lf(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(cl(t,r.key));else{var c=r.data.field(s.field);if(Xc(c))throw new us(os.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new us(os.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new El(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Tk(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new us(os.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new us(os.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!cf(e)&&-1!==c.indexOf("/"))throw new us(os.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ss.fromString(c));if(!Cs.isDocumentKey(l))throw new us(os.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Cs(l);u.push(cl(t,f))}else{var h=Mk(n,r,c);u.push(h)}}return new El(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function lb(e,t,n){if("string"==typeof(n=Y(n))){if(""===n)throw new us(os.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cf(t)&&-1!==n.indexOf("/"))throw new us(os.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ss.fromString(n));if(!Cs.isDocumentKey(r))throw new us(os.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return cl(e,new Cs(r))}if(n instanceof $g)return cl(e,n._key);throw new us(os.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Kg(n),"."))}function fb(e,t){if(!Array.isArray(e)||0===e.length)throw new us(os.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function hb(e,t){if(t.isInequality()){var n=sf(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new us(os.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=uf(e);null!==i&&db(e,r,i)}var a=function(e,t){var n,r=p(e);try{for(r.s();!(n=r.n()).done;){var i,a=p(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new us(os.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new us(os.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function db(e,t,n){if(!n.isEqual(t))throw new us(os.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var vb=function(){function e(){h(this,e)}return v(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rs()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Oc(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new kk(Wc(e.latitude),Wc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Yc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($c(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Hc(e);return new xs(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ss.fromString(e);is(yd(n));var r=new Zc(n.get(1),n.get(3)),i=new Cs(n.popFirst(5));return r.isEqual(t)||es("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function pb(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var mb=function(e){g(n,e);var t=x(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new mk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $g(this.firestore,null,t)}}]),n}(vb);var yb=function(){function e(t,n){h(this,e),this.hasPendingWrites=t,this.fromCache=n}return v(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),gb=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return v(n,[{key:"exists",value:function(){return Er(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new kb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Qk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Hk),kb=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Er(k(n.prototype),"data",this).call(this,e)}}]),n}(gb),bb=function(){function e(t,n,r,i){h(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new yb(i.hasPendingWrites,i.fromCache),this.query=r}return v(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new kb(n._firestore,n._userDataWriter,r.key,r,new yb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new us(os.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new kb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new kb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:wb(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function wb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rs()}}function xb(e,t){return e instanceof gb&&t instanceof gb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof bb&&t instanceof bb&&e._firestore===t._firestore&&rk(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var _b=function(e){g(n,e);var t=x(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new mk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $g(this.firestore,null,t)}}]),n}(vb);function Eb(e){e=Hg(e,$g);var t=Hg(e.firestore,uk),n=sk(t),r=new _b(t);return function(e,t){var n=new ss;return e.asyncQueue.enqueueAndForget(ee($().mark((function r(){return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ee($().mark((function e(t,n,r){var i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=as(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new us(os.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Km(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Ng(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new gb(t,r,e._key,n,new yb(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Sb(e){e=Hg(e,Jg);var t=Hg(e.firestore,uk),n=sk(t),r=new _b(t);return function(e,t){var n=new ss;return e.asyncQueue.enqueueAndForget(ee($().mark((function r(){return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ee($().mark((function e(t,n,r){var i,a,o,u,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp(t,n,!0);case 3:i=e.sent,a=new fy(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Km(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Ng(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new bb(t,r,e,n)}))}function Tb(e,t,n){e=Hg(e,$g);var r=Hg(e.firestore,uk),i=pb(e.converter,t,n);return Db(r,[Ik(Tk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Jf.none())])}function Ib(e,t,n){e=Hg(e,$g);for(var r=Hg(e.firestore,uk),i=Tk(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Db(r,[("string"==typeof(t=Y(t))||t instanceof yk?Lk(i,"updateDoc",e._key,t,n,o):Ok(i,"updateDoc",e._key,t)).toMutation(e._key,Jf.exists(!0))])}function Cb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Y(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||ak(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(ak(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof $g)l=Hg(e.firestore,uk),f=af(e._key.path),c={next:function(t){n[s]&&n[s](Nb(l,e,t))},error:n[s+1],complete:n[s+2]};else{var v=Hg(e,Jg);l=Hg(v.firestore,uk),f=v._query;var p=new _b(l);c={next:function(e){n[s]&&n[s](new bb(l,p,v,e))},error:n[s+1],complete:n[s+2]},Xk(e._query)}return function(e,t,n,r){var i=new mg(r),a=new iy(t,i,n);return e.asyncQueue.enqueueAndForget(ee($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=$m,t.next=3,Lg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(ee($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Zm,t.next=3,Lg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(sk(l),f,h,c)}function Ab(e,t){return function(e,t){var n=new mg(t);return e.asyncQueue.enqueueAndForget(ee($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){as(e).ku.add(t),t.next()},t.next=3,Lg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(ee($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){as(e).ku.delete(t)},t.next=3,Lg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(sk(e=Hg(e,uk)),ak(t)?t:{next:t})}function Db(e,t){return function(e,t){var n=new ss;return e.asyncQueue.enqueueAndForget(ee($().mark((function r(){return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=wy,r.next=3,Rg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(sk(e),t)}function Nb(e,t,n){var r=n.docs.get(t._key),i=new _b(e);return new gb(e,i,t._key,r,new yb(n.hasPendingWrites,n.fromCache),t.converter)}var Pb={maxAttempts:5},Rb=function(){function e(t,n){h(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tk(t)}return v(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Ob(e,this._firestore),i=pb(r.converter,t,n),a=Ik(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Jf.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Ob(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Y(t))||t instanceof yk?Lk(this._dataReader,"WriteBatch.update",i._key,t,n,o):Ok(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Jf.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Ob(e,this._firestore);return this._mutations=this._mutations.concat(new dh(t._key,Jf.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new us(os.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Ob(e,t){if((e=Y(e)).firestore!==t)throw new us(os.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Lb=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r))._firestore=e,i}return v(n,[{key:"get",value:function(e){var t=this,r=Ob(e,this._firestore),i=new _b(this._firestore);return Er(k(n.prototype),"get",this).call(this,e).then((function(e){return new gb(t._firestore,i,r._key,e._document,new yb(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){h(this,e),this._firestore=t,this._transaction=n,this._dataReader=Tk(t)}return v(e,[{key:"get",value:function(e){var t=this,n=Ob(e,this._firestore),r=new mb(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return rs();var i=e[0];if(i.isFoundDocument())return new Hk(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Hk(t._firestore,r,n._key,null,n.converter);throw rs()}))}},{key:"set",value:function(e,t,n){var r=Ob(e,this._firestore),i=pb(r.converter,t,n),a=Ik(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Ob(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Y(t))||t instanceof yk?Lk(this._dataReader,"Transaction.update",i._key,t,n,o):Ok(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Ob(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Mb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nk("arrayUnion",t)}function Fb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Pk("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Yu=e}(Qe),je(new te("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new uk(new hs(e.getProvider("auth-internal")),new ms(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new us(os.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),et(Qu,"3.13.0",e),et(Qu,"3.13.0","esm2017")}();function Vb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new us("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ub(){if("undefined"===typeof Uint8Array)throw new us("unimplemented","Uint8Arrays are not available in this environment.")}function Bb(){if("undefined"==typeof atob)throw new us("unimplemented","Blobs are unavailable in Firestore in this environment.")}var jb=function(){function e(t){h(this,e),this._delegate=t}return v(e,[{key:"toBase64",value:function(){return Bb(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Ub(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Bb(),new e(mk.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Ub(),new e(mk.fromUint8Array(t))}}]),e}();function zb(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=p(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var qb=function(){function e(){h(this,e)}return v(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){pk(e=Hg(e,uk));var n=sk(e);if(n._uninitializedComponentsProvider)throw new us(os.FAILED_PRECONDITION,"SDK cache is already specified.");ts("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new vg;return lk(n,i,new hg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){pk(e=Hg(e,uk));var t=sk(e);if(t._uninitializedComponentsProvider)throw new us(os.FAILED_PRECONDITION,"SDK cache is already specified.");ts("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new vg;return lk(t,r,new dg(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new us(os.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ss;return e._queue.enqueueAndForgetEvenWhileRestricted(ee($().mark((function n(){return $().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ee($().mark((function e(t){var n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gs.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Gs.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(op(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Gb=function(){function e(t,n,r){var i=this;h(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Zc||(this._appCompat=t)}return v(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ts("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Yg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return fk(this._delegate)}},{key:"disableNetwork",value:function(){return hk(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&zg("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new ss;return e.asyncQueue.enqueueAndForget(ee($().mark((function n(){return $().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Py,n.next=3,Rg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(sk(Hg(this._delegate,uk)))}},{key:"onSnapshotsInSync",value:function(e){return Ab(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new us("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new iw(this,ek(this._delegate,e))}catch(t){throw Yb(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Xb(this,tk(this._delegate,e))}catch(t){throw Yb(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new tw(this,function(e,t){if(e=Hg(e,Xg),jg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new us(os.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Jg(e,null,function(e){return new nf(Ss.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Yb(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Hg(e,uk);var r=Object.assign(Object.assign({},Pb),n);return function(e){if(e.maxAttempts<1)throw new us(os.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ss;return e.asyncQueue.enqueueAndForget(ee($().mark((function i(){var a;return $().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Og(e);case 2:a=i.sent,new kg(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(sk(e),(function(n){return t(new Lb(e,n))}),r)}(this._delegate,(function(n){return e(new Hb(t,n))}))}},{key:"batch",value:function(){var e=this;return sk(this._delegate),new Wb(new Rb(this._delegate,(function(t){return Db(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return dk(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return vk(this._delegate,e).then((function(e){return e?new tw(t,e):null}))}}]),e}(),Kb=function(e){g(n,e);var t=x(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new jb(new mk(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Xb.forKey(t,this.firestore,null)}}]),n}(vb);var Hb=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Kb(t)}return v(e,[{key:"get",value:function(e){var t=this,n=aw(e);return this._delegate.get(n).then((function(e){return new Zb(t._firestore,new gb(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=aw(e);return n?(Vb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=aw(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=aw(e);return this._delegate.delete(t),this}}]),e}(),Wb=function(){function e(t){h(this,e),this._delegate=t}return v(e,[{key:"set",value:function(e,t,n){var r=aw(e);return n?(Vb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=aw(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=aw(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Qb=function(){function e(t,n,r){h(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return v(e,[{key:"fromFirestore",value:function(e,t){var n=new kb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ew(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Kb(t),n),i.set(n,a)),a}}]),e}();Qb.INSTANCES=new WeakMap;var Xb=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Kb(t)}return v(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new iw(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new iw(this.firestore,ek(this._delegate,e))}catch(t){throw Yb(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Y(e))instanceof $g&&nk(this._delegate,e)}},{key:"set",value:function(e,t){t=Vb("DocumentReference.set",t);try{return t?Tb(this._delegate,e,t):Tb(this._delegate,e)}catch(n){throw Yb(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Ib(this._delegate,e):Ib.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Yb(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Db(Hg((e=this._delegate).firestore,uk),[new dh(e._key,Jf.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$b(n),a=Jb(n,(function(t){return new Zb(e.firestore,new gb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Cb(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Eb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Hg(e,$g);var t=Hg(e.firestore,uk);return Fg(sk(t),e._key,{source:"server"}).then((function(n){return Nb(t,e,n)}))}(this._delegate):function(e){e=Hg(e,$g);var t=Hg(e.firestore,uk);return Fg(sk(t),e._key).then((function(n){return Nb(t,e,n)}))}(this._delegate)).then((function(e){return new Zb(t.firestore,new gb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Qb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new us("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new $g(n._delegate,r,new Cs(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new $g(n._delegate,r,t))}}]),e}();function Yb(e,t,n){return e.message=e.message.replace(t,n),e}function $b(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!zb(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Jb(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=zb(e[0])?e[0]:zb(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Zb=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"ref",get:function(){return new Xb(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return xb(this._delegate,e._delegate)}}]),e}(),ew=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||rs(),t}}]),n}(Zb),tw=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Kb(t)}return v(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Jk(this._delegate,function(e,t,n){var r=t,i=Qk("where",e);return Zk._create(i,r,n)}(t,n,r)))}catch(i){throw Yb(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Jk(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=Qk("orderBy",e);return tb._create(r,n)}(t,n)))}catch(r){throw Yb(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Jk(this._delegate,(Wg("limit",n=t),nb._create("limit",n,"F"))))}catch(r){throw Yb(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Jk(this._delegate,(Wg("limitToLast",n=t),nb._create("limitToLast",n,"L"))))}catch(r){throw Yb(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,Jk(this._delegate,ib.apply(void 0,arguments)))}catch(t){throw Yb(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Jk(this._delegate,ab.apply(void 0,arguments)))}catch(t){throw Yb(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Jk(this._delegate,ub.apply(void 0,arguments)))}catch(t){throw Yb(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Jk(this._delegate,sb.apply(void 0,arguments)))}catch(t){throw Yb(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return rk(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Sb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Hg(e,Jg);var t=Hg(e.firestore,uk),n=sk(t),r=new _b(t);return Vg(n,e._query,{source:"server"}).then((function(n){return new bb(t,r,e,n)}))}(this._delegate):function(e){e=Hg(e,Jg);var t=Hg(e.firestore,uk),n=sk(t),r=new _b(t);return Xk(e._query),Vg(n,e._query).then((function(n){return new bb(t,r,e,n)}))}(this._delegate)).then((function(e){return new rw(t.firestore,new bb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$b(n),a=Jb(n,(function(t){return new rw(e.firestore,new bb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Cb(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Qb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),nw=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ew(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),rw=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"query",get:function(){return new tw(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new ew(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new nw(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new ew(n._firestore,r))}))}},{key:"isEqual",value:function(e){return xb(this._delegate,e._delegate)}}]),e}(),iw=function(e){g(n,e);var t=x(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return v(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Xb(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Xb(this.firestore,void 0===e?tk(this._delegate):tk(this._delegate,e))}catch(t){throw Yb(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Hg(e.firestore,uk),r=tk(e),i=pb(e.converter,t);return Db(n,[Ik(Tk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Jf.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Xb(t.firestore,e)}))}},{key:"isEqual",value:function(e){return nk(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Qb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(tw);function aw(e){return Hg(e,$g)}var ow,uw=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=_(yk,n)}return v(e,[{key:"isEqual",value:function(e){return(e=Y(e))instanceof yk&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Is.keyField().canonicalString())}}]),e}(),sw=function(){function e(t){h(this,e),this._delegate=t}return v(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Dk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Ck("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Mb.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Fb.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new Rk("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),cw={Firestore:Gb,GeoPoint:kk,Timestamp:xs,Blob:jb,Transaction:Hb,WriteBatch:Wb,DocumentReference:Xb,DocumentSnapshot:Zb,Query:tw,QueryDocumentSnapshot:ew,QuerySnapshot:rw,CollectionReference:iw,FieldPath:uw,FieldValue:sw,setLogLevel:function(e){var t;t=e,$u.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new te("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},cw)))})(ow=Et,(function(e,t){return new Gb(e,t,new qb)})),ow.registerVersion("@firebase/firestore-compat","0.3.12");Et.initializeApp({apiKey:"AIzaSyCesajkIceGBh1vebT1zAhpIIHCt4ymFe8",authDomain:"gallery-d47fa.firebaseapp.com",projectId:"gallery-d47fa",storageBucket:"gallery-d47fa.appspot.com",messagingSenderId:"826884323000",appId:"1:826884323000:web:01c1990550d69fc128e64d"});var lw=Et.storage(),fw=Et.firestore(),hw=Et.firestore.FieldValue.serverTimestamp,dw=function(e){var n=o((0,t.useState)([]),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){var t=fw.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(f(f({},e.data()),{},{id:e.id}))})),i(t)}));return function(){return t()}}),[e]),{docs:r}},vw=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),pw=(0,t.createContext)({});var mw=(0,t.createContext)(null),yw="undefined"!==typeof document,gw=yw?t.useLayoutEffect:t.useEffect,kw=(0,t.createContext)({strict:!1});function bw(e,n,r,i){var a=(0,t.useContext)(pw).visualElement,o=(0,t.useContext)(kw),u=(0,t.useContext)(mw),s=(0,t.useContext)(vw).reducedMotion,c=(0,t.useRef)();i=i||o.renderer,!c.current&&i&&(c.current=i(e,{visualState:n,parent:a,props:r,presenceId:u?u.id:void 0,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:s}));var l=c.current;return gw((function(){l&&l.render()})),(0,t.useEffect)((function(){l&&l.animationState&&l.animationState.animateChanges()})),gw((function(){return function(){return l&&l.notify("Unmount")}}),[]),l}function ww(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function xw(e){return"string"===typeof e||Array.isArray(e)}function _w(e){return"object"===typeof e&&"function"===typeof e.start}var Ew=["initial","animate","exit","whileHover","whileDrag","whileTap","whileFocus","whileInView"];function Sw(e){return _w(e.animate)||Ew.some((function(t){return xw(e[t])}))}function Tw(e){return Boolean(Sw(e)||e.variants)}function Iw(e){var n=function(e,t){if(Sw(e)){var n=e.initial,r=e.animate;return{initial:!1===n||xw(n)?n:void 0,animate:xw(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(pw)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[Cw(r),Cw(i)])}function Cw(e){return Array.isArray(e)?e.join(" "):e}var Aw=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},Dw={measureLayout:Aw(["layout","layoutId","drag"]),animation:Aw(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:Aw(["exit"]),drag:Aw(["drag","dragControls"]),focus:Aw(["whileFocus"]),hover:Aw(["whileHover","onHoverStart","onHoverEnd"]),tap:Aw(["whileTap","onTap","onTapStart","onTapCancel"]),pan:Aw(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:Aw(["whileInView","onViewportEnter","onViewportLeave"])};function Nw(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}var Pw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Rw=1;var Ow=(0,t.createContext)({}),Lw=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"getSnapshotBeforeUpdate",value:function(){var e=this.props,t=e.visualElement,n=e.props;return t&&t.setProps(n),null}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.props.children}}]),n}(t.Component),Mw=(0,t.createContext)({}),Fw=Symbol.for("motionComponentSymbol");function Vw(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.projectionNodeConstructor,a=e.useRender,o=e.useVisualState,u=e.Component;n&&function(e){for(var t in e)"projectionNodeConstructor"===t?Dw.projectionNodeConstructor=e[t]:Dw[t].Component=e[t]}(n);var s=(0,t.forwardRef)((function(e,s){var c=f(f(f({},(0,t.useContext)(vw)),e),{},{layoutId:Uw(e)}),l=c.isStatic,h=null,d=Iw(e),v=l?void 0:Nw((function(){if(Pw.hasEverUpdated)return Rw++})),p=o(e,l);if(!l&&yw){d.visualElement=bw(u,p,c,r);var m=(0,t.useContext)(kw).strict,y=(0,t.useContext)(Mw);d.visualElement&&(h=d.visualElement.loadFeatures(c,m,n,v,i||Dw.projectionNodeConstructor,y))}return t.createElement(Lw,{visualElement:d.visualElement,props:c},h,t.createElement(pw.Provider,{value:d},a(u,e,v,function(e,n,r){return(0,t.useCallback)((function(t){t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):ww(r)&&(r.current=t))}),[n])}(p,d.visualElement,s),p,l,d.visualElement)))}));return s[Fw]=u,s}function Uw(e){var n=e.layoutId,r=(0,t.useContext)(Ow).id;return r&&void 0!==n?r+"-"+n:n}function Bw(e){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vw(e(t,n))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var jw=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zw(e){return"string"===typeof e&&!e.includes("-")&&!!(jw.indexOf(e)>-1||/[A-Z]/.test(e))}var qw={};var Gw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Kw=new Set(Gw);function Hw(e,t){var n=t.layout,r=t.layoutId;return Kw.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!qw[e]||"opacity"===e)}var Ww=function(e){return!!(null===e||void 0===e?void 0:e.getVelocity)},Qw={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Xw=function(e,t){return Gw.indexOf(e)-Gw.indexOf(t)};function Yw(e){return e.startsWith("--")}var $w=function(e,t){return t&&"number"===typeof e?t.transform(e):e},Jw=function(e,t,n){return Math.min(Math.max(n,e),t)},Zw={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},ex=f(f({},Zw),{},{transform:function(e){return Jw(0,1,e)}}),tx=f(f({},Zw),{},{default:1}),nx=function(e){return Math.round(1e5*e)/1e5},rx=/(-)?([\d]*\.?[\d])+/g,ix=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ax=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ox(e){return"string"===typeof e}var ux=function(e){return{test:function(t){return ox(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},sx=ux("deg"),cx=ux("%"),lx=ux("px"),fx=ux("vh"),hx=ux("vw"),dx=f(f({},cx),{},{parse:function(e){return cx.parse(e)/100},transform:function(e){return cx.transform(100*e)}}),vx=f(f({},Zw),{},{transform:Math.round}),px={borderWidth:lx,borderTopWidth:lx,borderRightWidth:lx,borderBottomWidth:lx,borderLeftWidth:lx,borderRadius:lx,radius:lx,borderTopLeftRadius:lx,borderTopRightRadius:lx,borderBottomRightRadius:lx,borderBottomLeftRadius:lx,width:lx,maxWidth:lx,height:lx,maxHeight:lx,size:lx,top:lx,right:lx,bottom:lx,left:lx,padding:lx,paddingTop:lx,paddingRight:lx,paddingBottom:lx,paddingLeft:lx,margin:lx,marginTop:lx,marginRight:lx,marginBottom:lx,marginLeft:lx,rotate:sx,rotateX:sx,rotateY:sx,rotateZ:sx,scale:tx,scaleX:tx,scaleY:tx,scaleZ:tx,skew:sx,skewX:sx,skewY:sx,distance:lx,translateX:lx,translateY:lx,translateZ:lx,x:lx,y:lx,z:lx,perspective:lx,transformPerspective:lx,opacity:ex,originX:dx,originY:dx,originZ:lx,zIndex:vx,fillOpacity:ex,strokeOpacity:ex,numOctaves:vx};function mx(e,t,n,r){var i=e.style,a=e.vars,o=e.transform,u=e.transformKeys,s=e.transformOrigin;u.length=0;var c=!1,l=!1,f=!0;for(var h in t){var d=t[h];if(Yw(h))a[h]=d;else{var v=px[h],m=$w(d,v);if(Kw.has(h)){if(c=!0,o[h]=m,u.push(h),!f)continue;d!==(v.default||0)&&(f=!1)}else h.startsWith("origin")?(l=!0,s[h]=m):i[h]=m}}if(t.transform||(c||r?i.transform=function(e,t,n,r){var i=e.transform,a=e.transformKeys,o=t.enableHardwareAcceleration,u=void 0===o||o,s=t.allowTransformNone,c=void 0===s||s,l="";a.sort(Xw);var f,h=p(a);try{for(h.s();!(f=h.n()).done;){var d=f.value;l+="".concat(Qw[d]||d,"(").concat(i[d],") ")}}catch(v){h.e(v)}finally{h.f()}return u&&!i.z&&(l+="translateZ(0)"),l=l.trim(),r?l=r(i,n?"":l):c&&n&&(l="none"),l}(e,n,f,r):i.transform&&(i.transform="none")),l){var y=s.originX,g=void 0===y?"50%":y,k=s.originY,b=void 0===k?"50%":k,w=s.originZ,x=void 0===w?0:w;i.transformOrigin="".concat(g," ").concat(b," ").concat(x)}}var yx=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function gx(e,t,n){for(var r in t)Ww(t[r])||Hw(r,n)||(e[r]=t[r])}function kx(e,n,r){var i={};return gx(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};return mx(e,n,{enableHardwareAcceleration:!r},i),Object.assign({},e.vars,e.style)}),[n])}(e,n,r)),e.transformValues?e.transformValues(i):i}function bx(e,t,n){var r={},i=kx(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),r.style=i,r}var wx=new Set(["initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onHoverStart","onHoverEnd","layoutScroll"].concat(["whileInView","onViewportEnter","onViewportLeave","viewport"],["whileTap","onTap","onTapStart","onTapCancel"],["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"],["onPan","onPanStart","onPanSessionStart","onPanEnd"]));function xx(e){return wx.has(e)}var _x,Ex=function(e){return!xx(e)};try{(_x=require("@emotion/is-prop-valid").default)&&(Ex=function(e){return e.startsWith("on")?!xx(e):_x(e)})}catch(ng){}function Sx(e,t,n){var r={};for(var i in e)(Ex(i)||!0===n&&xx(i)||!t&&!xx(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function Tx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ix(e,t,n){return"string"===typeof e?e:lx.transform(t+n*e)}var Cx={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ax={offset:"strokeDashoffset",array:"strokeDasharray"};var Dx=["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"];function Nx(e,t,n,r,i){var a=t.attrX,o=t.attrY,u=t.originX,s=t.originY,c=t.pathLength,l=t.pathSpacing,f=void 0===l?1:l,h=t.pathOffset,d=void 0===h?0:h;if(mx(e,Tx(t,Dx),n,i),r)e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);else{e.attrs=e.style,e.style={};var v=e.attrs,p=e.style,m=e.dimensions;v.transform&&(m&&(p.transform=v.transform),delete v.transform),m&&(void 0!==u||void 0!==s||p.transform)&&(p.transformOrigin=function(e,t,n){var r=Ix(t,e.x,e.width),i=Ix(n,e.y,e.height);return"".concat(r," ").concat(i)}(m,void 0!==u?u:.5,void 0!==s?s:.5)),void 0!==a&&(v.x=a),void 0!==o&&(v.y=o),void 0!==c&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;var a=i?Cx:Ax;e[a.offset]=lx.transform(-r);var o=lx.transform(t),u=lx.transform(n);e[a.array]="".concat(o," ").concat(u)}(v,c,f,d,!1)}}var Px=function(){return f(f({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{},{attrs:{}})},Rx=function(e){return"string"===typeof e&&"svg"===e.toLowerCase()};function Ox(e,n,r,i){var a=(0,t.useMemo)((function(){var t=Px();return Nx(t,n,{enableHardwareAcceleration:!1},Rx(i),e.transformTemplate),f(f({},t.attrs),{},{style:f({},t.style)})}),[n]);if(e.style){var o={};gx(o,e.style,e),a.style=f(f({},o),a.style)}return a}function Lx(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=function(n,r,i,a,o,u){var s=o.latestValues,c=(zw(n)?Ox:bx)(r,s,u,n),l=f(f(f({},Sx(r,"string"===typeof n,e)),c),{},{ref:a});return i&&(l["data-projection-id"]=i),(0,t.createElement)(n,l)};return n}var Mx=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};function Fx(e,t,n,r){var i=t.style,a=t.vars;for(var o in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),a)e.style.setProperty(o,a[o])}var Vx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ux(e,t,n,r){for(var i in Fx(e,t,void 0,r),t.attrs)e.setAttribute(Vx.has(i)?i:Mx(i),t.attrs[i])}function Bx(e){var t=e.style,n={};for(var r in t)(Ww(t[r])||Hw(r,e))&&(n[r]=t[r]);return n}function jx(e){var t=Bx(e);for(var n in e){if(Ww(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function zx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}var qx=function(e){return Array.isArray(e)},Gx=function(e){return qx(e)?e[e.length-1]||0:e};function Kx(e){var t=Ww(e)?e.get():e;return function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)}(t)?t.toValue():t}var Hx=["transitionEnd","transition"];var Wx=function(e){return function(n,r){var i=(0,t.useContext)(pw),a=(0,t.useContext)(mw),o=function(){return function(e,t,n,r){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,u={latestValues:Qx(t,n,r,i),renderState:a()};return o&&(u.mount=function(e){return o(t,e,u)}),u}(e,n,i,a)};return r?o():Nw(o)}};function Qx(e,t,n,r){var i={},a=r(e);for(var o in a)i[o]=Kx(a[o]);var u=e.initial,s=e.animate,c=Sw(e),l=Tw(e);t&&l&&!c&&!1!==e.inherit&&(void 0===u&&(u=t.initial),void 0===s&&(s=t.animate));var f=!!n&&!1===n.initial,h=(f=f||!1===u)?s:u;h&&"boolean"!==typeof h&&!_w(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var n=zx(e,t);if(n){var r=n.transitionEnd,a=(n.transition,Tx(n,Hx));for(var o in a){var u=a[o];if(Array.isArray(u))u=u[f?u.length-1:0];null!==u&&(i[o]=u)}for(var s in r)i[s]=r[s]}}));return i}var Xx,Yx={useVisualState:Wx({scrapeMotionValuesFromProps:jx,createRenderState:Px,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(a){r.dimensions={x:0,y:0,width:0,height:0}}Nx(r,i,{enableHardwareAcceleration:!1},Rx(t.tagName),e.transformTemplate),Ux(t,r)}})},$x={useVisualState:Wx({scrapeMotionValuesFromProps:Bx,createRenderState:yx})};function Jx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}function Zx(e,n,r,i){(0,t.useEffect)((function(){var t=e.current;if(r&&t)return Jx(t,n,r,i)}),[e,n,r,i])}function e_(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function t_(e){return!!e.touches}function n_(e){return function(t){var n=t instanceof MouseEvent;(!n||n&&0===t.button)&&e(t)}}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(Xx||(Xx={}));var r_={pageX:0,pageY:0};function i_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page",n=e.touches[0]||e.changedTouches[0],r=n||r_;return{x:r[t+"X"],y:r[t+"Y"]}}function a_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{x:e[t+"X"],y:e[t+"Y"]}}function o_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:t_(e)?i_(e,t):a_(e,t)}}var u_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(t){return e(t,o_(t))};return t?n_(n):n},s_={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},c_={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function l_(e){return yw&&null===window.onpointerdown?e:yw&&null===window.ontouchstart?c_[e]:yw&&null===window.onmousedown?s_[e]:e}function f_(e,t,n,r){return Jx(e,l_(t),u_(n,"pointerdown"===t),r)}function h_(e,t,n,r){return Zx(e,l_(t),n&&u_(n,"pointerdown"===t),r)}function d_(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var v_=d_("dragHorizontal"),p_=d_("dragVertical");function m_(e){var t=!1;if("y"===e)t=p_();else if("x"===e)t=v_();else{var n=v_(),r=p_();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function y_(){var e=m_(!0);return!e||(e(),!1)}function g_(e,t,n){return function(r,i){e_(r)&&!y_()&&(e.animationState&&e.animationState.setActive(Xx.Hover,t),n&&n(r,i))}}var k_=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))};function b_(e){return(0,t.useEffect)((function(){return function(){return e()}}),[])}var w_=function(e,t){return function(n){return t(e(n))}},x_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(w_)};new Set;var __=["root"],E_=new WeakMap,S_=new WeakMap,T_=function(e){var t=E_.get(e.target);t&&t(e)},I_=function(e){e.forEach(T_)};function C_(e,t,n){var r=function(e){var t=e.root,n=Tx(e,__),r=t||document;S_.has(r)||S_.set(r,{});var i=S_.get(r),a=JSON.stringify(n);return i[a]||(i[a]=new IntersectionObserver(I_,f({root:t},n))),i[a]}(t);return E_.set(e,n),r.observe(e),function(){E_.delete(e),r.unobserve(e)}}var A_={some:0,all:1};function D_(e,n,r,i){var a=i.root,o=i.margin,u=i.amount,s=void 0===u?"some":u,c=i.once;(0,t.useEffect)((function(){if(e&&r.current){var t={root:null===a||void 0===a?void 0:a.current,rootMargin:o,threshold:"number"===typeof s?s:A_[s]};return C_(r.current,t,(function(e){var t=e.isIntersecting;if(n.isInView!==t&&(n.isInView=t,!c||t||!n.hasEnteredView)){t&&(n.hasEnteredView=!0),r.animationState&&r.animationState.setActive(Xx.InView,t);var i=r.getProps(),a=t?i.onViewportEnter:i.onViewportLeave;a&&a(e)}}))}}),[e,a,o,s])}function N_(e,n,r,i){var a=i.fallback,o=void 0===a||a;(0,t.useEffect)((function(){e&&o&&requestAnimationFrame((function(){n.hasEnteredView=!0;var e=r.getProps().onViewportEnter;e&&e(null),r.animationState&&r.animationState.setActive(Xx.InView,!0)}))}),[e])}var P_=function(e){return function(t){return e(t),null}},R_={inView:P_((function(e){var n=e.visualElement,r=e.whileInView,i=e.onViewportEnter,a=e.onViewportLeave,o=e.viewport,u=void 0===o?{}:o,s=(0,t.useRef)({hasEnteredView:!1,isInView:!1}),c=Boolean(r||i||a);u.once&&s.current.hasEnteredView&&(c=!1),("undefined"===typeof IntersectionObserver?N_:D_)(c,s.current,n,u)})),tap:P_((function(e){var n=e.onTap,r=e.onTapStart,i=e.onTapCancel,a=e.whileTap,o=e.visualElement,u=n||r||i||a,s=(0,t.useRef)(!1),c=(0,t.useRef)(null),l={passive:!(r||n||i||p)};function f(){c.current&&c.current(),c.current=null}function h(){return f(),s.current=!1,o.animationState&&o.animationState.setActive(Xx.Tap,!1),!y_()}function d(e,t){h()&&(k_(o.current,e.target)?n&&n(e,t):i&&i(e,t))}function v(e,t){h()&&i&&i(e,t)}function p(e,t){f(),s.current||(s.current=!0,c.current=x_(f_(window,"pointerup",d,l),f_(window,"pointercancel",v,l)),o.animationState&&o.animationState.setActive(Xx.Tap,!0),r&&r(e,t))}h_(o,"pointerdown",u?p:void 0,l),b_(f)})),focus:P_((function(e){var t=e.whileFocus,n=e.visualElement,r=n.animationState;Zx(n,"focus",t?function(){r&&r.setActive(Xx.Focus,!0)}:void 0),Zx(n,"blur",t?function(){r&&r.setActive(Xx.Focus,!1)}:void 0)})),hover:P_((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,i=e.visualElement;h_(i,"pointerenter",t||r?g_(i,!0,t):void 0,{passive:!t}),h_(i,"pointerleave",n||r?g_(i,!1,n):void 0,{passive:!n})}))};function O_(){var e=(0,t.useContext)(mw);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,a=(0,t.useId)();(0,t.useEffect)((function(){return i(a)}),[]);return!n&&r?[!1,function(){return r&&r(a)}]:[!0]}function L_(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var M_=function(e){return/^\-?\d*\.?\d+$/.test(e)},F_=function(e){return/^0[^.\s]+$/.test(e)},V_={delta:0,timestamp:0},U_=1/60*1e3,B_="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},j_="undefined"!==typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(B_())}),U_)};var z_=!0,q_=!1,G_=!1,K_=["read","update","preRender","render","postRender"],H_=K_.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,a=!1,o=new WeakSet,u={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,u=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===u.indexOf(e)&&(u.push(e),a&&i&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(s){if(i)a=!0;else{i=!0;var c=[n,t];if(t=c[0],(n=c[1]).length=0,r=t.length)for(var l=0;l<r;l++){var f=t[l];f(s),o.has(f)&&(u.schedule(f),e())}i=!1,a&&(a=!1,u.process(s))}}};return u}((function(){return q_=!0})),e}),{}),W_=K_.reduce((function(e,t){var n=H_[t];return e[t]=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return q_||J_(),n.schedule(e,t,r)},e}),{}),Q_=K_.reduce((function(e,t){return e[t]=H_[t].cancel,e}),{}),X_=K_.reduce((function(e,t){return e[t]=function(){return H_[t].process(V_)},e}),{}),Y_=function(e){return H_[e].process(V_)},$_=function e(t){q_=!1,V_.delta=z_?U_:Math.max(Math.min(t-V_.timestamp,40),1),V_.timestamp=t,G_=!0,K_.forEach(Y_),G_=!1,q_&&(z_=!1,j_(e))},J_=function(){q_=!0,z_=!0,G_||j_($_)};function Z_(e,t){-1===e.indexOf(t)&&e.push(t)}function eE(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var tE=function(){function e(){h(this,e),this.subscriptions=[]}return v(e,[{key:"add",value:function(e){var t=this;return Z_(this.subscriptions,e),function(){return eE(t.subscriptions,e)}}},{key:"notify",value:function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var a=this.subscriptions[i];a&&a(e,t,n)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),e}();function nE(e,t){return t?e*(1e3/t):0}var rE=function(e){return!isNaN(parseFloat(e))},iE=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,e),this.version="7.10.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.prev=n.current,n.current=e;var r=V_.delta,i=V_.timestamp;n.lastUpdated!==i&&(n.timeDelta=r,n.lastUpdated=i,W_.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.events.change&&n.events.change.notify(n.current),n.events.velocityChange&&n.events.velocityChange.notify(n.getVelocity()),t&&n.events.renderRequest&&n.events.renderRequest.notify(n.current)},this.scheduleVelocityCheck=function(){return W_.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.events.velocityChange&&n.events.velocityChange.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=rE(this.current),this.owner=r.owner}return v(e,[{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new tE),this.events[e].add(t)}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e){this.passiveEffect=e}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}},{key:"setWithVelocity",value:function(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}},{key:"get",value:function(){return this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){return this.canTrackVelocity?nE(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}},{key:"start",value:function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n),t.events.animationStart&&t.events.animationStart.notify()})).then((function(){t.events.animationComplete&&t.events.animationComplete.notify(),t.clearAnimation()}))}},{key:"stop",value:function(){this.stopAnimation&&(this.stopAnimation(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.stopAnimation}},{key:"clearAnimation",value:function(){this.stopAnimation=null}},{key:"destroy",value:function(){this.clearListeners(),this.stop()}}]),e}();function aE(e,t){return new iE(e,t)}var oE=function(e,t){return function(n){return Boolean(ox(n)&&ax.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},uE=function(e,t,n){return function(r){var i;if(!ox(r))return r;var a=o(r.match(rx),4),u=a[0],s=a[1],l=a[2],f=a[3];return c(i={},e,parseFloat(u)),c(i,t,parseFloat(s)),c(i,n,parseFloat(l)),c(i,"alpha",void 0!==f?parseFloat(f):1),i}},sE=f(f({},Zw),{},{transform:function(e){return Math.round(function(e){return Jw(0,255,e)}(e))}}),cE={test:oE("rgb","red"),parse:uE("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,a=void 0===i?1:i;return"rgba("+sE.transform(t)+", "+sE.transform(n)+", "+sE.transform(r)+", "+nx(ex.transform(a))+")"}};var lE={test:oE("#"),parse:function(e){var t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:cE.transform},fE={test:oE("hsl","hue"),parse:uE("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,a=void 0===i?1:i;return"hsla("+Math.round(t)+", "+cx.transform(nx(n))+", "+cx.transform(nx(r))+", "+nx(ex.transform(a))+")"}},hE={test:function(e){return cE.test(e)||lE.test(e)||fE.test(e)},parse:function(e){return cE.test(e)?cE.parse(e):fE.test(e)?fE.parse(e):lE.parse(e)},transform:function(e){return ox(e)?e:e.hasOwnProperty("red")?cE.transform(e):fE.transform(e)}},dE="${c}",vE="${n}";function pE(e){"number"===typeof e&&(e="".concat(e));var t=[],n=0,r=0,i=e.match(ix);i&&(n=i.length,e=e.replace(ix,dE),t.push.apply(t,J(i.map(hE.parse))));var a=e.match(rx);return a&&(r=a.length,e=e.replace(rx,vE),t.push.apply(t,J(a.map(Zw.parse)))),{values:t,numColors:n,numNumbers:r,tokenised:e}}function mE(e){return pE(e).values}function yE(e){var t=pE(e),n=t.values,r=t.numColors,i=t.tokenised,a=n.length;return function(e){for(var t=i,n=0;n<a;n++)t=t.replace(n<r?dE:vE,n<r?hE.transform(e[n]):nx(e[n]));return t}}var gE=function(e){return"number"===typeof e?0:e};var kE={test:function(e){var t,n;return isNaN(e)&&ox(e)&&((null===(t=e.match(rx))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(ix))||void 0===n?void 0:n.length)||0)>0},parse:mE,createTransformer:yE,getAnimatableNone:function(e){var t=mE(e);return yE(e)(t.map(gE))}},bE=new Set(["brightness","contrast","saturate","opacity"]);function wE(e){var t=o(e.slice(0,-1).split("("),2),n=t[0],r=t[1];if("drop-shadow"===n)return e;var i=o(r.match(rx)||[],1)[0];if(!i)return e;var a=r.replace(i,""),u=bE.has(n)?1:0;return i!==r&&(u*=100),n+"("+u+a+")"}var xE=/([a-z-]*)\(.*?\)/g,_E=f(f({},kE),{},{getAnimatableNone:function(e){var t=e.match(xE);return t?t.map(wE).join(" "):e}}),EE=f(f({},px),{},{color:hE,backgroundColor:hE,outlineColor:hE,fill:hE,stroke:hE,borderColor:hE,borderTopColor:hE,borderRightColor:hE,borderBottomColor:hE,borderLeftColor:hE,filter:_E,WebkitFilter:_E}),SE=function(e){return EE[e]};function TE(e,t){var n,r=SE(e);return r!==_E&&(r=kE),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}var IE=function(e){return function(t){return t.test(e)}},CE=[Zw,lx,cx,sx,hx,fx,{test:function(e){return"auto"===e},parse:function(e){return e}}],AE=function(e){return CE.find(IE(e))},DE=[].concat(J(CE),[hE,kE]),NE=function(e){return DE.find(IE(e))};function PE(e,t,n){var r=e.getProps();return zx(r,t,void 0!==n?n:r.custom,function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.getVelocity()})),t}(e))}var RE=["transitionEnd","transition"];function OE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,aE(n))}function LE(e,t){var n=PE(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,a=void 0===i?{}:i,o=(r.transition,Tx(r,RE));for(var u in o=f(f({},o),a)){OE(e,u,Gx(o[u]))}}function ME(e,t){if(t)return(t[e]||t.default||t).from}function FE(e){return Boolean(Ww(e)&&e.add)}function VE(e,t){var n=window.MotionAppearAnimations,r=function(e,t){return"".concat(e,": ").concat(t)}(e,Kw.has(t)?"transform":t),i=n&&n.get(r);return i?(W_.render((function(){try{i.cancel(),n.delete(r)}catch(e){}})),i.currentTime||0):0}var UE="data-"+Mx("framerAppearId");var BE=function(e){return 1e3*e},jE=!1,zE=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},qE=function(e){return function(t){return 1-e(1-t)}},GE=function(e){return e*e},KE=qE(GE),HE=zE(GE),WE=function(e,t,n){return-n*e+n*t+e};function QE(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var XE=function(e,t,n){var r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},YE=[lE,cE,fE];function $E(e){var t=function(e){return YE.find((function(t){return t.test(e)}))}(e);Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead.");var n=t.parse(e);return t===fE&&(n=function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;t/=360,r/=100;var a=0,o=0,u=0;if(n/=100){var s=r<.5?r*(1+n):r+n-r*n,c=2*r-s;a=QE(c,s,t+1/3),o=QE(c,s,t),u=QE(c,s,t-1/3)}else a=o=u=r;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*u),alpha:i}}(n)),n}var JE=function(e,t){var n=$E(e),r=$E(t),i=f({},n);return function(e){return i.red=XE(n.red,r.red,e),i.green=XE(n.green,r.green,e),i.blue=XE(n.blue,r.blue,e),i.alpha=WE(n.alpha,r.alpha,e),cE.transform(i)}};function ZE(e,t){return"number"===typeof e?function(n){return WE(e,t,n)}:hE.test(e)?JE(e,t):nS(e,t)}var eS=function(e,t){var n=J(e),r=n.length,i=e.map((function(e,n){return ZE(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}},tS=function(e,t){var n=f(f({},e),t),r={};for(var i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=ZE(e[i],t[i]));return function(e){for(var t in r)n[t]=r[t](e);return n}},nS=function(e,t){var n=kE.createTransformer(t),r=pE(e),i=pE(t);return r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?x_(eS(r.values,i.values),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),function(n){return"".concat(n>0?t:e)})},rS=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},iS=function(e,t){return function(n){return WE(e,t,n)}};function aS(e,t,n){for(var r=[],i=n||function(e){return"number"===typeof e?iS:"string"===typeof e?hE.test(e)?JE:nS:Array.isArray(e)?eS:"object"===typeof e?tS:iS}(e[0]),a=e.length-1,o=0;o<a;o++){var u=i(e[o],e[o+1]);if(t){var s=Array.isArray(t)?t[o]:t;u=x_(s,u)}r.push(u)}return r}function oS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clamp,i=void 0===r||r,a=n.ease,o=n.mixer,u=e.length;t.length,!a||!Array.isArray(a)||a.length,e[0]>e[u-1]&&(e=J(e).reverse(),t=J(t).reverse());var s=aS(t,a,o),c=s.length,l=function(t){var n=0;if(c>1)for(;n<e.length-2&&!(t<e[n+1]);n++);var r=rS(e[n],e[n+1],t);return s[n](r)};return i?function(t){return l(Jw(e[0],e[u-1],t))}:l}var uS=function(e){return e},sS=function(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e};function cS(e,t,n,r){if(e===t&&n===r)return uS;var i=function(t){return function(e,t,n,r,i){var a,o,u=0;do{(a=sS(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(a)>1e-7&&++u<12);return o}(t,0,1,e,n)};return function(e){return 0===e||1===e?e:sS(i(e),t,r)}}var lS=function(e){return 1-Math.sin(Math.acos(e))},fS=qE(lS),hS=zE(fS),dS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.525;return function(t){return t*t*((e+1)*t-e)}},vS=dS(),pS=qE(vS),mS=zE(vS),yS=function(e){var t=dS(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}}(),gS={linear:uS,easeIn:GE,easeInOut:HE,easeOut:KE,circIn:lS,circInOut:hS,circOut:fS,backIn:vS,backInOut:mS,backOut:pS,anticipate:yS},kS=function(e){if(Array.isArray(e)){e.length;var t=o(e,4);return cS(t[0],t[1],t[2],t[3])}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),gS[e]):e};function bS(e){var t=e.keyframes,n=e.ease,r=void 0===n?HE:n,i=e.times,a=e.duration,o=void 0===a?300:a;t=J(t);var u=bS[0],s=function(e){return Array.isArray(e)&&"number"!==typeof e[0]}(r)?r.map(kS):kS(r),c={done:!1,value:u},l=function(e,t){return e.map((function(e){return e*t}))}(i&&i.length===bS.length?i:function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(t),o);function f(){return oS(l,t,{ease:Array.isArray(s)?s:(e=t,n=s,e.map((function(){return n||HE})).splice(0,e.length-1))});var e,n}var h=f();return{next:function(e){return c.value=h(e),c.done=e>=o,c},flipTarget:function(){t.reverse(),h=f()}}}var wS=.001;function xS(e){var t,n,r=e.duration,i=void 0===r?800:r,a=e.bounce,o=void 0===a?.25:a,u=e.velocity,s=void 0===u?0:u,c=e.mass,l=void 0===c?1:c,f=1-o;f=Jw(.05,1,f),i=Jw(.01,10,i/1e3),f<1?(t=function(e){var t=e*f,n=t*i,r=t-s,a=_S(e,f),o=Math.exp(-n);return wS-r/a*o},n=function(e){var n=e*f*i,r=n*s+s,a=Math.pow(f,2)*Math.pow(e,2)*i,o=Math.exp(-n),u=_S(Math.pow(e,2),f);return(-t(e)+wS>0?-1:1)*((r-a)*o)/u}):(t=function(e){return Math.exp(-e*i)*((e-s)*i+1)-.001},n=function(e){return Math.exp(-e*i)*(i*i*(s-e))});var h=function(e,t,n){for(var r=n,i=1;i<12;i++)r-=e(r)/t(r);return r}(t,n,5/i);if(i*=1e3,isNaN(h))return{stiffness:100,damping:10,duration:i};var d=Math.pow(h,2)*l;return{stiffness:d,damping:2*f*Math.sqrt(l*d),duration:i}}function _S(e,t){return e*Math.sqrt(1-t*t)}var ES=["keyframes","restSpeed","restDelta"],SS=["duration","bounce"],TS=["stiffness","damping","mass"];function IS(e,t){return t.some((function(t){return void 0!==e[t]}))}function CS(e){var t=e.keyframes,n=e.restSpeed,r=void 0===n?2:n,i=e.restDelta,a=void 0===i?.01:i,o=Tx(e,ES),u=t[0],s=t[t.length-1],c={done:!1,value:u},l=function(e){var t=f({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!IS(e,TS)&&IS(e,SS)){var n=xS(e);(t=f(f(f({},t),n),{},{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(o),h=l.stiffness,d=l.damping,v=l.mass,p=l.velocity,m=l.duration,y=l.isResolvedFromDuration,g=AS,k=p?-p/1e3:0,b=d/(2*Math.sqrt(h*v));function w(){var e=s-u,t=Math.sqrt(h/v)/1e3;if(void 0===a&&(a=Math.min(Math.abs(s-u)/100,.4)),b<1){var n=_S(t,b);g=function(r){var i=Math.exp(-b*t*r);return s-i*((k+b*t*e)/n*Math.sin(n*r)+e*Math.cos(n*r))}}else if(1===b)g=function(n){return s-Math.exp(-t*n)*(e+(k+t*e)*n)};else{var r=t*Math.sqrt(b*b-1);g=function(n){var i=Math.exp(-b*t*n),a=Math.min(r*n,300);return s-i*((k+b*t*e)*Math.sinh(a)+r*e*Math.cosh(a))/r}}}return w(),{next:function(e){var t=g(e);if(y)c.done=e>=m;else{var n=k;if(0!==e)if(b<1){var i=Math.max(0,e-5);n=nE(t-g(i),e-i)}else n=0;var o=Math.abs(n)<=r,u=Math.abs(s-t)<=a;c.done=o&&u}return c.value=c.done?s:t,c},flipTarget:function(){k=-k;var e=[s,u];u=e[0],s=e[1],w()}}}CS.needsInterpolation=function(e,t){return"string"===typeof e||"string"===typeof t};var AS=function(e){return 0};var DS=["duration","driver","elapsed","repeat","repeatType","repeatDelay","keyframes","autoplay","onPlay","onStop","onComplete","onRepeat","onUpdate","type"],NS={decay:function(e){var t=e.keyframes,n=void 0===t?[0]:t,r=e.velocity,i=void 0===r?0:r,a=e.power,o=void 0===a?.8:a,u=e.timeConstant,s=void 0===u?350:u,c=e.restDelta,l=void 0===c?.5:c,f=e.modifyTarget,h=n[0],d={done:!1,value:h},v=o*i,p=h+v,m=void 0===f?p:f(p);return m!==p&&(v=m-h),{next:function(e){var t=-v*Math.exp(-e/s);return d.done=!(t>l||t<-l),d.value=d.done?m:m+t,d},flipTarget:function(){}}},keyframes:bS,tween:bS,spring:CS};function PS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e-t-n}var RS=function(e){var t=function(t){var n=t.delta;return e(n)};return{start:function(){return W_.update(t,!0)},stop:function(){return Q_.update(t)}}};function OS(e){var t,n,r,i,a,o=e.duration,u=e.driver,s=void 0===u?RS:u,c=e.elapsed,l=void 0===c?0:c,h=e.repeat,d=void 0===h?0:h,v=e.repeatType,p=void 0===v?"loop":v,m=e.repeatDelay,y=void 0===m?0:m,g=e.keyframes,k=e.autoplay,b=void 0===k||k,w=e.onPlay,x=e.onStop,_=e.onComplete,E=e.onRepeat,S=e.onUpdate,T=e.type,I=void 0===T?"keyframes":T,C=Tx(e,DS),A=0,D=o,N=!1,P=!0,R=NS[g.length>2?"keyframes":I],O=g[0],L=g[g.length-1];(null===(n=(t=R).needsInterpolation)||void 0===n?void 0:n.call(t,O,L))&&(a=oS([0,100],[O,L],{clamp:!1}),g=[0,100]);var M=R(f(f({},C),{},{duration:o,keyframes:g}));function F(){A++,"reverse"===p?l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return r?PS(t+-e,t,n):t-(e-t)+n}(l,D,y,P=A%2===0):(l=PS(l,D,y),"mirror"===p&&M.flipTarget()),N=!1,E&&E()}function V(e){if(P||(e=-e),l+=e,!N){var t=M.next(Math.max(0,l));i=t.value,a&&(i=a(i)),N=P?t.done:l<=0}S&&S(i),N&&(0===A&&(D=void 0!==D?D:l),A<d?function(e,t,n,r){return r?e>=t+n:e<=-n}(l,D,y,P)&&F():(r.stop(),_&&_()))}return b&&(w&&w(),(r=s(V)).start()),{stop:function(){x&&x(),r.stop()},sample:function(e){return M.next(Math.max(0,e)).value}}}var LS=new Set(["linear","ease-in","ease-out","ease-in-out"]);function MS(e){if(e)return Array.isArray(e)?function(e){var t=o(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"cubic-bezier(".concat(n,", ").concat(r,", ").concat(i,", ").concat(a,")")}(e):function(e){var t=Mx(e);return LS.has(t)?t:"ease"}(e)}var FS=["onUpdate","onComplete"];function VS(e,t,n){n.onUpdate;var r=n.onComplete,i=Tx(n,FS),a=i.keyframes,o=i.duration,u=void 0===o?.3:o,s=i.elapsed,l=void 0===s?0:s,h=i.ease;if("spring"===i.type){for(var d=CS(i),v={done:!1,value:a[0]},p=[],m=0;!v.done;)v=d.next(m),p.push(v.value),m+=10;a=p,u=m-10,h="linear"}var y=function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.delay,o=void 0===a?0:a,u=i.duration,s=i.repeat,l=void 0===s?0:s,f=i.repeatType,h=void 0===f?"loop":f,d=i.ease,v=i.times;return e.animate((c(r={},t,n),c(r,"offset",v),r),{delay:o,duration:u,easing:MS(d),fill:"both",iterations:l+1,direction:"reverse"===h?"alternate":"normal"})}(e.owner.current,t,a,f(f({},i),{},{delay:-l,duration:u,ease:h}));return y.onfinish=function(){e.set(a[a.length-1]),r&&r()},function(){var t=y.currentTime;if(t){var n=OS(i);e.setWithVelocity(n.sample(t-10),n.sample(t),10)}W_.update((function(){return y.cancel()}))}}function US(e,t){var n=performance.now(),r=function r(i){var a=i.timestamp-n;a>=t&&(Q_.read(r),e(a-t))};return W_.read(r,!0),function(){return Q_.read(r)}}function BS(e){var t=e.keyframes,n=e.elapsed,r=e.onUpdate,i=e.onComplete,a=function(){return r&&r(t[t.length-1]),i&&i(),function(){}};return n?US(a,-n):a()}function jS(e){var t,n=e.keyframes,r=e.velocity,i=void 0===r?0:r,a=e.min,o=e.max,u=e.power,s=void 0===u?.8:u,c=e.timeConstant,l=void 0===c?750:c,h=e.bounceStiffness,d=void 0===h?500:h,v=e.bounceDamping,p=void 0===v?10:v,m=e.restDelta,y=void 0===m?1:m,g=e.modifyTarget,k=e.driver,b=e.onUpdate,w=e.onComplete,x=e.onStop,_=n[0];function E(e){return void 0!==a&&e<a||void 0!==o&&e>o}function S(e){return void 0===a?o:void 0===o||Math.abs(a-e)<Math.abs(o-e)?a:o}function T(e){null===t||void 0===t||t.stop(),t=OS(f(f({keyframes:[0,1],velocity:0},e),{},{driver:k,onUpdate:function(t){var n;null===b||void 0===b||b(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:w,onStop:x}))}function I(e){T(f({type:"spring",stiffness:d,damping:p,restDelta:y},e))}if(E(_))I({velocity:i,keyframes:[_,S(_)]});else{var C=s*i+_;"undefined"!==typeof g&&(C=g(C));var A,D,N=S(C),P=N===a?-1:1;T({type:"decay",keyframes:[_,0],velocity:i,timeConstant:l,power:s,restDelta:y,modifyTarget:g,onUpdate:E(C)?function(e){A=D,D=e,i=nE(e-A,V_.delta),(1===P&&e>N||-1===P&&e<N)&&I({keyframes:[e,N],velocity:i})}:void 0})}return{stop:function(){return null===t||void 0===t?void 0:t.stop()}}}var zS=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},qS=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},GS=function(){return{type:"keyframes",ease:"linear",duration:.3}},KS={type:"keyframes",duration:.8},HS={x:zS,y:zS,z:zS,rotate:zS,rotateX:zS,rotateY:zS,rotateZ:zS,scaleX:qS,scaleY:qS,scale:qS,opacity:GS,backgroundColor:GS,color:GS,default:qS},WS=function(e,t){var n=t.keyframes;return n.length>2?KS:(HS[e]||HS.default)(n[1])},QS=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!kE.test(t)||t.startsWith("url(")))},XS=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"];function YS(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=Tx(e,XS);return!!Object.keys(t).length}function $S(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function JS(e){return"number"===typeof e?0:TE("",e)}function ZS(e,t){return e[t]||e.default||e}function eT(e,t,n,r){var i=QS(t,n),a=void 0!==r.from?r.from:e.get();return"none"===a&&i&&"string"===typeof n?a=TE(t,n):$S(a)&&"string"===typeof n?a=JS(n):!Array.isArray(n)&&$S(n)&&"string"===typeof a&&(n=JS(a)),Array.isArray(n)?(null===n[0]&&(n[0]=a),n):[a,n]}var tT={waapi:function(){return Object.hasOwnProperty.call(Element.prototype,"animate")}},nT={},rT={},iT=function(e){rT[e]=function(){return void 0===nT[e]&&(nT[e]=tT[e]()),nT[e]}};for(var aT in tT)iT(aT);var oT=new Set(["opacity"]),uT=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(i){var a=ZS(r,e)||{},o=a.delay||r.delay||0,u=r.elapsed,s=void 0===u?0:u;s-=BE(o);var c=eT(t,e,n,a),l=c[0],h=c[c.length-1],d=QS(e,l),v=QS(e,h);"You are trying to animate ".concat(e,' from "').concat(l,'" to "').concat(h,'". ').concat(l," is not an animatable value - to enable this animation set ").concat(l," to a value animatable to ").concat(h," via the `style` property.");var p=f(f({keyframes:c,velocity:t.getVelocity()},a),{},{elapsed:s,onUpdate:function(e){t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:function(){i(),a.onComplete&&a.onComplete()}});if(!d||!v||jE||!1===a.type)return BS(p);if("inertia"===a.type){var m=jS(p);return function(){return m.stop()}}YS(a)||(p=f(f({},p),WS(e,p))),p.duration&&(p.duration=BE(p.duration)),p.repeatDelay&&(p.repeatDelay=BE(p.repeatDelay));var y=t.owner,g=y&&y.current;if(rT.waapi()&&oT.has(e)&&!p.repeatDelay&&"mirror"!==p.repeatType&&0!==p.damping&&"function"!==typeof p.ease&&y&&g instanceof HTMLElement&&!y.getProps().onUpdate)return VS(t,e,p);var k=OS(p);return function(){return k.stop()}}},sT=["transition","transitionEnd"];function cT(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=PE(e,t,r.custom),a=i||{},u=a.transition,s=void 0===u?e.getDefaultTransition()||{}:u;r.transitionOverride&&(s=r.transitionOverride);var c=i?function(){return lT(e,i,r)}:function(){return Promise.resolve()},l=(null===(n=e.variantChildren)||void 0===n?void 0:n.size)?function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=s,a=i.delayChildren,o=void 0===a?0:a,u=i.staggerChildren,c=i.staggerDirection;return fT(e,t,o+n,u,c,r)}:function(){return Promise.resolve()},f=s,h=f.when;if(h){var d="beforeChildren"===h?[c,l]:[l,c],v=o(d,2),p=v[0],m=v[1];return p().then(m)}return Promise.all([c(),l(r.delay)])}function lT(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.delay,a=void 0===i?0:i,o=r.transitionOverride,u=r.type,s=e.makeTargetAnimatable(t),c=s.transition,l=void 0===c?e.getDefaultTransition():c,h=s.transitionEnd,d=Tx(s,sT),v=e.getValue("willChange");o&&(l=o);var p=[],m=u&&(null===(n=e.animationState)||void 0===n?void 0:n.getState()[u]),y=function(t){var n=e.getValue(t),r=d[t];if(!n||void 0===r||m&&dT(m,t))return"continue";var i=f({delay:a,elapsed:0},l);if(e.shouldReduceMotion&&Kw.has(t)&&(i=f(f({},i),{},{type:!1,delay:0})),!n.hasAnimated){var o=e.getProps()[UE];o&&(i.elapsed=VE(o,t))}var u=n.start(uT(t,n,r,i));FE(v)&&(v.add(t),u=u.then((function(){return v.remove(t)}))),p.push(u)};for(var g in d)y(g);return Promise.all(p).then((function(){h&&LE(e,h)}))}function fT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0,o=[],u=(e.variantChildren.size-1)*r,s=1===i?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e*r}:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return u-e*r};return Array.from(e.variantChildren).sort(hT).forEach((function(e,r){o.push(cT(e,t,f(f({},a),{},{delay:n+s(r)})).then((function(){return e.notify("AnimationComplete",t)})))})),Promise.all(o)}function hT(e,t){return e.sortNodePosition(t)}function dT(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}var vT=["transition","transitionEnd"],pT=[Xx.Animate,Xx.InView,Xx.Focus,Xx.Hover,Xx.Tap,Xx.Drag,Xx.Exit],mT=[].concat(pT).reverse(),yT=pT.length;function gT(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){var i=t.map((function(t){return cT(e,t,r)}));n=Promise.all(i)}else if("string"===typeof t)n=cT(e,t,r);else{var a="function"===typeof t?PE(e,t,r.custom):t;n=lT(e,a,r)}return n.then((function(){return e.notify("AnimationComplete",t)}))}(e,n,r)})))}}function kT(e){var t=gT(e),n=function(){var e;return c(e={},Xx.Animate,bT(!0)),c(e,Xx.InView,bT()),c(e,Xx.Hover,bT()),c(e,Xx.Tap,bT()),c(e,Xx.Drag,bT()),c(e,Xx.Focus,bT()),c(e,Xx.Exit,bT()),e}(),r=!0,i=function(t,n){var r=PE(e,n);if(r){r.transition;var i=r.transitionEnd,a=Tx(r,vT);t=f(f(f({},t),a),i)}return t};function a(a,o){for(var u=e.getProps(),s=e.getVariantContext(!0)||{},c=[],l=new Set,h={},d=1/0,v=function(t){var v=mT[t],p=n[v],m=void 0!==u[v]?u[v]:s[v],y=xw(m),g=v===o?p.isActive:null;!1===g&&(d=t);var k=m===s[v]&&m!==u[v]&&y;if(k&&r&&e.manuallyAnimateOnMount&&(k=!1),p.protectedKeys=f({},h),!p.isActive&&null===g||!m&&!p.prevProp||_w(m)||"boolean"===typeof m)return"continue";var b=function(e,t){if("string"===typeof t)return t!==e;if(Array.isArray(t))return!L_(t,e);return!1}(p.prevProp,m),w=b||v===o&&p.isActive&&!k&&y||t>d&&y,x=Array.isArray(m)?m:[m],_=x.reduce(i,{});!1===g&&(_={});var E=p.prevResolvedValues,S=void 0===E?{}:E,T=f(f({},S),_),I=function(e){w=!0,l.delete(e),p.needsAnimating[e]=!0};for(var C in T){var A=_[C],D=S[C];h.hasOwnProperty(C)||(A!==D?qx(A)&&qx(D)?!L_(A,D)||b?I(C):p.protectedKeys[C]=!0:void 0!==A?I(C):l.add(C):void 0!==A&&l.has(C)?I(C):p.protectedKeys[C]=!0)}p.prevProp=m,p.prevResolvedValues=_,p.isActive&&(h=f(f({},h),_)),r&&e.blockInitialAnimation&&(w=!1),w&&!k&&c.push.apply(c,J(x.map((function(e){return{animation:e,options:f({type:v},a)}}))))},p=0;p<yT;p++)v(p);if(l.size){var m={};l.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(m[t]=n)})),c.push({animation:m})}var y=Boolean(c.length);return r&&!1===u.initial&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(c):Promise.resolve()}return{animateChanges:a,setActive:function(t,r,i){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;var u=a(i,t);for(var s in n)n[s].protectedKeys={};return u},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function bT(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var wT={animation:P_((function(e){var n=e.visualElement,r=e.animate;n.animationState||(n.animationState=kT(n)),_w(r)&&(0,t.useEffect)((function(){return r.subscribe(n)}),[r])})),exit:P_((function(e){var n=e.custom,r=e.visualElement,i=o(O_(),2),a=i[0],u=i[1],s=(0,t.useContext)(mw);(0,t.useEffect)((function(){r.isPresent=a;var e=r.animationState&&r.animationState.setActive(Xx.Exit,!a,{custom:s&&s.custom||n});e&&!a&&e.then(u)}),[a])}))},xT=function(e,t){return Math.abs(e-t)};function _T(e,t){var n=xT(e.x,t.x),r=xT(e.y,t.y);return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}var ET=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.transformPagePoint;if(h(this,e),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=IT(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=_T(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,a=V_.timestamp;r.history.push(f(f({},i),{},{timestamp:a}));var o=r.handlers,u=o.onStart,s=o.onMove;t||(u&&u(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),s&&s(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=ST(t,r.transformPagePoint),e_(e)&&0===e.buttons?r.handlePointerUp(e,t):W_.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,i=n.onEnd,a=n.onSessionEnd,o=IT(ST(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,o),a&&a(e,o)},!(t_(t)&&t.touches.length>1)){this.handlers=n,this.transformPagePoint=a;var o=o_(t),u=ST(o,this.transformPagePoint),s=u.point,c=V_.timestamp;this.history=[f(f({},s),{},{timestamp:c})];var l=n.onSessionStart;l&&l(t,IT(u,this.history)),this.removeListeners=x_(f_(window,"pointermove",this.handlePointerMove),f_(window,"pointerup",this.handlePointerUp),f_(window,"pointercancel",this.handlePointerUp))}}return v(e,[{key:"updateHandlers",value:function(e){this.handlers=e}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),Q_.update(this.updatePoint)}}]),e}();function ST(e,t){return t?{point:t(e.point)}:e}function TT(e,t){return{x:e.x-t.x,y:e.y-t.y}}function IT(e,t){var n=e.point;return{point:n,delta:TT(n,AT(t)),offset:TT(n,CT(t)),velocity:DT(t,.1)}}function CT(e){return e[0]}function AT(e){return e[e.length-1]}function DT(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=AT(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>BE(t)));)n--;if(!r)return{x:0,y:0};var a=(i.timestamp-r.timestamp)/1e3;if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function NT(e){return e.max-e.min}function PT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function RT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=WE(t.min,t.max,e.origin),e.scale=NT(n)/NT(t),(PT(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=WE(n.min,n.max,e.origin)-e.originPoint,(PT(e.translate)||isNaN(e.translate))&&(e.translate=0)}function OT(e,t,n,r){RT(e.x,t.x,n.x,null===r||void 0===r?void 0:r.originX),RT(e.y,t.y,n.y,null===r||void 0===r?void 0:r.originY)}function LT(e,t,n){e.min=n.min+t.min,e.max=e.min+NT(t)}function MT(e,t,n){e.min=t.min-n.min,e.max=e.min+NT(t)}function FT(e,t,n){MT(e.x,t.x,n.x),MT(e.y,t.y,n.y)}function VT(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function UT(e,t){var n=t.min-e.min,r=t.max-e.max;if(t.max-t.min<e.max-e.min){var i=[r,n];n=i[0],r=i[1]}return{min:n,max:r}}var BT=.35;function jT(e,t,n){return{min:zT(e,t),max:zT(e,n)}}function zT(e,t){return"number"===typeof e?e:e[t]||0}function qT(e){return[e("x"),e("y")]}function GT(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function KT(e){return void 0===e||1===e}function HT(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!KT(t)||!KT(n)||!KT(r)}function WT(e){return HT(e)||QT(e)||e.z||e.rotate||e.rotateX||e.rotateY}function QT(e){return XT(e.x)||XT(e.y)}function XT(e){return e&&"0%"!==e}function YT(e,t,n){return n+t*(e-n)}function $T(e,t,n,r,i){return void 0!==i&&(e=YT(e,i,r)),YT(e,n,r)+t}function JT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=$T(e.min,t,n,r,i),e.max=$T(e.max,t,n,r,i)}function ZT(e,t){var n=t.x,r=t.y;JT(e.x,n.translate,n.scale,n.originPoint),JT(e.y,r.translate,r.scale,r.originPoint)}function eI(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function tI(e,t){e.min=e.min+t,e.max=e.max+t}function nI(e,t,n){var r=o(n,3),i=r[0],a=r[1],u=r[2],s=void 0!==t[u]?t[u]:.5,c=WE(e.min,e.max,s);JT(e,t[i],t[a],c,t.scale)}var rI=["x","scaleX","originX"],iI=["y","scaleY","originY"];function aI(e,t){nI(e.x,t,rI),nI(e.y,t,iI)}function oI(e,t){return GT(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var uI=new WeakMap,sI=function(){function e(t){h(this,e),this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=t}return v(e,[{key:"start",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.snapToCursor,i=void 0!==r&&r;if(!1!==this.visualElement.isPresent){var a=function(e){t.stopAnimation(),i&&t.snapToCursor(o_(e,"page").point)},o=function(e,n){var r,i=t.getProps(),a=i.drag,o=i.dragPropagation,u=i.onDragStart;(!a||o||(t.openGlobalLock&&t.openGlobalLock(),t.openGlobalLock=m_(a),t.openGlobalLock))&&(t.isDragging=!0,t.currentDirection=null,t.resolveConstraints(),t.visualElement.projection&&(t.visualElement.projection.isAnimationBlocked=!0,t.visualElement.projection.target=void 0),qT((function(e){var n,r,i=t.getAxisMotionValue(e).get()||0;if(cx.test(i)){var a=null===(r=null===(n=t.visualElement.projection)||void 0===n?void 0:n.layout)||void 0===r?void 0:r.layoutBox[e];if(a)i=NT(a)*(parseFloat(i)/100)}t.originPoint[e]=i})),null===u||void 0===u||u(e,n),null===(r=t.visualElement.animationState)||void 0===r||r.setActive(Xx.Drag,!0))},u=function(e,n){var r=t.getProps(),i=r.dragPropagation,a=r.dragDirectionLock,o=r.onDirectionLock,u=r.onDrag;if(i||t.openGlobalLock){var s=n.offset;if(a&&null===t.currentDirection)return t.currentDirection=lI(s),void(null!==t.currentDirection&&(null===o||void 0===o||o(t.currentDirection)));t.updateAxis("x",n.point,s),t.updateAxis("y",n.point,s),t.visualElement.render(),null===u||void 0===u||u(e,n)}},s=function(e,n){return t.stop(e,n)};this.panSession=new ET(e,{onSessionStart:a,onStart:o,onMove:u,onSessionEnd:s},{transformPagePoint:this.visualElement.getTransformPagePoint()})}}},{key:"stop",value:function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;null===i||void 0===i||i(e,t)}}},{key:"cancel",value:function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(Xx.Drag,!1)}},{key:"updateAxis",value:function(e,t,n){var r=this.getProps().drag;if(n&&cI(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?WE(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?WE(i,e,n.max):Math.min(e,i)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}}},{key:"resolveConstraints",value:function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;n&&ww(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,a=t.right;return{x:VT(e.x,r,a),y:VT(e.y,n,i)}}(i.layoutBox,n),this.elastic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BT;return!1===e?e=0:!0===e&&(e=BT),{x:jT(e,"left","right"),y:jT(e,"top","bottom")}}(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&qT((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[t],e.constraints[t]))}))}},{key:"resolveRefConstraints",value:function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!ww(t))return!1;var r=t.current,i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(e,t,n){var r=oI(e,n),i=t.scroll;return i&&(tI(r.x,i.offset.x),tI(r.y,i.offset.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:UT(e.x,t.x),y:UT(e.y,t.y)}}(i.layout.layoutBox,a);if(n){var u=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!u,u&&(o=GT(u))}return o}},{key:"startAnimation",value:function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,u=n.dragSnapToOrigin,s=n.onDragTransitionEnd,c=this.constraints||{},l=qT((function(n){if(cI(n,r,t.currentDirection)){var s=(null===c||void 0===c?void 0:c[n])||{};u&&(s={min:0,max:0});var l=a?200:1e6,h=a?40:1e7,d=f(f({type:"inertia",velocity:i?e[n]:0,bounceStiffness:l,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},o),s);return t.startAxisValueAnimation(n,d)}}));return Promise.all(l).then(s)}},{key:"startAxisValueAnimation",value:function(e,t){var n=this.getAxisMotionValue(e);return n.start(uT(e,n,0,t))}},{key:"stopAnimation",value:function(){var e=this;qT((function(t){return e.getAxisMotionValue(t).stop()}))}},{key:"getAxisMotionValue",value:function(e){var t,n="_drag"+e.toUpperCase(),r=this.visualElement.getProps()[n];return r||this.visualElement.getValue(e,(null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])||0)}},{key:"snapToCursor",value:function(e){var t=this;qT((function(n){if(cI(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var a=r.layout.layoutBox[n],o=a.min,u=a.max;i.set(e[n]-WE(o,u,.5))}}}))}},{key:"scalePositionWithinConstraints",value:function(){var e,t=this;if(this.visualElement.current){var n=this.getProps(),r=n.drag,i=n.dragConstraints,a=this.visualElement.projection;if(ww(i)&&a&&this.constraints){this.stopAnimation();var o={x:0,y:0};qT((function(e){var n=t.getAxisMotionValue(e);if(n){var r=n.get();o[e]=function(e,t){var n=.5,r=NT(e),i=NT(t);return i>r?n=rS(t.min,t.max-r,e.min):r>i&&(n=rS(e.min,e.max-i,t.min)),Jw(0,1,n)}({min:r,max:r},t.constraints[e])}}));var u=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=u?u({},""):"none",null===(e=a.root)||void 0===e||e.updateScroll(),a.updateLayout(),this.resolveConstraints(),qT((function(e){if(cI(e,r,null)){var n=t.getAxisMotionValue(e),i=t.constraints[e],a=i.min,u=i.max;n.set(WE(a,u,o[e]))}}))}}}},{key:"addListeners",value:function(){var e,t=this;if(this.visualElement.current){uI.set(this.visualElement,this);var n=f_(this.visualElement.current,"pointerdown",(function(e){var n=t.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=function(){ww(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},i=this.visualElement.projection,a=i.addEventListener("measure",r);i&&!i.layout&&(null===(e=i.root)||void 0===e||e.updateScroll(),i.updateLayout()),r();var o=Jx(window,"resize",(function(){return t.scalePositionWithinConstraints()})),u=i.addEventListener("didUpdate",(function(e){var n=e.delta,r=e.hasLayoutChanged;t.isDragging&&r&&(qT((function(e){var r=t.getAxisMotionValue(e);r&&(t.originPoint[e]+=n[e].translate,r.set(r.get()+n[e].translate))})),t.visualElement.render())}));return function(){o(),n(),a(),null===u||void 0===u||u()}}}},{key:"getProps",value:function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,a=e.dragPropagation,o=void 0!==a&&a,u=e.dragConstraints,s=void 0!==u&&u,c=e.dragElastic,l=void 0===c?BT:c,h=e.dragMomentum,d=void 0===h||h;return f(f({},e),{},{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:s,dragElastic:l,dragMomentum:d})}}]),e}();function cI(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}function lI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}var fI={pan:P_((function(e){var n=e.onPan,r=e.onPanStart,i=e.onPanEnd,a=e.onPanSessionStart,o=e.visualElement,u=n||r||i||a,s=(0,t.useRef)(null),c=(0,t.useContext)(vw).transformPagePoint,l={onSessionStart:a,onStart:r,onMove:n,onEnd:function(e,t){s.current=null,i&&i(e,t)}};(0,t.useEffect)((function(){null!==s.current&&s.current.updateHandlers(l)})),h_(o,"pointerdown",u&&function(e){s.current=new ET(e,l,{transformPagePoint:c})}),b_((function(){return s.current&&s.current.end()}))})),drag:P_((function(e){var n=e.dragControls,r=e.visualElement,i=Nw((function(){return new sI(r)}));(0,t.useEffect)((function(){return n&&n.subscribe(i)}),[i,n]),(0,t.useEffect)((function(){return i.addListeners()}),[i])}))};function hI(e){return"string"===typeof e&&e.startsWith("var(--")}var dI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function vI(e){var t=dI.exec(e);if(!t)return[,];var n=o(t,3);return[n[1],n[2]]}function pI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');var r=vI(e),i=o(r,2),a=i[0],u=i[1];if(a){var s=window.getComputedStyle(t).getPropertyValue(a);return s?s.trim():hI(u)?pI(u,t,n+1):u}}function mI(e,t,n){var r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t)),i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};for(var a in n&&(n=f({},n)),e.values.forEach((function(e){var t=e.get();if(hI(t)){var n=pI(t,i);n&&e.set(n)}})),r){var o=r[a];if(hI(o)){var u=pI(o,i);u&&(r[a]=u,n&&void 0===n[a]&&(n[a]=o))}}return{target:r,transitionEnd:n}}var yI,gI=new Set(["width","height","top","left","right","bottom","x","y"]),kI=function(e){return gI.has(e)},bI=function(e,t){e.set(t,!1),e.set(t)},wI=function(e){return e===Zw||e===lx};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(yI||(yI={}));var xI=function(e,t){return parseFloat(e.split(", ")[t])},_I=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return xI(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?xI(o[1],e):0}},EI=new Set(["x","y","z"]),SI=Gw.filter((function(e){return!EI.has(e)}));function TI(e){var t=[];return SI.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}var II={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,a=t.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,a=t.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:_I(4,13),y:_I(5,14)},CI=function(e,t,n){var r=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),o=a.display,u={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){u[e]=II[e](r,a)})),t.render();var s=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);bI(r,u[n]),e[n]=II[n](s,a)})),e};function AI(e,t,n,r){return function(e){return Object.keys(e).some(kI)}(t)?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=f({},t),r=f({},r);var i=Object.keys(t).filter(kI),a=[],u=!1,s=[];if(i.forEach((function(i){var o=e.getValue(i);if(e.hasValue(i)){var c,l=n[i],f=AE(l),h=t[i];if(qx(h)){var d=h.length,v=null===h[0]?1:0;l=h[v],f=AE(l);for(var p=v;p<d;p++)c?AE(h[p]):(c=AE(h[p]))===f||wI(f)&&wI(c)}else c=AE(h);if(f!==c)if(wI(f)&&wI(c)){var m=o.get();"string"===typeof m&&o.set(parseFloat(m)),"string"===typeof h?t[i]=parseFloat(h):Array.isArray(h)&&c===lx&&(t[i]=h.map(parseFloat))}else(null===f||void 0===f?void 0:f.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===l||0===h)?0===l?o.set(c.transform(l)):t[i]=f.transform(h):(u||(a=TI(e),u=!0),s.push(i),r[i]=void 0!==r[i]?r[i]:t[i],bI(o,h))}})),s.length){var c=s.indexOf("height")>=0?window.pageYOffset:null,l=CI(t,e,s);return a.length&&a.forEach((function(t){var n=o(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.render(),yw&&null!==c&&window.scrollTo({top:c}),{target:l,transitionEnd:r}}return{target:t,transitionEnd:r}}(e,t,n,r):{target:t,transitionEnd:r}}var DI={current:null},NI={current:!1};var PI=["willChange"],RI=Object.keys(Dw),OI=RI.length,LI=["AnimationStart","AnimationComplete","Update","Unmount","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],MI=function(){function e(t){var n=this,r=t.parent,i=t.props,a=t.reducedMotionConfig,o=t.visualState,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,e),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.isPresent=!0,this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return n.notify("Update",n.latestValues)},this.render=function(){n.current&&(n.triggerBuild(),n.renderInstance(n.current,n.renderState,n.props.style,n.projection))},this.scheduleRender=function(){return W_.render(n.render,!1,!0)};var s=o.latestValues,c=o.renderState;this.latestValues=s,this.baseTarget=f({},s),this.initialValues=i.initial?f({},s):{},this.renderState=c,this.parent=r,this.props=i,this.depth=r?r.depth+1:0,this.reducedMotionConfig=a,this.options=u,this.isControllingVariants=Sw(i),this.isVariantNode=Tw(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(r&&r.current);var l=this.scrapeMotionValuesFromProps(i),d=l.willChange,v=Tx(l,PI);for(var p in v){var m=v[p];void 0!==s[p]&&Ww(m)&&(m.set(s[p],!1),FE(d)&&d.add(p))}}return v(e,[{key:"scrapeMotionValuesFromProps",value:function(e){return{}}},{key:"mount",value:function(e){var t,n=this;this.current=e,this.projection&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=null===(t=this.parent)||void 0===t?void 0:t.addVariantChild(this)),this.values.forEach((function(e,t){return n.bindToMotionValue(t,e)})),NI.current||function(){if(NI.current=!0,yw)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return DI.current=e.matches};e.addListener(t),t()}else DI.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||DI.current),this.parent&&this.parent.children.add(this),this.setProps(this.props)}},{key:"unmount",value:function(){var e,t,n;for(var r in null===(e=this.projection)||void 0===e||e.unmount(),Q_.update(this.notifyUpdate),Q_.render(this.render),this.valueSubscriptions.forEach((function(e){return e()})),null===(t=this.removeFromVariantTree)||void 0===t||t.call(this),null===(n=this.parent)||void 0===n||n.children.delete(this),this.events)this.events[r].clear();this.current=null}},{key:"bindToMotionValue",value:function(e,t){var n=this,r=Kw.has(e),i=t.on("change",(function(t){n.latestValues[e]=t,n.props.onUpdate&&W_.update(n.notifyUpdate,!1,!0),r&&n.projection&&(n.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(function(){i(),a()}))}},{key:"sortNodePosition",value:function(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}},{key:"loadFeatures",value:function(e,n,r,i,a,o){var u=this,s=[];for(var c=0;c<OI;c++){var l=RI[c],h=Dw[l],d=h.isEnabled,v=h.Component;d(e)&&v&&s.push((0,t.createElement)(v,f(f({key:l},e),{},{visualElement:this})))}if(!this.projection&&a){this.projection=new a(i,this.latestValues,this.parent&&this.parent.projection);var p=e.layoutId,m=e.layout,y=e.drag,g=e.dragConstraints,k=e.layoutScroll;this.projection.setOptions({layoutId:p,layout:m,alwaysMeasureLayout:Boolean(y)||g&&ww(g),visualElement:this,scheduleRender:function(){return u.scheduleRender()},animationType:"string"===typeof m?m:"both",initialPromotionConfig:o,layoutScroll:k})}return s}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.options,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}},{key:"getStaticValue",value:function(e){return this.latestValues[e]}},{key:"setStaticValue",value:function(e,t){this.latestValues[e]=t}},{key:"makeTargetAnimatable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}},{key:"setProps",value:function(e){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.props=e;for(var t=0;t<LI.length;t++){var n=LI[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);var r=e["on"+n];r&&(this.propEventSubscriptions[n]=this.on(n,r))}this.prevMotionValues=function(e,t,n){var r=t.willChange;for(var i in t){var a=t[i],o=n[i];if(Ww(a))e.addValue(i,a),FE(r)&&r.add(i);else if(Ww(o))e.addValue(i,aE(a,{owner:e})),FE(r)&&r.remove(i);else if(o!==a)if(e.hasValue(i)){var u=e.getValue(i);!u.hasAnimated&&u.set(a)}else{var s=e.getStaticValue(i);e.addValue(i,aE(void 0!==s?s:a))}}for(var c in n)void 0===t[c]&&e.removeValue(c);return t}(this,this.scrapeMotionValuesFromProps(e),this.prevMotionValues)}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(e){var t;return null===(t=this.props.variants)||void 0===t?void 0:t[e]}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){var e;return this.isVariantNode?this:null===(e=this.parent)||void 0===e?void 0:e.getClosestVariantNode()}},{key:"getVariantContext",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n)return null===(e=this.parent)||void 0===e?void 0:e.getVariantContext();if(!this.isControllingVariants){var r=(null===(t=this.parent)||void 0===t?void 0:t.getVariantContext())||{};return void 0!==this.props.initial&&(r.initial=this.props.initial),r}for(var i={},a=0;a<VI;a++){var o=FI[a],u=this.props[o];(xw(u)||!1===u)&&(i[o]=u)}return i}},{key:"addVariantChild",value:function(e){var t,n=this.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}}},{key:"addValue",value:function(e,t){this.hasValue(e)&&this.removeValue(e),this.values.set(e,t),this.latestValues[e]=t.get(),this.bindToMotionValue(e,t)}},{key:"removeValue",value:function(e){var t;this.values.delete(e),null===(t=this.valueSubscriptions.get(e))||void 0===t||t(),this.valueSubscriptions.delete(e),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}},{key:"hasValue",value:function(e){return this.values.has(e)}},{key:"getValue",value:function(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=aE(t,{owner:this}),this.addValue(e,n)),n}},{key:"readValue",value:function(e){return void 0===this.latestValues[e]&&this.current?this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}},{key:"setBaseTarget",value:function(e,t){this.baseTarget[e]=t}},{key:"getBaseTarget",value:function(e){var t,n=this.props.initial,r="string"===typeof n||"object"===typeof n?null===(t=zx(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;var i=this.getBaseTargetFromProps(this.props,e);return void 0===i||Ww(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new tE),this.events[e].add(t)}},{key:"notify",value:function(e){for(var t,n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];null===(n=this.events[e])||void 0===n||(t=n).notify.apply(t,i)}}]),e}(),FI=["initial"].concat(J(pT)),VI=FI.length,UI=["transition","transitionEnd"],BI=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"sortInstanceNodePosition",value:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1}},{key:"getBaseTargetFromProps",value:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]}},{key:"removeValueFromRenderState",value:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]}},{key:"makeTargetAnimatableFromInstance",value:function(e,t,n){var r=e.transition,i=e.transitionEnd,a=Tx(e,UI),o=t.transformValues,u=function(e,t,n){var r,i={};for(var a in e){var o=ME(a,t);i[a]=void 0!==o?o:null===(r=n.getValue(a))||void 0===r?void 0:r.get()}return i}(a,r||{},this);if(o&&(i&&(i=o(i)),a&&(a=o(a)),u&&(u=o(u))),n){!function(e,t,n){var r,i,a=Object.keys(t).filter((function(t){return!e.hasValue(t)})),o=a.length;if(o)for(var u=0;u<o;u++){var s=a[u],c=t[s],l=null;Array.isArray(c)&&(l=c[0]),null===l&&(l=null!==(i=null!==(r=n[s])&&void 0!==r?r:e.readValue(s))&&void 0!==i?i:t[s]),void 0!==l&&null!==l&&("string"===typeof l&&(M_(l)||F_(l))?l=parseFloat(l):!NE(l)&&kE.test(c)&&(l=TE(s,c)),e.addValue(s,aE(l,{owner:e})),void 0===n[s]&&(n[s]=l),null!==l&&e.setBaseTarget(s,l))}}(this,a,u);var s=function(e,t,n,r){var i=mI(e,t,r);return AI(e,t=i.target,n,r=i.transitionEnd)}(this,a,u,i);i=s.transitionEnd,a=s.target}return f({transition:r,transitionEnd:i},a)}}]),n}(MI);var jI=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"readValueFromInstance",value:function(e,t){if(Kw.has(t)){var n=SE(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r)),a=(Yw(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof a?a.trim():a}},{key:"measureInstanceViewportBox",value:function(e,t){return oI(e,t.transformPagePoint)}},{key:"build",value:function(e,t,n,r){mx(e,t,n,r.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(e){return Bx(e)}},{key:"renderInstance",value:function(e,t,n,r){Fx(e,t,n,r)}}]),n}(BI),zI=function(e){g(n,e);var t=x(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).isSVGTag=!1,e}return v(n,[{key:"getBaseTargetFromProps",value:function(e,t){return e[t]}},{key:"readValueFromInstance",value:function(e,t){var n;return Kw.has(t)?(null===(n=SE(t))||void 0===n?void 0:n.default)||0:(t=Vx.has(t)?t:Mx(t),e.getAttribute(t))}},{key:"measureInstanceViewportBox",value:function(){return{x:{min:0,max:0},y:{min:0,max:0}}}},{key:"scrapeMotionValuesFromProps",value:function(e){return jx(e)}},{key:"build",value:function(e,t,n,r){Nx(e,t,n,this.isSVGTag,r.transformTemplate)}},{key:"renderInstance",value:function(e,t,n,r){Ux(e,t,0,r)}},{key:"mount",value:function(e){this.isSVGTag=Rx(e.tagName),Er(k(n.prototype),"mount",this).call(this,e)}}]),n}(BI),qI=function(e,t){return zw(e)?new zI(t,{enableHardwareAcceleration:!1}):new jI(t,{enableHardwareAcceleration:!0})};function GI(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var KI={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!lx.test(e))return e;e=parseFloat(e)}var n=GI(e,t.target.x),r=GI(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},HI="_$css",WI={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,a=e.includes("var("),o=[];a&&(e=e.replace(dI,(function(e){return o.push(e),HI})));var u=kE.parse(e);if(u.length>5)return i;var s=kE.createTransformer(e),c="number"!==typeof u[0]?1:0,l=r.x.scale*n.x,f=r.y.scale*n.y;u[0+c]/=l,u[1+c]/=f;var h=WE(l,f,.5);"number"===typeof u[2+c]&&(u[2+c]/=h),"number"===typeof u[3+c]&&(u[3+c]/=h);var d=s(u);if(a){var v=0;d=d.replace(HI,(function(){var e=o[v];return v++,e}))}return d}},QI=function(e){g(n,e);var t=x(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,u=r.projection;e=XI,Object.assign(qw,e),u&&(i.group&&i.group.add(u),a&&a.register&&o&&a.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",(function(){t.safeToRemove()})),u.setOptions(f(f({},u.options),{},{onExitComplete:function(){return t.safeToRemove()}}))),Pw.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,a=n.drag,o=n.isPresent,u=i.projection;return u?(u.isPresent=o,a||e.layoutDependency!==r||void 0===r?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||W_.postRender((function(){var e;(null===(e=u.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null}},{key:"componentDidUpdate",value:function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),(null===n||void 0===n?void 0:n.group)&&n.group.remove(i),(null===r||void 0===r?void 0:r.deregister)&&r.deregister(i))}},{key:"safeToRemove",value:function(){var e=this.props.safeToRemove;null===e||void 0===e||e()}},{key:"render",value:function(){return null}}]),n}(t.Component);var XI={borderRadius:f(f({},KI),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:KI,borderTopRightRadius:KI,borderBottomLeftRadius:KI,borderBottomRightRadius:KI,boxShadow:WI},YI={measureLayout:function(e){var n=o(O_(),2),r=n[0],i=n[1],a=(0,t.useContext)(Ow);return t.createElement(QI,f(f({},e),{},{layoutGroup:a,switchLayoutGroup:(0,t.useContext)(Mw),isPresent:r,safeToRemove:i}))}};var $I=["TopLeft","TopRight","BottomLeft","BottomRight"],JI=$I.length,ZI=function(e){return"string"===typeof e?parseFloat(e):e},eC=function(e){return"number"===typeof e||lx.test(e)};function tC(e,t,n,r,i,a){i?(e.opacity=WE(0,void 0!==n.opacity?n.opacity:1,rC(r)),e.opacityExit=WE(void 0!==t.opacity?t.opacity:1,0,iC(r))):a&&(e.opacity=WE(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(var o=0;o<JI;o++){var u="border".concat($I[o],"Radius"),s=nC(t,u),c=nC(n,u);if(void 0!==s||void 0!==c)s||(s=0),c||(c=0),0===s||0===c||eC(s)===eC(c)?(e[u]=Math.max(WE(ZI(s),ZI(c),r),0),(cx.test(c)||cx.test(s))&&(e[u]+="%")):e[u]=c}(t.rotate||n.rotate)&&(e.rotate=WE(t.rotate||0,n.rotate||0,r))}function nC(e,t){return void 0!==e[t]?e[t]:e.borderRadius}var rC=aC(0,.5,fS),iC=aC(.5,.95,uS);function aC(e,t,n){return function(r){return r<e?0:r>t?1:n(rS(e,t,r))}}function oC(e,t){e.min=t.min,e.max=t.max}function uC(e,t){oC(e.x,t.x),oC(e.y,t.y)}function sC(e,t,n,r,i){return e=YT(e-=t,1/n,r),void 0!==i&&(e=YT(e,1/i,r)),e}function cC(e,t,n,r,i){var a=o(n,3),u=a[0],s=a[1],c=a[2];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(cx.test(t)){t=parseFloat(t),t=WE(o.min,o.max,t/100)-o.min}if("number"===typeof t){var u=WE(a.min,a.max,r);e===a&&(u-=t),e.min=sC(e.min,t,n,u,i),e.max=sC(e.max,t,n,u,i)}}(e,t[u],t[s],t[c],t.scale,r,i)}var lC=["x","scaleX","originX"],fC=["y","scaleY","originY"];function hC(e,t,n,r){cC(e.x,t,lC,null===n||void 0===n?void 0:n.x,null===r||void 0===r?void 0:r.x),cC(e.y,t,fC,null===n||void 0===n?void 0:n.y,null===r||void 0===r?void 0:r.y)}function dC(e){return 0===e.translate&&1===e.scale}function vC(e){return dC(e.x)&&dC(e.y)}function pC(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function mC(e){return NT(e.x)/NT(e.y)}var yC=function(){function e(){h(this,e),this.members=[]}return v(e,[{key:"add",value:function(e){Z_(this.members,e),e.scheduleRender()}},{key:"remove",value:function(e){if(eE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}}},{key:"relegate",value:function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}},{key:"promote",value:function(e,t){var n,r=this.lead;e!==r&&(this.prevLead=r,this.lead=e,e.show(),r&&(r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&r.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach((function(e){var t,n,r,i,a;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(a=null===(r=e.resumingFrom)||void 0===r?void 0:(i=r.options).onExitComplete)||void 0===a||a.call(i)}))}},{key:"scheduleRender",value:function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),e}();function gC(e,t,n){var r="",i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(r="translate3d(".concat(i,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){var o=n.rotate,u=n.rotateX,s=n.rotateY;o&&(r+="rotate(".concat(o,"deg) ")),u&&(r+="rotateX(".concat(u,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) "))}var c=e.x.scale*t.x,l=e.y.scale*t.y;return 1===c&&1===l||(r+="scale(".concat(c,", ").concat(l,")")),r||"none"}var kC=function(e,t){return e.depth-t.depth},bC=function(){function e(){h(this,e),this.children=[],this.isDirty=!1}return v(e,[{key:"add",value:function(e){Z_(this.children,e),this.isDirty=!0}},{key:"remove",value:function(e){eE(this.children,e),this.isDirty=!0}},{key:"forEach",value:function(e){this.isDirty&&this.children.sort(kC),this.isDirty=!1,this.children.forEach(e)}}]),e}(),wC=["","X","Y","Z"],xC=0;function _C(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.checkIsScrollRoot,a=e.resetTransform;return function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===n||void 0===n?void 0:n();h(this,e),this.id=xC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isTransformDirty=!1,this.isProjectionDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){r.isUpdating&&(r.isUpdating=!1,r.clearAllSnapshots())},this.updateProjection=function(){r.nodes.forEach(TC),r.nodes.forEach(NC),r.nodes.forEach(PC)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=t,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[].concat(J(a.path),[a]):[],this.parent=a,this.depth=a?a.depth+1:0,t&&this.root.registerPotentialNode(t,this);for(var o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new bC)}return v(e,[{key:"addEventListener",value:function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new tE),this.eventHandlers.get(e).add(t)}},{key:"notifyListeners",value:function(e){for(var t=this.eventHandlers.get(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===t||void 0===t||t.notify.apply(t,r)}},{key:"hasListeners",value:function(e){return this.eventHandlers.has(e)}},{key:"registerPotentialNode",value:function(e,t){this.potentialNodes.set(e,t)}},{key:"mount",value:function(e){var n,r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var a=this.options,o=a.layoutId,u=a.layout,s=a.visualElement;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),null===(n=this.parent)||void 0===n||n.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),i&&(u||o)&&(this.isLayoutDirty=!0),t){var c,l=function(){return r.root.updateBlockedByResize=!1};t(e,(function(){r.root.updateBlockedByResize=!0,c&&c(),c=US(l,250),Pw.hasAnimatedSinceResize&&(Pw.hasAnimatedSinceResize=!1,r.nodes.forEach(DC))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&s&&(o||u)&&this.addEventListener("didUpdate",(function(e){var t,n,i,a,o,u=e.delta,c=e.hasLayoutChanged,l=e.hasRelativeTargetChanged,h=e.layout;if(r.isTreeAnimationBlocked())return r.target=void 0,void(r.relativeTarget=void 0);var d=null!==(n=null!==(t=r.options.transition)&&void 0!==t?t:s.getDefaultTransition())&&void 0!==n?n:UC,v=s.getProps(),p=v.onLayoutAnimationStart,m=v.onLayoutAnimationComplete,y=!r.targetLayout||!pC(r.targetLayout,h)||l,g=!c&&l;if((null===(i=r.resumeFrom)||void 0===i?void 0:i.instance)||g||c&&(y||!r.currentAnimation)){r.resumeFrom&&(r.resumingFrom=r.resumeFrom,r.resumingFrom.resumingFrom=void 0),r.setAnimationOrigin(u,g);var k=f(f({},ZS(d,"layout")),{},{onPlay:p,onComplete:m});s.shouldReduceMotion&&(k.delay=0,k.type=!1),r.startAnimation(k)}else c||0!==r.animationProgress||DC(r),r.isLead()&&(null===(o=(a=r.options).onExitComplete)||void 0===o||o.call(a));r.targetLayout=h}))}}},{key:"unmount",value:function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,Q_.preRender(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1}},{key:"startUpdate",value:function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(RC),this.animationId++)}},{key:"willUpdate",value:function(){var e,t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.isUpdateBlocked())null===(t=(e=this.options).onExitComplete)||void 0===t||t.call(e);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var i=0;i<this.path.length;i++){var a=this.path[i];a.shouldResetTransform=!0,a.updateScroll("snapshot")}var o=this.options,u=o.layoutId,s=o.layout;if(void 0!==u||s){var c=null===(n=this.options.visualElement)||void 0===n?void 0:n.getProps().transformTemplate;this.prevTransformTemplateValue=null===c||void 0===c?void 0:c(this.latestValues,""),this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}}}},{key:"didUpdate",value:function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(CC);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(BC),this.potentialNodes.clear()),this.nodes.forEach(AC),this.nodes.forEach(EC),this.nodes.forEach(SC),this.clearAllSnapshots(),X_.update(),X_.preRender(),X_.render())}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(IC),this.sharedNodes.forEach(OC)}},{key:"scheduleUpdateProjection",value:function(){W_.preRender(this.updateProjection,!1,!0)}},{key:"scheduleCheckAfterUnmount",value:function(){var e=this;W_.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}},{key:"updateLayout",value:function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++){this.path[t].updateScroll()}var n=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox),null===(e=this.options.visualElement)||void 0===e||e.notify("LayoutMeasure",this.layout.layoutBox,null===n||void 0===n?void 0:n.layoutBox)}}},{key:"updateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}},{key:"resetTransform",value:function(){var e;if(a){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!vC(this.projectionDelta),r=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,i=null===r||void 0===r?void 0:r(this.latestValues,""),o=i!==this.prevTransformTemplateValue;t&&(n||WT(this.latestValues)||o)&&(a(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.measurePageBox(),n=this.removeElementScroll(t);return e&&(n=this.removeTransform(n)),zC(n),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}},{key:"measurePageBox",value:function(){var e=this.options.visualElement;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};var t=e.measureViewportBox(),n=this.root.scroll;return n&&(tI(t.x,n.offset.x),tI(t.y,n.offset.y)),t}},{key:"removeElementScroll",value:function(e){var t={x:{min:0,max:0},y:{min:0,max:0}};uC(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,a=r.options;if(r!==this.root&&i&&a.layoutScroll){if(i.isRoot){uC(t,e);var o=this.root.scroll;o&&(tI(t.x,-o.offset.x),tI(t.y,-o.offset.y))}tI(t.x,i.offset.x),tI(t.y,i.offset.y)}}return t}},{key:"applyTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={x:{min:0,max:0},y:{min:0,max:0}};uC(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&aI(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),WT(i.latestValues)&&aI(n,i.latestValues)}return WT(this.latestValues)&&aI(n,this.latestValues),n}},{key:"removeTransform",value:function(e){var t,n={x:{min:0,max:0},y:{min:0,max:0}};uC(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];if(i.instance&&WT(i.latestValues)){HT(i.latestValues)&&i.updateSnapshot();var a={x:{min:0,max:0},y:{min:0,max:0}};uC(a,i.measurePageBox()),hC(n,i.latestValues,null===(t=i.snapshot)||void 0===t?void 0:t.layoutBox,a)}}return WT(this.latestValues)&&hC(n,this.latestValues),n}},{key:"setTargetDelta",value:function(e){this.targetDelta=e,this.isProjectionDirty=!0,this.root.scheduleUpdateProjection()}},{key:"setOptions",value:function(e){this.options=f(f(f({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"resolveTargetDelta",value:function(){var e,t=this.getLead();if(this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isProjectionDirty||this.attemptToResolveRelativeTarget){var n=this.options,r=n.layout,i=n.layoutId;if(this.layout&&(r||i)){if(!this.targetDelta&&!this.relativeTarget){var a=this.getClosestProjectingParent();a&&a.layout?(this.relativeParent=a,this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},FT(this.relativeTargetOrigin,this.layout.layoutBox,a.layout.layoutBox),uC(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var o,u,s;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(o=this.target,u=this.relativeTarget,s=this.relativeParent.target,LT(o.x,u.x,s.x),LT(o.y,u.y,s.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):uC(this.target,this.layout.layoutBox),ZT(this.target,this.targetDelta)):uC(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;var c=this.getClosestProjectingParent();c&&Boolean(c.resumingFrom)===Boolean(this.resumingFrom)&&!c.options.layoutScroll&&c.target?(this.relativeParent=c,this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},FT(this.relativeTargetOrigin,this.target,c.target),uC(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}}},{key:"getClosestProjectingParent",value:function(){if(this.parent&&!HT(this.parent.latestValues)&&!QT(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()}},{key:"calcProjection",value:function(){var e,t=this.isProjectionDirty,n=this.isTransformDirty;this.isProjectionDirty=this.isTransformDirty=!1;var r=this.getLead(),i=Boolean(this.resumingFrom)||this!==r,a=!0;if(t&&(a=!1),i&&n&&(a=!1),!a){var o=this.options,u=o.layout,s=o.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(u||s)){uC(this.layoutCorrected,this.layout.layoutBox),function(e,t,n){var r,i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=n.length;if(o){var u,s;t.x=t.y=1;for(var c=0;c<o;c++)s=(u=n[c]).projectionDelta,"contents"!==(null===(i=null===(r=u.instance)||void 0===r?void 0:r.style)||void 0===i?void 0:i.display)&&(a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&aI(e,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,ZT(e,s)),a&&WT(u.latestValues)&&aI(e,u.latestValues));t.x=eI(t.x),t.y=eI(t.y)}}(this.layoutCorrected,this.treeScale,this.path,i);var c=r.target;if(c){this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});var l=this.treeScale.x,f=this.treeScale.y,h=this.projectionTransform;OT(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.projectionTransform=gC(this.projectionDelta,this.treeScale),this.projectionTransform===h&&this.treeScale.x===l&&this.treeScale.y===f||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c))}}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var e,t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(t=(e=this.options).scheduleRender)||void 0===t||t.call(e),r&&(null===(n=this.getStack())||void 0===n||n.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"setAnimationOrigin",value:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.snapshot,o=(null===a||void 0===a?void 0:a.latestValues)||{},u=f({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!i;var c={x:{min:0,max:0},y:{min:0,max:0}},l=(null===a||void 0===a?void 0:a.source)!==(null===(t=this.layout)||void 0===t?void 0:t.source),h=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,d=Boolean(l&&!h&&!0===this.options.crossfade&&!this.path.some(VC));this.animationProgress=0,this.mixTargetDelta=function(t){var n,i=t/1e3;LC(s.x,e.x,i),LC(s.y,e.y,i),r.setTargetDelta(s),r.relativeTarget&&r.relativeTargetOrigin&&r.layout&&(null===(n=r.relativeParent)||void 0===n?void 0:n.layout)&&(FT(c,r.layout.layoutBox,r.relativeParent.layout.layoutBox),FC(r.relativeTarget,r.relativeTargetOrigin,c,i)),l&&(r.animationValues=u,tC(u,o,r.latestValues,i,d,h)),r.root.scheduleUpdateProjection(),r.scheduleRender(),r.animationProgress=i},this.mixTargetDelta(0)}},{key:"startAnimation",value:function(e){var t,n,r=this;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(Q_.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=W_.update((function(){Pw.hasAnimatedSinceResize=!0,r.currentAnimation=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Ww(e)?e:aE(e);return r.start(uT("",r,t,n)),{stop:function(){return r.stop()},isAnimating:function(){return r.isAnimating()}}}(0,1e3,f(f({},e),{},{onUpdate:function(t){var n;r.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),r.completeAnimation()}})),r.resumingFrom&&(r.resumingFrom.currentAnimation=r.currentAnimation),r.pendingAnimation=void 0}))}},{key:"completeAnimation",value:function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;if(t&&n&&r){if(this!==e&&this.layout&&r&&qC(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};var a=NT(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+a;var o=NT(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+o}uC(t,n),aI(t,i),OT(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}},{key:"registerSharedNode",value:function(e,t){var n,r,i;this.sharedNodes.has(e)||this.sharedNodes.set(e,new yC),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(i=null===(r=t.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===i?void 0:i.call(r,t)})}},{key:"isLead",value:function(){var e=this.getStack();return!e||e.lead===this}},{key:"getLead",value:function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}},{key:"getPrevLead",value:function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}},{key:"getStack",value:function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)}},{key:"promote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsReset,n=e.transition,r=e.preserveFollowOpacity,i=this.getStack();i&&i.promote(this,r),t&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}},{key:"relegate",value:function(){var e=this.getStack();return!!e&&e.relegate(this)}},{key:"resetRotation",value:function(){var e=this.options.visualElement;if(e){var t=!1,n=e.latestValues;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),t){for(var r={},i=0;i<wC.length;i++){var a="rotate"+wC[i];n[a]&&(r[a]=n[a],e.setStaticValue(a,0))}for(var o in null===e||void 0===e||e.render(),r)e.setStaticValue(o,r[o]);e.scheduleRender()}}}},{key:"getProjectionStyles",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={};if(!this.instance||this.isSVG)return i;if(!this.isVisible)return{visibility:"hidden"};i.visibility="";var a=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=Kx(r.pointerEvents)||"",i.transform=a?a(this.latestValues,""):"none",i;var o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){var u={};return this.options.layoutId&&(u.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,u.pointerEvents=Kx(r.pointerEvents)||""),this.hasProjected&&!WT(this.latestValues)&&(u.transform=a?a({},""):"none",this.hasProjected=!1),u}var s=o.animationValues||o.latestValues;this.applyTransformsToTarget(),i.transform=gC(this.projectionDeltaWithTransform,this.treeScale,s),a&&(i.transform=a(s,i.transform));var c=this.projectionDelta,l=c.x,f=c.y;for(var h in i.transformOrigin="".concat(100*l.origin,"% ").concat(100*f.origin,"% 0"),o.animationValues?i.opacity=o===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:i.opacity=o===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0,qw)if(void 0!==s[h]){var d=qw[h],v=d.correct,p=d.applyTo,m=v(s[h],o);if(p)for(var y=p.length,g=0;g<y;g++)i[p[g]]=m;else i[h]=m}return this.options.layoutId&&(i.pointerEvents=o===this?Kx(r.pointerEvents)||"":"none"),i}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(CC),this.root.sharedNodes.clear()}}]),e}()}function EC(e){e.updateLayout()}function SC(e){var t,n,r,i=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){var a=e.layout,o=a.layoutBox,u=a.measuredBox,s=e.options.animationType,c=i.source!==e.layout.source;"size"===s?qT((function(e){var t=c?i.measuredBox[e]:i.layoutBox[e],n=NT(t);t.min=o[e].min,t.max=t.min+n})):qC(s,i.layoutBox,o)&&qT((function(e){var t=c?i.measuredBox[e]:i.layoutBox[e],n=NT(o[e]);t.max=t.min+n}));var l={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};OT(l,o,i.layoutBox);var f={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};c?OT(f,e.applyTransform(u,!0),i.measuredBox):OT(f,o,i.layoutBox);var h=!vC(l),d=!1;if(!e.resumeFrom){var v=e.getClosestProjectingParent();if(v&&!v.resumeFrom){var p=v.snapshot,m=v.layout;if(p&&m){var y={x:{min:0,max:0},y:{min:0,max:0}};FT(y,i.layoutBox,p.layoutBox);var g={x:{min:0,max:0},y:{min:0,max:0}};FT(g,o,m.layoutBox),pC(y,g)||(d=!0)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:i,delta:f,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:d})}else e.isLead()&&(null===(r=(n=e.options).onExitComplete)||void 0===r||r.call(n));e.options.transition=void 0}function TC(e){e.isProjectionDirty||(e.isProjectionDirty=Boolean(e.parent&&e.parent.isProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=Boolean(e.parent&&e.parent.isTransformDirty))}function IC(e){e.clearSnapshot()}function CC(e){e.clearMeasurements()}function AC(e){var t=e.options.visualElement;(null===t||void 0===t?void 0:t.getProps().onBeforeLayoutMeasure)&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function DC(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function NC(e){e.resolveTargetDelta()}function PC(e){e.calcProjection()}function RC(e){e.resetRotation()}function OC(e){e.removeLeadSnapshot()}function LC(e,t,n){e.translate=WE(t.translate,0,n),e.scale=WE(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function MC(e,t,n,r){e.min=WE(t.min,n.min,r),e.max=WE(t.max,n.max,r)}function FC(e,t,n,r){MC(e.x,t.x,n.x,r),MC(e.y,t.y,n.y,r)}function VC(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var UC={duration:.45,ease:[.4,0,.1,1]};function BC(e,t){for(var n=e.root,r=e.path.length-1;r>=0;r--)if(Boolean(e.path[r].instance)){n=e.path[r];break}var i=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));i&&e.mount(i,!0)}function jC(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function zC(e){jC(e.x),jC(e.y)}function qC(e,t,n){return"position"===e||"preserve-aspect"===e&&!PT(mC(t),mC(n),.2)}var GC=_C({attachResizeListener:function(e,t){return Jx(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),KC={current:void 0},HC=_C({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!KC.current){var e=new GC(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),KC.current=e}return KC.current},resetTransform:function(e,t){e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),WC=f(f(f(f({},wT),R_),fI),YI),QC=Bw((function(e,t){return function(e,t,n,r,i){var a=t.forwardMotionProps,o=void 0!==a&&a;return f(f({},zw(e)?Yx:$x),{},{preloadedFeatures:n,useRender:Lx(o),createVisualElement:r,projectionNodeConstructor:i,Component:e})}(e,t,WC,qI,HC)}));var XC=n(184),YC=function(e){var t=e.setSelectedImg,n=dw("images").docs;return(0,XC.jsx)("div",{className:"img-grid",children:n&&n.map((function(e){return(0,XC.jsx)(QC.div,{whileHover:{opacity:1},layout:!0,className:"img-wrap",onClick:function(){return t(e.url)},children:(0,XC.jsx)(QC.img,{src:e.url,alt:"your_photo",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})},e.id)}))})},$C=function(e){var t=e.selectedImg,n=e.setSelectedImg;return(0,XC.jsx)(QC.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&n(null)},initial:{opacity:0},animate:{opacity:1},children:(0,XC.jsx)(QC.img,{src:t,alt:"your_picture",initial:{y:"-100vh"},animate:{y:0}})})},JC=function(){return(0,XC.jsxs)("div",{className:"title",children:[(0,XC.jsx)("h1",{children:"FireGram"}),(0,XC.jsx)("h2",{children:"Your Pictures"})]})},ZC=n(835),eA=function(e){var n=o((0,t.useState)(0),2),r=n[0],i=n[1],a=o((0,t.useState)(null),2),u=a[0],s=a[1],c=o((0,t.useState)(null),2),l=c[0],f=c[1];return(0,t.useEffect)((function(){var t=lw.ref(e.name),n=fw.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;i(t)}),(function(e){s(e)}),ee($().mark((function e(){var r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:r=e.sent,i=hw(),n.add({url:r,createdAt:i}),f(r);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:r,url:l,error:u}},tA=function(e){var n=e.file,r=e.setFile,i=eA(n),a=i.url,o=i.progress;return(0,t.useEffect)((function(){a&&r(null)}),[a,r]),(0,XC.jsx)(XC.Fragment,{children:(0,XC.jsxs)("div",{className:"global-progress",children:[(0,XC.jsx)(ZC.ZP,{start:0,end:100,duration:3,className:"count"}),(0,XC.jsx)("p",{className:"percent",children:"%"}),(0,XC.jsx)(QC.div,{className:"progress-bar",initial:{width:0},animate:{width:o+"%"},children:"Loading..."})]})})},nA=n.p+"static/media/downArrow.575bd266f4cf365478b4.jpg",rA=function(){var e=o((0,t.useState)(null),2),n=e[0],r=e[1],i=o((0,t.useState)(null),2),a=i[0],u=i[1],s=["image/png","image/jpeg"];return(0,XC.jsxs)("form",{children:[(0,XC.jsx)("p",{className:"titleBtn",children:"Click me to add a photo"}),(0,XC.jsx)("img",{src:nA,alt:"your_image",className:"downArrowPhoto"}),(0,XC.jsxs)("label",{children:[(0,XC.jsx)("input",{type:"file",placeholder:"+",onChange:function(e){e.preventDefault();var t=e.target.files[0];t&&s.includes(t.type)?(r(t),u("")):(r(null),u("Please select in image file (png or jpeg)"))}}),(0,XC.jsx)("span",{children:"+"})]}),(0,XC.jsxs)("div",{className:"output",children:[a&&(0,XC.jsx)("div",{className:"error",children:a}),n&&(0,XC.jsx)("div",{children:n.name}),n&&(0,XC.jsx)(tA,{file:n,setFile:r})]})]})},iA=function(){var e=o((0,t.useState)(null),2),n=e[0],r=e[1];return(0,XC.jsxs)("div",{className:"App",children:[(0,XC.jsx)(JC,{}),(0,XC.jsx)(rA,{}),(0,XC.jsx)(YC,{setSelectedImg:r}),n&&(0,XC.jsx)($C,{selectedImg:n,setSelectedImg:r})]})};r.createRoot(document.getElementById("root")).render((0,XC.jsx)(iA,{}))}()}();
//# sourceMappingURL=main.c7b0de59.js.map